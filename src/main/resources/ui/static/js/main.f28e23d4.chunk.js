(this.webpackJsonpplayground=this.webpackJsonpplayground||[]).push([[0],{126:function(e,t,n){},1275:function(e,t,n){},1361:function(e,t,n){},1363:function(e,t,n){},1367:function(e,t,n){"use strict";n.r(t),n.d(t,"history",(function(){return tl})),n.d(t,"store",(function(){return il}));var a=n(1),r=n(3),i=n.n(r),s=n(63),o=n.n(s),l=n(113),c=n(45),u=n(188),d=(n(598),n(518)),h=n(560),p=n.n(h),j=n(16),m=n(6),b=n(7),f={vizual:["deleteColumn","deleteRow","insertColumn","insertRow","moveColumn","moveRow","renameColumn","updateCell"]},v="ADD_FILTERED_COMMAND",O="COPY_CELL",g="HIDE_CELLS",x="NO_OP",C="REMOVE_FILTERED_COMMAND",w="REVERSE_ORDER",k="SET_FILTERED_MODULES",y=function(e){return{type:k,filter:e}},S=function(){return{type:g}},N=function(){return{type:w}},E={userSettings:new(function(){function e(t,n,a,r,i){Object(m.a)(this,e),this.filteredCommands=null!=t?t:f,this.cellDatasetRowLimit=null!=n?n:10,this.reversedOrder=null!=a&&a,this.hideCommands=null!=r&&r,this.clipboard=i}return Object(b.a)(e,[{key:"addCommandToHiddenList",value:function(t){var n={},a=this.filteredCommands[t.packageId];if(null!=a){for(var r=[],i=!1,s=0;s<a.length;s++)a[s]!==t.id?r.push(a[s]):i=!0;i||r.push(t.id),n[t.packageId]=r}else n[t.packageId]=[t.id];for(var o in this.filteredCommands)o!==t.packageId&&(n[o]=this.filteredCommands[o]);return new e(n,this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"cellRowLimit",value:function(){return this.cellDatasetRowLimit}},{key:"copyCell",value:function(t){var n=null;return t.isNewCell()||(n={commandSpec:t.commandSpec,arguments:t.module.command.arguments}),new e(this.filteredCommands,this.cellRowLimitValue,this.reversedOrder,this.hideCommands,n)}},{key:"isFiltered",value:function(e){var t=this.filteredCommands[e.packageId];return!(null==t||!t.find((function(t){return t===e.id})))}},{key:"hideFilteredCommands",value:function(){return this.hideCommands}},{key:"reverseOrder",value:function(){return new e(this.filteredCommands,this.cellRowLimitValue,!this.reversedOrder,this.hideCommands)}},{key:"removeCommandFromHiddenList",value:function(t){var n={};for(var a in this.filteredCommands)if(a===t.packageId){for(var r=this.filteredCommands[a],i=[],s=0;s<r.length;s++)r[s]!==t.id&&i.push(r[s]);i.length>0&&(n[a]=i)}else n[a]=this.filteredCommands[a];return new e(n,this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"setFilter",value:function(t){return new e(null!=t?t:{},this.cellRowLimitValue,this.reversedOrder,this.hideCommands)}},{key:"showNotebookReversed",value:function(){return this.reversedOrder}},{key:"toggleHideCells",value:function(){return new e(this.filteredCommands,this.cellRowLimitValue,this.reversedOrder,!this.hideCommands)}}]),e}())},A=n(190),I=n.n(A),D="REQUEST_SERVICE",P="RECEIVE_SERVICE",R="SERVICE_ERROR",T="REQUEST_AUTH",_="RECEIVE_AUTH",L="AUTH",M=function(e){return{type:R,error:e}},F=function(){return{type:T}},U=function(e){var t=JSON.parse(localStorage.getItem("user"));return t?t&&t.authdata?{Authorization:"Basic "+t.authdata}:(localStorage.removeItem("user"),null):(e(F()),null)},V=function(e,t){return function(n){if(window.env.API_BASIC_AUTH){var a=U(n);if(a){var r=t;return t&&t.headers?Object.assign(r.headers,a):t?r.headers=a:r={method:"GET",headers:a},fetch(e,r)}return new Promise((function(e,t){t({message:"No saved credentials.  Please enter credentials."})}))}return fetch(e,t)}},B=function(e,t){return null==t||t?e.text().then((function(e){try{var t=JSON.parse(e);return Promise.resolve(t)}catch(r){if(!(e&&e.startsWith("<!DOCTYPE html>")&&e.includes("SAMLRequest")))return Promise.resolve(JSON.parse("{}"));if(!0!==window.confirm("Your session has timed out.  Do you want to renew your session?"))return Promise.resolve(JSON.parse("{}"));var n=JSON.parse(localStorage.getItem("profile")),a="default";n&&n.client&&(a=n.client),window.open("/reauth?client="+a)}})):Promise.resolve(e.data)},H=function(){return function(e,t){var n=t().serviceApi.serviceUrl;return e({type:D}),V(n)(e).then((function(t){t.status>=200&&t.status<400?B(t).then((function(t){return e(function(e){return e.defaults&&e.defaults.profile&&localStorage.setItem("profile",JSON.stringify(e.defaults.profile)),{type:P,name:e.name,properties:e.defaults,environment:e.environment,links:e.links}}(t))})):401===t.status?e(F()):B(t).then((function(t){return e(M(t.message))}))})).catch((function(t){return e(M(t.message))}))}},z={homePageContent:null,projects:[]},q=function(e,t,n,a,r){return function(i){i(W(e,t,n,a,r))}},J=function(e,t,n,a){return function(r){return a&&r(a()),V(e,{method:"DELETE"})(r).then((function(e){204===e.status?r(t()):401===e.status?r(F()):404===e.status?r(n("Resource not found")):B(e).then((function(e){return r(n(e.message))}))})).catch((function(e){return r(n(e.message))}))}},K=function(e,t,n,a){return function(r){return a&&r(a()),V(e)(r).then((function(e){e.status>=200&&e.status<400?B(e).then((function(e){return r(t(e))})):401===e.status?r(F()):B(e).then((function(e){return r(n(e.message))}))})).catch((function(e){return r(n(e.message))}))}},G=function(e,t,n){var a=e.properties.find((function(e){return e.key===t}));return a?a.value:n},W=function(e,t,n,a,r){return function(i){return r&&i(r()),V(e,{method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}})(i).then((function(e){e.status>=200&&e.status<400?B(e).then((function(e){return i(n(e))})):401===e.status?i(F()):B(e).then((function(e){return i(a(e.message))}))})).catch((function(e){return i(a(e.message))}))}},Y=function(e,t,n,a,r,i){return function(s){var o={key:t};return null!==n&&(o.value=n),function(e,t,n,a,r,i){return i&&e(i()),V(t,{method:"PUT",body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"}})(e).then((function(t){t.status>=200&&t.status<400?B(t).then((function(t){return e(a(t))})):401===t.status?e(F()):B(t).then((function(t){return e(r(t.message))}))})).catch((function(t){return e(r(t.message))}))}(s,e,{properties:[o]},a,r,i)}},Q="self",Z="branch.head",X="dataset.download",$="project.create",ee="project.import",te="project.list",ne="file.upload",ae="workflow.append",re="module.freeze",ie="module.thaw",se=function(){function e(t){var n=this;Object(m.a)(this,e),this.getSelf=function(){return n.get(Q)},this.links=t}return Object(b.a)(e,[{key:"get",value:function(e){var t=this.links.find((function(t){return t.rel===e}));return null!=t?t.href:(console.log("NOT FOUND IN"),console.log(this.links),null)}},{key:"getAnnotations",value:function(e,t){var n=this.get("annotations.get");return n+="?column="+e+"&row="+t}},{key:"getDatasetUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this.get(Q);return a+="?offset="+e+"&limit="+t,n&&(a+="&profile="+n),a}},{key:"getNotebookUrl",value:function(e,t,n){var a=this.get(te);return null!=a?(a+="/"+e+"/branches/"+t,a+=null!=n?"/workflows/"+n:"/head"):null}},{key:"getProjectUrl",value:function(e){var t=this.get(te);return null!=t?t+"/"+e:null}},{key:"has",value:function(e){return null!=this.links.find((function(t){return t.rel===e}))}}]),e}(),oe=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.isDefault=a,this.links=r}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=G(e,"name","undefined"),this.isDefault=e.isDefault,this.links=new se(e.links),this}},{key:"updateName",value:function(t){return new e(this.id,t,this.isDefault,this.links)}}]),e}(),le=function(e){return e.sort((function(e,t){return e.name.localeCompare(t.name)}))},ce=n(615),ue=function(e){return ce.tz(e,"UTC").tz(ce.tz.guess()).format("DD-MMM-YYYY HH:mm:ss")},de="deleteColumn",he="deleteRow",pe="dropDataset",je="insertColumn",me="insertRow",be="load",fe="moveColumn",ve="moveRow",Oe="renameColumn",ge="renameDataset",xe="sortDataset",Ce="updateCell",we="vizual",ke="asc",ye="desc",Se=function(e,t,n){return{packageId:we,commandId:fe,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"position",value:n}]}},Ne=function(e,t,n){return{packageId:we,commandId:ve,arguments:[{id:"dataset",value:e},{id:"row",value:t},{id:"position",value:n}]}},Ee=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=G(e,"name","undefined"),this.createdAt=ue(e.createdAt),this.lastModifiedAt=ue(e.lastModifiedAt),this.defaultBranch=e.defaultBranch,this.links=new se(e.links),this}}]),e}(),Ae=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.links=a,this.branches=r}return Object(b.a)(e,[{key:"addBranch",value:function(t){for(var n=[t],a=0;a<this.branches.length;a++)n.push(this.branches[a]);return le(n),new e(this.id,this.name,this.links,n)}},{key:"deleteBranch",value:function(t){for(var n=[],a=0;a<this.branches.length;a++){var r=this.branches[a];r.id!==t&&n.push(r)}return new e(this.id,this.name,this.links,n)}},{key:"findBranch",value:function(e){if(null!=e)return this.branches.find((function(t){return t.id===e}))}},{key:"fromJson",value:function(e){this.id=e.id,this.name=G(e,"name"),this.links=new se(e.links),this.branches=[];for(var t=0;t<e.branches.length;t++)this.branches.push((new oe).fromJson(e.branches[t]));return le(this.branches),this}},{key:"getDefaultBranch",value:function(){return this.branches.find((function(e){return e.isDefault}))}},{key:"isGrouped",value:function(e){if(e.command.type===we){var t=e.command.id;if(t!==be&&t!==pe&&t!==ge&&t!==xe)return!0}return!1}},{key:"updateBranch",value:function(t){for(var n=this.id,a=this.name,r=this.links,i=this.branches,s=[],o=0;o<i.length;o++){var l=i[o];l.id===t.id?s.push(t):s.push(l)}return new e(n,a,r,s)}},{key:"updateName",value:function(t){return new e(this.id,t,this.links,this.branches)}}]),e}(),Ie=function(){function e(t,n,a){Object(m.a)(this,e),this.title=t,this.message=n,this.status=null!=a?a:400}return Object(b.a)(e,[{key:"is404",value:function(){return 404===this.status}}]),e}(),De="PROJECT_FETCH_ERROR",Pe="RECEIVE_PROJECT",Re="REQUEST_PROJECT",Te="PROJECT_ACTION_ERROR",_e="RECEIVE_PROJECT_RESOURCE",Le="REQUEST_PROJECT_ACTION",Me="UPDATE_PROJECT",Fe="UPDATE_RESOURCE",Ue="UPDATE_WORKFLOW",Ve=function(e,t,n){return function(a,r){if(r().serviceApi.links){var i=r().serviceApi.links.getProjectUrl(e);return a(We()),V(i)(a).then((function(e){e.status>=200&&e.status<400?B(e).then((function(e){var r=(new Ae).fromJson(e),i=null;null!=(i=null!=t?r.branches.find((function(e){return e.id===t})):r.branches.find((function(e){return e.isDefault})))?(a({type:Pe,project:r,branch:i}),a(n(r,i))):a(Ge("Unknown branch "+t,404))})):401===e.status?a(F()):404===e.status?B(e).then((function(e){return a(Ge(e.message,404))})):B(e).then((function(t){return a(Ge(t.message,e.status))}))})).catch((function(e){return a(Ge(e.message))}))}}},Be=function(e){return{type:_e,resource:e}},He=function(e){return{type:Me,project:e}},ze=function(e,t,n){return function(a){var r=e.findBranch(t);null!=r?(a({type:Pe,project:e,branch:r}),n&&a(n(e,r))):a(Ge("Unknown branch "+t,404))}},qe=function(e,t){return function(n){n(Y(e.links.get("project.update"),"name",t,(function(t){return function(n){return n({type:Me,project:e.updateName(G(t,"name"))})}}),(function(e){return Ke("Error updating project",e)}),Ye))}},Je=function(e,t){return{type:Te,error:null}},Ke=function(e,t){return{type:Te,error:new Ie(e,t)}},Ge=function(e,t,n){return null==n&&(n="Error fetching project"),{type:De,error:new Ie(n,e,t)}},We=function(){return{type:Re}},Ye=function(){return{type:Le}},Qe=function(){function e(t,n,a,r){Object(m.a)(this,e),this.id=t,this.name=n,this.columns=a,this.links=r}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.columns=e.columns,this.rowCount=e.rowCount,this.links=new se(e.links),this}}]),e}(),Ze=function(){function e(t,n,a,r,i,s,o){var l=this,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;Object(m.a)(this,e),this.isProfiled=function(){return null!=l.properties&&Object.keys(l.properties).length>0&&null!=l.properties.is_profiled},this.id=t,this.name=n,this.columns=a,this.rows=r,this.rowCount=i,this.offset=s,this.links=o,this.moduleId=c,this.properties=u}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.columns=e.columns,this.rows=e.rows,this.rowCount=e.rowCount,this.offset=e.offset,this.links=new se(e.links),this.moduleId=e.moduleId,this.properties=e.properties,this}},{key:"hasAnnotations",value:function(e,t){var n=this.rows.find((function(e){return e.id===t}));return n&&n.rowAnnotationFlags&&!1===n.rowAnnotationFlags[e]}},{key:"rowAtIndex",value:function(e){return this.rows[e]}},{key:"updateAnnotations",value:function(t,n,a){var r=this.hasAnnotations(t,n),i=null;if(a&&r)return this;if(!a&&!r)return this;if(a&&!r)(i=this.annotatedCells.slice()).push({column:t,row:n});else if(!a&&r){i=[];for(var s=0;s<this.annotatedCells.length;s++){var o=this.annotatedCells[s];o.column===t&&o.row===n||i.push(o)}}return new e(this.id,this.name,this.columns,this.rows,this.offset,this.links,i,this.moduleId,this.properties)}}]),e}(),Xe=function(){function e(){var t=this;Object(m.a)(this,e),this.actionIsAppend=function(){return"apd"===t.action},this.actionIsCreate=function(){return"cre"===t.action},this.actionIsDelete=function(){return"del"===t.action},this.actionIsInsert=function(){return"ins"===t.action},this.actionIsReplace=function(){return"upd"===t.action}}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.createdAt=ue(e.createdAt),this.action=e.action,this.packageId=e.packageId,this.commandId=e.commandId,this}}]),e}(),$e=function(){function e(t){Object(m.a)(this,e),this.engine=t}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.id=e.id,this.createdAt=ue(e.createdAt),this.state=e.state,this.readOnly=e.readOnly,this.datasets={};for(var t=0;t<e.datasets.length;t++){var n=(new Qe).fromJson(e.datasets[t]);this.datasets[n.id]=n}return this.modules=e.modules,this.links=new se(e.links),this.tableOfContents=e.tableOfContents,this}},{key:"getCommandSpec",value:function(e){return this.engine.packages.getCommandSpec(e.packageId,e.commandId)}}]),e}(),et=n(8),tt=n(9),nt=n(185),at=n.n(nt),rt="CONTENT_CHART",it="CONTENT_DATASET",st="CONTENT_ERROR",ot="CONTENT_HTML",lt="CONTENT_MARKDOWN",ct="CONTENT_HIDE",ut="CONTENT_TEXT",dt="CONTENT_TIMESTAMPS",ht="CONTENT_MULTIPLE",pt=function e(t,n){var a=this;Object(m.a)(this,e),this.isChart=function(){return a.type===rt},this.isDataset=function(){return a.type===it},this.isError=function(){return a.type===st},this.isHidden=function(){return a.type===ct},this.isHtml=function(){return a.type===ot},this.isMarkdown=function(){return a.type===lt},this.isText=function(){return a.type===ut},this.isTimestamps=function(){return a.type===dt},this.isMultiple=function(){return a.type===ht},this.type=t,this.isFetching=null!=n&&n},jt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a,r){var i;return Object(m.a)(this,n),(i=t.call(this,rt,r)).name=e,i.dataset=a,i}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.name,this.dataset,!0)}}]),n}(pt),mt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this,it,a)).dataset=e,r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.dataset,!0)}}]),n}(pt),bt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;return Object(m.a)(this,n),(r=t.call(this,st,a)).error=e,r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.error,!0)}}]),n}(pt),ft=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,ct,e)}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(!0)}}]),n}(pt),vt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,ot,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/html"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(pt),Ot=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,lt,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/markdown"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(pt),gt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,ut,a)).lines=[];for(var i=0;i<e.length;i++){var s=e[i];null!=s.type?"text/plain"===s.type&&r.lines.push(s.value):r.lines.push(s)}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.lines,!0)}}]),n}(pt),xt=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a){var r;Object(m.a)(this,n),(r=t.call(this,ht,a)).outputs={};var i=Object(nt.groupBy)(e,"type");for(var s in i)switch(s){case"text/plain":case"text/markdown":case"text/html":r.outputs[s]=i[s].map((function(e){return e.value})).join("\n");break;case"dataset/view":r.outputs[s]=(new Ze).fromJson(i[s][0].value);break;case"chart/view":r.outputs[s]=i[s][0].value;break;default:r.outputs[s]=i[s][0]}return r}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.outputs,!0)}}]),n}(pt),Ct=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e,a,r){var i;return Object(m.a)(this,n),(i=t.call(this,dt)).createdAt=e,i.startedAt=a,i.finishedAt=r,i}return Object(b.a)(n,[{key:"setFetching",value:function(){return new n(this.createdAt,this.startedAt,this.finishedAt,!0)}}]),n}(pt),wt="";""===wt&&(wt="/");var kt=wt,yt=kt+"projects/:project_id",St=yt+"/branches/:branch_id",Nt=St+"/history",Et=St+"/head",At=St+"/workflows/:workflow_id",It=Et+"/spreadsheet/:dataset_id",Dt=Et+"/errors/:dataset_id",Pt=At+"/spreadsheet/:dataset_id",Rt=At+"/errors/:dataset_id",Tt=40,_t=13,Lt=27,Mt=46,Ft=38,Ut=9,Vt=0,Bt=1,Ht=2,zt=3,qt=function(e,t){if(e<0)return"?";if(0===e)return"0 Bytes";var n=t||2,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][a]},Jt=function(e){return""!==e.trim()},Kt=function(e){return e&&!/[^\d]/.test(e)},Gt=function(e,t){return kt+"projects/"+e+"/branches/"+t+"/history"},Wt=function(e,t,n){var a=kt+"projects/"+e+"/branches/"+t;return a+=null!=n?"/workflows/"+n:"/head"},Yt=function(e,t,n,a){var r=kt+"projects/"+e+"/branches/"+t;return r+=null!=a?"/workflows/"+a+"/spreadsheet/"+n:"/head/spreadsheet/"+n},Qt=function(e,t,n,a){var r=kt+"projects/"+e+"/branches/"+t;return r+=null!=a?"/workflows/"+a+"/errors/"+n:"/head/errors/"+n},Zt=function(e,t){return null!=e?e:t},Xt="RESOURCE_BRANCH",$t="RESOURCE_MAIN_PAGE",en="RESOURCE_NOTEBOOK",tn="RESOURCE_DATASET_CAVEAT",nn=function e(t,n){var a=this;Object(m.a)(this,e),this.isBranch=function(){return a.resourceType===Xt},this.isMainPage=function(){return a.resourceType===$t},this.isNotebook=function(){return a.resourceType===en},this.isError=function(){return a.type===st},this.isChart=function(){return a.type===rt},this.isDataset=function(){return a.type===it},this.isDatasetCaveat=function(){return a.type===tn},this.resourceType=t,this.type=t,this.content=n},an=function(){return new nn(Xt)},rn=function(e){return new nn($t)},sn=function(e){return new nn(en)},on=function(e,t){return new nn(rt,{name:e,dataset:t})},ln=function(e,t){return new nn(tn,{dataset:e,annotations:t})},cn=function(e){return new nn(it,e)},un="UPDATE_BRANCH",dn="RECEIVE_BRANCH_HISTORY",hn="REQUEST_BRANCH",pn=function(e,t,n,a){return function(r){r(J(t.links.get("branch.delete"),(function(){r(He(e.deleteBranch(t.id)));var i=e.getDefaultBranch().id;return a.push(n(e.id,i)),{type:x}}),(function(e){return Ke("Error deleting branch",e)}),mn))}},jn=function(e,t){return function(n){n(null==t?ze(e):K(t.links.getSelf(),(function(n){return function(a){for(var r=n.workflows,i=[],s=0;s<r.length;s++){var o=r[s];i.push((new Xe).fromJson(o))}a(ze(e,t.id)),a({type:dn,workflows:i})}}),(function(e){return Ge(e,400,"Error fetching branch history")}),mn))}},mn=function(){return{type:hn}},bn=function(e,t,n){return function(a){a(Y(t.links.get("branch.update"),"name",n,(function(n){return function(a){var r=t.updateName(G(n,"name"));return a({type:un,branch:r,project:e.updateBranch(r)})}}),(function(e){return Ke("Error updating branch",e)}),Ye))}},fn={fetchError:null,isFetching:!1,workflows:null},vn="INSERT_AFTER",On="INSERT_BEFORE",gn=function(e){return"__"+e+"__"},xn=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e,t){this.id=e.id,this.state=e.state,this.command=e.command,this.outputs=e.outputs,this.datasets=[];for(var n=0;n<e.datasets.length;n++){var a=e.datasets[n],r=a.id,i=a.name,s=t[r];this.datasets.push(new Qe(r,i,s.columns,s.links))}for(var o in this.charts=e.charts,this.text=e.text,this.links=new se(e.links),this.timestamps={},e.timestamps)this.timestamps[o]=ue(e.timestamps[o]);return this.locked=e.locked,this}}]),e}(),Cn=function(){function e(t,n,a){var r=this;Object(m.a)(this,e),this.hasActiveCells=function(){return 0===r.workflow.state||1===r.workflow.state},this.workflow=t,this.cells=n,this.cellCounter=null!=a?a:0,this.id=t.id,this.createdAt=t.createdAt,this.readOnly=t.readOnly,this.datasets=t.datasets}return Object(b.a)(e,[{key:"fromWorkflow",value:function(e){this.cells=[];for(var t=0;t<e.modules.length;t++){var n=(new xn).fromJson(e.modules[t],e.datasets);this.cells.push(new wn(n.id,n,e.getCommandSpec(n.command),yn(n)))}return this}},{key:"dismissChangesForCell",value:function(t){for(var n=[],a=0;a<this.cells.length;a++){var r=this.cells[a];r.id===t&&r.isNewCell()||n.push(r)}return new e(this.workflow,n,this.cellCounter)}},{key:"editCell",value:function(t,n){if(null!=t){for(var a=[],r=0;r<this.cells.length;r++){var i=this.cells[r];if(i.id===t.id)if(null!=n){var s=new wn(gn(this.cellCounter));n===On?(a.push(s),a.push(i)):(a.push(i),a.push(s))}else a.push(new wn(i.id,i.module,i.commandSpec,i.output,!0));else a.push(i)}return new e(this.workflow,a,this.cellCounter+1)}return 0===this.cells.length?new e(this.workflow,[new wn(gn(this.cellCounter))],this.cellCounter+1):this}},{key:"getDatasetForModule",value:function(e,t){var n=e.datasets.find((function(e){return e.name===t})).id,a=this.datasets[n];return new Qe(n,t,a.columns,a.links)}},{key:"isEmpty",value:function(){return 0===this.cells.length}},{key:"lastCell",value:function(){return this.cells.length>0?this.cells[this.cells.length-1]:null}},{key:"replaceOutput",value:function(t,n){for(var a=[],r=0;r<this.cells.length;r++){var i=this.cells[r],s=i.module;null!=s&&s.id===t?a.push(new wn(s.id,s,i.commandSpec,n)):a.push(i)}return new e(this.workflow,a,this.cellCounter)}},{key:"setFetching",value:function(t){for(var n=[],a=0;a<this.cells.length;a++){var r=this.cells[a],i=r.module;null!=i&&i.id===t?n.push(new wn(i.id,i,r.commandSpec,r.output.setFetching())):n.push(r)}return new e(this.workflow,n,this.cellCounter)}},{key:"updateWorkflow",value:function(t,n){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=Math.min(this.cells.length,t.modules.length),s=0;s<i;){var o=this.cells[s];if(o.isNewCell()&&o.id!==n)r.push(o);else{var l=(new xn).fromJson(t.modules[s],t.datasets);if(o.id!==l.id)break;var c=kn(o,l,a);r.push(new wn(l.id,l,o.commandSpec,c)),s++}}for(var u=s;u<t.modules.length;u++){var d=(new xn).fromJson(t.modules[u],t.datasets);r.push(new wn(d.id,d,t.getCommandSpec(d.command),yn(d)))}return new e(t,r,this.cellCounter)}}]),e}(),wn=function(){function e(t,n,a,r){var i=this;Object(m.a)(this,e),this.isActive=function(){return i.isPending()||i.isRunning()},this.isErrorOrCanceled=function(){return i.isCanceled()||i.isError()},this.isNewCell=function(){return null==i.module},this.id=t,this.module=n,this.commandSpec=a,this.output=r}return Object(b.a)(e,[{key:"isCanceled",value:function(){return null!=this.module&&2===this.module.state}},{key:"isError",value:function(){return null!=this.module&&3===this.module.state}},{key:"isPending",value:function(){return null!=this.module&&0===this.module.state}},{key:"isRunning",value:function(){return null!=this.module&&1===this.module.state}},{key:"isSuccess",value:function(){return null!=this.module&&4===this.module.state}},{key:"isFrozen",value:function(){return null!=this.module&&5===this.module.state}}]),e}(),kn=function(e,t,n){var a=e.output;return!n&&(e.output.type!==ut||e.output.lines&&0!==e.output.lines.length)||(a=yn(t)),a},yn=function(e){var t,n=e.outputs.stdout;if(1===n.length){var a=n[0];t="chart/view"===a.type?new jt(a.value.data.name,a.value.result):"dataset/view"===a.type?new mt(new Ze(a.value.id,a.value.name).fromJson(a.value),!1):"text/html"===a.type?new vt(n):"text/markdown"===a.type?new Ot(n):new gt(n)}else t=n.length>1?new xt(n):new gt([]);return t},Sn="RECEIVE_WORKFLOW",Nn="REQUEST_WORKFLOW",En="SET_ACTIVE_NOTEBOOK_CELL",An="UPDATE_NOTEBOOK",In=function(e,t,n){return function(a,r){var i=r().serviceApi;if(i.links){var s=r().serviceApi.links.getNotebookUrl(e.id,t.id,n);return a({type:Nn}),V(s)(a).then((function(e){e.status>=200&&e.status<400?B(e).then((function(e){return a({type:Sn,workflow:new $e(i.engine).fromJson(e)})})):401===e.status?a(F()):404===e.status?B(e).then((function(e){return a(Dn(e.message,404))})):B(e).then((function(t){return a(Dn(t.message,e.status))}))})).catch((function(e){return a(Dn(e.message))}))}}},Dn=function(e,t){return Ge(e,t,"Error fetching notebook")},Pn=function(e,t){return e.status===t?B(e):B(e).then((function(e){throw e}))},Rn=function(e,t){return function(n){return V(t.module.links.getSelf())(n).then((function(e){return Pn(e,200)}),(function(e){return n(M(e.message))})).then((function(a){if(a.state!==t.module.state)return V(e.workflow.links.get(Z))(n).then((function(e){return Pn(e,200)}),(function(e){return n(M(e.message))})).then((function(a){return n(qn(e,a,t.id))}),(function(e){return n(Dn(e.message))}))}),(function(a){return n(_n(e,t.module,"module status",a.message))}))}},Tn=function(){return new URLSearchParams(window.location.search).get("cell-output")},_n=function(e,t,n,a){return function(r){var i=new Ie("Error loading "+n,a),s=e.replaceOutput(t.id,new bt(i));return r(qn(s))}},Ln=function(e,t,n){return function(a){var r=!1;if(1===t.outputs.stdout.length&&"chart/view"===t.outputs.stdout[0].type&&(r=t.outputs.stdout[0].value.data.name===n),r){var i=t.outputs.stdout[0].value,s=new jt(i.data.name,i.result);a(qn(e.replaceOutput(t.id,s)))}else{for(var o=null,l=0;l<t.charts.length;l++)if(t.charts[l].name===n){o=t.charts[l];break}if(null!==o){var c=new se(o.links).getSelf();a(K(c,(function(a){var r=new jt(n,a.data),i=e.replaceOutput(t.id,r);return qn(i)}),(function(n){return _n(e,t,"chart",n)}),(function(){return function(e,t){return function(n){return n(qn(e.setFetching(t.id)))}}(e,t)})))}}}},Mn=function(e,t,n,a,r){return function(i){var s=n.links.getDatasetUrl(a,r);return i(K(s,(function(a){return qn(e.replaceOutput(t.id,new mt(new Ze(a.id,n.name,n.activeCell).fromJson(a))))}),(function(a){return _n(e,t,"dataset "+n.name,a)})))}},Fn=function(e,t){return function(n){var a=function(e){var t=e.outputs.stdout,n=null;if(1===t.length){var a=t[0];n="text/html"===a.type?new vt(t):"text/markdown"===a.type?new Ot(t):"chart/view"===a.type?new jt(a.value.data.name,a.value.result):"dataset/view"===a.type?new mt(new Ze(a.value.id,a.value.name).fromJson(a.value),!1):new gt(t)}else t.length>1&&(n=new xt(t));return null===n&&(n=new gt([])),n}(t);n(qn(e.replaceOutput(t.id,a)))}},Un=function(e,t,n,a){return function(r){return r(Hn(e,t,"POST",n,a))}},Vn=function(e,t,n,a){return function(r){return r(Hn(e,t,"PUT",n,a))}},Bn=function(e,t,n){return function(a){a(Hn(e,t,"POST",{},n))}},Hn=function(e,t,n,a,r){return function(i){return i(Ye()),V(t,{method:n,body:JSON.stringify(a),headers:{Accept:"application/json","Content-Type":"application/json"}})(i).then((function(t){200===t.status?B(t).then((function(t){return i(qn(e,t,r))})):401===t.status?i(F()):B(t).then((function(e){return i(Ke("Error updating notebook",e.message))}))})).catch((function(e){return i(Ke("Error updating notebook",e.message))}))}},zn=function(e,t,n,a,r,i,s,o){return function(l){var c=s.value.file,u=new FormData;return u.append("file",c),function(e,t,n){return function(a){if(window.env.API_BASIC_AUTH){var r=U(a);if(r){var i=t;t&&t.headers?Object.assign(i.headers,r):t?i.headers=r:i={method:"GET",headers:r},n=Object(j.a)(Object(j.a)({},n),{},{headers:i.headers});var s=i.body?i.body:null;return"POST"===i.method?I.a.post(e,s,n):I.a.get(e,n)}return new Promise((function(e,t){t({message:"No saved credentials.  Please enter credentials."})}))}return("POST"===t.method?I.a.post(e,t.body,n):I.a.get(e,n)).then((function(e){return e}))}}(i,{method:"POST",body:u},{onUploadProgress:function(e){o&&o(Math.round(100*e.loaded/e.total))}})(l).then((function(i){i.status>=200&&i.status<400?B(i,!1).then((function(i){return console.log("FILE RESPONSE"),console.log(i),s.value.fileid=i.id,console.log("REQ"),console.log(n),l(a(e,t,n,r))})):401===i.status?l(F()):B(i,!1).then((function(e){return l(Ke("Error updating workflow",e.message))}))})).catch((function(e){var t=e.message;"NetworkError when attempting to fetch resource."===t&&(t="Connection closed by server. The file size may exceed the server's upload limit."),l(Ke("Error updating workflow",t))}))}},qn=function(e,t,n){if(null!=t){var a=new $e(e.workflow.engine).fromJson(t);e=e.updateWorkflow(a,n)}return{type:An,notebook:e}},Jn={activeCell:null,fetchError:null,isFetching:!1,notebook:null,reversed:!1},Kn=function(){function e(t,n,a){Object(m.a)(this,e),this.column=t,this.row=n,this.content=a}return Object(b.a)(e,[{key:"isActive",value:function(e,t){return this.column===e&&this.row===t}}]),e}(),Gn=function(){function e(t,n,a){Object(m.a)(this,e),this.column=-1,this.row=-1}return Object(b.a)(e,[{key:"isActive",value:function(e,t){return!1}}]),e}(),Wn=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"isFetching",value:function(){return!0}},{key:"isError",value:function(){return!1}}]),e}(),Yn=function(){function e(t,n){Object(m.a)(this,e),this.title=t,this.message=n}return Object(b.a)(e,[{key:"isFetching",value:function(){return!1}},{key:"isError",value:function(){return!0}}]),e}(),Qn=function(){function e(t){Object(m.a)(this,e),this.items=t}return Object(b.a)(e,[{key:"isFetching",value:function(){return!1}},{key:"isError",value:function(){return!1}}]),e}(),Zn="SUBMIT_UPDATE_REQUEST",Xn="REQUEST_CAVEATS",$n="SET_ANNOTATIONS",ea="UPDATE_DATASET_ANNOTATIONS",ta=function(e,t){return function(n){var a=e.id,r=e.name,i=e.offset,s=null,o=0;i&&(o=i),s=t||e.links.getDatasetUrl(o,25),n(K(s,(function(e){return function(t){return t(Be(new cn(new Ze(a,r).fromJson(e))))}}),(function(e){return Ke("Error loading spreadsheet",e)}),Ye))}},na=function(e,t){return function(n){var a=null;a=t||e.links.self+"/annotations",n(sa()),n(K(a,(function(t){return function(n){return n(Be(new ln(new Ze(e.id,e.name),new Qn(t))))}}),(function(e){return Ke("Error loading dataset errors",e)}),Ye))}},aa=function(e,t,n,a,r){return function(i){return W(i,t,{reason:n,repair:a,acknowledge:r},(function(t){return function(n){return n(Be(new ln(new Ze(e.id,e.name),new Qn(t.annotations))))}}),(function(e){var t=new Yn("Error loading annotations",e),n=new Kn(-1,"-1",t);return ua(n)}),Ye)}},ra=function(e,t,n,a){return function(r){var i=n;r(ia());var s={method:"POST",body:JSON.stringify(Object(j.a)({},n)),headers:{Accept:"application/json","Content-Type":"application/json"}},o=null;if(a){var l=e.workflow.modules[a].links[0].href;o=V(l,s)}else o=V(e.workflow.links.get(ae),s);return o(r).then((function(n){n.status>=200&&n.status<400?B(n).then((function(n){var s=t,o="__0__";if(a){var l=a,c=n.modules[l].id;o=n.modules[a-1].id,s.moduleId=c,s.moduleIndex=l}if(i.packageId===we&&i.commandId===Ce&&(s.rows.find((function(e){return e.id===i.arguments[2].value})).values[i.arguments[1].value]=i.arguments[3].value),i.packageId===we&&i.commandId===Oe)s.columns.find((function(e){return e.id===i.arguments[1].value})).name=i.arguments[2].value;else if("mimir"===i.packageId&&"comment"===i.commandId){var u=i.arguments[1].value[0][0].value,d=s.columns.findIndex((function(e){return e.name===u}));s.rows.find((function(e){return e.id===i.arguments[1].value[0][2].value})).rowAnnotationFlags[d]=!1}r(qn(e,n,o)),r(Be(new cn(s)))})):401===n.status?r(F()):B(n).then((function(e){return r(Ke("Error updating spreadsheet",e.message))}))})).catch((function(e){return r(Ke("Error updating spreadsheet",e.message))}))}},ia=function(){return{type:Zn}},sa=function(){return{type:Xn}},oa=function(){return ua(new Gn)},la=function(e,t,n){return function(a){var r="?column="+t+"&row="+n,i="";return i=e.links.annotations?e.links.annotations+r:e.links.links[3].href+r,a(t<0?oa():K(i,(function(e){var a=new Qn(e),r=new Kn(t,n,a);return ua(r)}),(function(e){var a=new Yn("Error loading annotations",e),r=new Kn(t,n,a);return ua(r)}),(function(){return ua(new Kn(t,n,new Wn))})))}},ca=function(e,t,n,a,r,i){return e(W(t,n,(function(t){var n=new Qn(t.annotations),s=new Kn(r,i,n),o=t.annotations.length>0;return e({type:ea,dataset:a.updateAnnotations(r,i,o)}),ua(s)}),(function(e){var t=new Yn("Error loading annotations",e),n=new Kn(r,i,t);return ua(n)}),(function(){return ua(new Kn(r,i,new Wn))})))},ua=function(e){return{type:$n,annotations:e}},da={fetchError:null,isFetching:!1,workflows:null},ha={activeCell:null,fetchError:null,isFetching:!1,notebook:null,reversed:!1},pa="CLEAR_PROJECT_ACTION_ERROR",ja="REQUEST_PROJECTS",ma="RECEIVE_PROJECTS",ba="SET_PROJECT_CREATE_ERROR",fa="SET_PROJECT_DELETE_ERROR",va="SET_PROJECTS_FETCH_ERROR",Oa=function(e,t,n){return function(a){var r=t.trim();""===r&&(r="New Project"),a(Na("Create Project ..."));var i={properties:[]};""!==t.trim()&&i.properties.push({key:"name",value:r}),a(q(e,i,(function(e){return a(xa()),n.push(Wt(e.id,e.defaultBranch)),{type:x}}),wa))}},ga=function(e){return function(t){t(J(e.links.get("project.delete"),xa,ka,(function(){return Na("Delete Project ...")})))}},xa=function(){return function(e,t){if(t().serviceApi.links){var n=t().serviceApi.links.get(te);return e(Na()),V(n)(e).then((function(t){t.status>=200&&t.status<400?B(t).then((function(t){return e(Ea(t))})):401===t.status?e(F()):B(t).then((function(t){return e(Sa(t.message))}))})).catch((function(t){return e(Sa(t.message))}))}}},Ca=function(e,t,n){return function(a){var r=t,i=new FormData;return i.append("file",r),V(e,{method:"POST",body:i})(a).then((function(e){e.status>=200&&e.status<400?B(e).then((function(e){console.log("FILE RESPONSE"),console.log(e);var t=e.defaultBranch;return t||(t=e.branches[0].id),n.push(Wt(e.id,t)),{type:x}})):401===e.status?a(F()):B(e).then((function(e){return a(ya("Error updating workflow",e.message))}))})).catch((function(e){var t=e.message;"NetworkError when attempting to fetch resource."===t&&(t="Connection closed by server. The file size may exceed the server's upload limit."),a(ya("Error updating workflow",t))}))}},wa=function(e){return{type:ba,error:e}},ka=function(e){return{type:fa,error:e}},ya=function(e){return{type:"SET_PROJECTS_UPLOAD_ERROR",error:e}},Sa=function(e){return{type:va,error:e}},Na=function(e){return{type:ja,message:e}},Ea=function(e){for(var t=[],n=0;n<e.projects.length;n++)t.push((new Ee).fromJson(e.projects[n]));return le(t),{type:ma,projects:t,links:new se(e.links)}},Aa="Loading Projects ...",Ia={actionError:null,fetchError:null,fetchMessage:Aa,isFetching:!1,projects:null,links:null},Da={actionError:null,branch:null,fetchError:null,isActive:!1,isFetching:!1,project:null,resource:null},Pa="bool",Ra="code",Ta="colid",_a="dataset",La="decimal",Ma="fileid",Fa="int",Ua="list",Va="record",Ba="rowid",Ha="string",za=function(){function e(t){Object(m.a)(this,e),this.packageId=t}return Object(b.a)(e,[{key:"fromJson",value:function(e){return this.id=e.id,this.name=e.name,this.description=e.description,this.suggest=e.suggest,e.parameters.sort((function(e,t){return e.index-t.index})),this.parameters=Ga(e.parameters),this.codeParameter=this.parameters.find((function(e){return e.datatype===Ra})),this.fileParameter=this.parameters.find((function(e){return e.datatype===Ma})),this}}]),e}(),qa=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.id=e.id,this.name=e.name,this.category=e.category,this.elements=[],this.commands={};for(var t=0;t<e.commands.length;t++){var n=new za(e.id).fromJson(e.commands[t]);this.commands[n.id]=n,this.elements.push(n)}return le(this.elements),this}},{key:"toList",value:function(){return this.elements}}]),e}(),Ja=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,[{key:"fromJson",value:function(e){this.elements=[],this.packages={};for(var t=0;t<e.length;t++){var n=(new qa).fromJson(e[t]);this.packages[n.id]=n,this.elements.push(n)}return le(this.elements),this}},{key:"getCommandSpec",value:function(e,t){return e&&t?this.packages[e].commands[t]:{name:"Create"}}},{key:"toList",value:function(){return this.elements}}]),e}(),Ka=function e(t,n,a){for(var r={data:[],errors:[]},i=0;i<n.length;i++){var s=n[i],o=t[s.id];if(s.datatype===Va)if(null!=o){var l=e(o,s.parameters);r.data.push({id:s.id,value:l.data}),l.errors.forEach((function(e){return r.errors.push(e)}))}else s.required&&r.errors.push("Missing value for "+s.name);else if(s.datatype===Ua)if(null!=o&&o.length>0){for(var c=[],u=0;u<o.length;u++){var d=e(o[u],s.parameters);c.push(d.data),d.errors.forEach((function(e){return r.errors.push(e)}))}r.data.push({id:s.id,value:c})}else s.required&&r.errors.push("Missing value for "+s.name);else{var h=s.datatype;h===Fa?o=parseInt(o,10):h===La&&(o=parseFloat(o)),Qa(o,s,r.errors,a),r.data.push({id:s.id,value:o})}}return r},Ga=function e(t,n){for(var a=[],r=0;r<t.length;r++){var i=t[r];(i.parent===n||null==i.parent&&null==n)&&(i.datatype!==Va&&i.datatype!==Ua||(i.parameters=e(t,i.id)),a.push(i))}return a},Wa=function e(t,n){for(var a=0;a<n.length;a++){var r=n[a];if(r.datatype===Ta)t[r.id]=null;else if(r.datatype===Va)e(t[r.id],r.parameters);else if(r.datatype===Ua)for(var i=t[r.id],s=0;s<i.length;s++)e(i[s],r.parameters)}},Ya=function e(t,n,a){for(var r={},i=function(i){var s=t[i],o=null!=a?a.find((function(e){return e.id===s.id})):null,l=null;if(s.datatype===Va){var c=null!=o?o.value:[];l=e(s.parameters,n,c)}else if(s.datatype===Ua){if(l=[],null!=o)for(var u=0;u<o.value.length;u++)l.push(e(s.parameters,n,o.value[u]))}else if(null!=o)l=o.value;else if(null!=s.values){if(l=s.values[0].value,!0!==s.values[0].isDefault)for(var d=1;d<s.values.length;d++){var h=s.values[d];if(!0===h.isDefault){l=h.value;break}}}else null!=s.defaultValue?l=s.defaultValue:s.datatype===Pa?l=!1:s.datatype===_a?l=n.length>0?n[0].name:"":s.datatype===Ma&&(l={fileid:null,filename:null,url:null});r[s.id]=l},s=0;s<t.length;s++)i(s);return r},Qa=function(e,t,n,a){var r=t.name;if(null===e&&t.required)n.push("Missing value for "+r);else if(null!==e&&t.datatype===Ma){var i=e.file,s=e.fileid,o=e.filename,l=e.url;null!=i&&null!=o?i.size>a.maxFileSize&&n.push("Filesize exceeds maximum limit: "+qt(a.maxFileSize,2)):null!=s&&null!=o||null!=l||n.push("No file selected for "+r)}else if(null!=e)if(""===e&&t.required)n.push("Missing value for "+r);else{var c=t.datatype;c===Fa||c===Ba?isNaN(e)&&n.push("Expected integer value for "+r):c===La&&isNaN(e)&&n.push("Expected decimal value for "+r)}},Za={error:null,engine:null,isFetchig:!0,links:null,name:null,properties:null,refetch:!1},Xa={annotations:new Gn,dataset:null,isUpdating:!1},$a=Object(l.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.addCommandToHiddenList(t.command)});case O:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.copyCell(t.cell)});case g:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.toggleHideCells()});case C:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.removeCommandFromHiddenList(t.command)});case w:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.reverseOrder()});case k:return Object(j.a)(Object(j.a)({},e),{},{userSettings:e.userSettings.setFilter(t.filter)});default:return e}},branchPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case dn:return Object(j.a)(Object(j.a)({},e),{},{workflows:t.workflows,isFetching:!1,fetchError:null});case Pe:return Object(j.a)(Object(j.a)({},e),{},{workflows:null});case Re:case hn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});default:return e}},mainPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(j.a)(Object(j.a)({},e),{},{homePageContent:t.welcome});default:return e}},notebookPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case Sn:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,isFetching:!1,fetchError:null,notebook:new Cn(t.workflow).fromWorkflow(t.workflow)});case Pe:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,notebook:null});case Re:case Nn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case En:return Object(j.a)(Object(j.a)({},e),{},{activeCell:t.cellId});case An:return Object(j.a)(Object(j.a)({},e),{},{notebook:t.notebook});default:return e}},spreadsheetPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case Sn:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,isFetching:!1,fetchError:null,notebook:new Cn(t.workflow).fromWorkflow(t.workflow)});case Pe:return Object(j.a)(Object(j.a)({},e),{},{activeCell:null,notebook:null});case Re:case Nn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case En:return Object(j.a)(Object(j.a)({},e),{},{activeCell:t.cellId});case An:return Object(j.a)(Object(j.a)({},e),{},{notebook:t.notebook});default:return e}},datasetErrorsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error});case Pe:return Object(j.a)(Object(j.a)({},e),{},{workflows:null});case Re:case Xn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case _e:switch(t.resource.type){case tn:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,resource:t.resource});case it:return Object(j.a)(Object(j.a)({},e),{},{dataset:t.resource});default:return e}default:return e}},projectListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pa:return Object(j.a)(Object(j.a)({},e),{},{actionError:null});case ja:var n=Aa;return null!=t.message&&(n=t.message),Object(j.a)(Object(j.a)({},e),{},{isFetching:!0,fetchMessage:n});case ma:return Object(j.a)(Object(j.a)({},e),{},{fetchError:null,isFetching:!1,projects:t.projects,links:t.links});case ba:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,actionError:new Ie("Error creating project",t.error)});case fa:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,actionError:new Ie("Error deleting project",t.error)});case va:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,fetchError:t.error,projects:[]});default:return e}},projectPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case Le:return Object(j.a)(Object(j.a)({},e),{},{isActive:!0});case De:return Object(j.a)(Object(j.a)({},e),{},{branch:null,fetchError:t.error,isFetching:!1,project:null});case Te:return Object(j.a)(Object(j.a)({},e),{},{isActive:!1,isFetching:!1,actionError:t.error});case Pe:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,branch:t.branch,fetchError:null,isActive:!1,isFetching:!1,project:t.project,resource:null,workflow:t.workflow});case _e:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource});case un:return Object(j.a)(Object(j.a)({},e),{},{branch:t.branch,isActive:!1,project:t.project});case An:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1});case Me:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,project:t.project});case Fe:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource});case Ue:return Object(j.a)(Object(j.a)({},e),{},{actionError:null,isActive:!1,resource:t.resource,workflow:t.workflow});default:return e}},serviceApi:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!0});case P:return Object(j.a)(Object(j.a)({},e),{},{engine:{backend:t.environment.backend,name:t.environment.name,packages:(new Ja).fromJson(t.environment.packages),serviceProperties:t.properties},error:null,isFetching:!1,links:new se(t.links),name:t.name,properties:t.properties,refetch:!1});case R:return Object(j.a)(Object(j.a)({},e),{},{isFetching:!1,error:t.error});case T:return Object(j.a)(Object(j.a)({},e),{},{showModal:L});case _:return Object(j.a)(Object(j.a)({},e),{},{showModal:null,isFetching:!1,error:null,refetch:!0});default:return e}},spreadsheet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:case Ue:var n=t.resource;return null!=n&&n.isDataset()?Object(j.a)(Object(j.a)({},e),{},{dataset:n.content,annotations:new Gn,isUpdating:!1}):e;case Te:return Object(j.a)(Object(j.a)({},e),{},{isUpdating:!1});case $n:return Object(j.a)(Object(j.a)({},e),{},{annotations:t.annotations});case Zn:return Object(j.a)(Object(j.a)({},e),{},{isUpdating:!0});case ea:return Object(j.a)(Object(j.a)({},e),{},{dataset:t.dataset});default:return e}},router:u.c}),er=n(1406),tr=n(1409),nr=n(1395),ar=n(1393),rr=n(519),ir=n.n(rr),sr=n(1368),or=n(1388),lr=(n(35),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.text,r="spinner-padding-ms",i="massive";return"medium"===t?(r="spinner-padding-lg",i="medium"):"small"===t&&(r="spinner-padding-md",i="small"),Object(a.jsx)("div",{className:r,children:Object(a.jsx)(or.a,{inline:!0,active:!0,size:i,children:n})})}}]),n}(i.a.Component)),cr=(n(420),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.interval,n=e.onFetch,a=e.resource;this.timer=setInterval((function(){return n(a)}),t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.text;return Object(a.jsxs)("div",{children:[Object(a.jsx)(lr,{text:n,size:"small"}),Object(a.jsx)("div",{className:"centered",children:Object(a.jsx)(sr.a,{content:"Cancel",negative:!0,title:"Cancel active task",onClick:t})})]})}}]),n}(i.a.Component)),ur=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.links,r=n.getSelf();return Object(a.jsx)("div",{className:"connection-info",children:Object(a.jsxs)("pre",{className:"connection-info",children:["Connected to ",t," @ ",Object(a.jsx)("a",{className:"connection-link",target:"_blank",href:r,children:r}),Object(a.jsx)("span",{className:"docu-icon",children:Object(a.jsx)("a",{href:n.get("api.doc"),className:"docu-icon",target:"_blank",children:Object(a.jsx)("i",{className:"fa fa-book"})})})]})})}}]),n}(i.a.Component),dr=n(1404),hr=function(e){var t=e.title,n=e.message,r=e.onDismiss;return Object(a.jsx)(dr.a,{negative:!0,icon:"warning sign",header:t,onDismiss:r,content:n.charAt(0).toUpperCase()+n.slice(1)})},pr=function(e){var t=e.title,n=e.errors,r=e.onDismiss;return Object(a.jsx)(dr.a,{negative:!0,icon:"warning sign",header:t,list:n,onDismiss:r})},jr=function(e){var t=e.error;return t.is404()?Object(a.jsx)("div",{className:"not-found",children:Object(a.jsx)(mr,{message:t.message})}):Object(a.jsx)(hr,{title:t.title,message:t.message})},mr=function(e){var t=e.message;return Object(a.jsx)(dr.a,{floating:!0,icon:"frown",header:"Ooops ... 404",size:"massive",content:null!=t?t.charAt(0).toUpperCase()+t.slice(1):"Unknown Error"})},br=n(98),fr=n(1398),vr=n(1389),Or=(n(126),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onKeyDown,r=e.onChange;return Object(a.jsx)(vr.a,{autoFocus:!0,className:"resource-name-input",value:t,onChange:r,onKeyDown:n})}}]),n}(i.a.Component)),gr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({value:""}),e()},a.handleChange=function(e){var t=e.target.value;a.setState({value:t})},a.handleKeyDown=function(e){var t=a.props.onCancel;13===e.keyCode?a.handleSubmit():27===e.keyCode&&t()},a.handleSubmit=function(e){var t=a.props,n=t.isValid,r=t.onSubmit,i=a.state.value;!i&&a.props.value&&(i=a.props.value),(null==n||n(i))&&r(i)};var r=e.value;return null==r&&(r=""),a.state={value:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isValid,n=e.prompt,r=e.open,i=e.title,s=e.inputComponent,o=this.state.value,l=null;!o&&this.props.value&&(o=this.props.value),null!=n&&(l=Object(a.jsx)("p",{children:n}));var c=!0;null!=t&&(c=t(o));var u="TextInput",d={};if(s)u=s.type,d=Object.assign(d,s.props),delete this.props.inputComponent;else{var h=Object(a.jsx)(Or,{id:"EditResourceNameModal",value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown});u=h.type,d=Object.assign(d,h.props)}return Object(a.jsxs)(fr.a,{open:r,size:"small",children:[Object(a.jsx)(fr.a.Header,{children:i}),Object(a.jsx)(fr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[l,Object(a.jsx)(u,Object(j.a)({},d))]})}),Object(a.jsxs)(fr.a.Actions,{children:[Object(a.jsx)(sr.a,{onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(sr.a,{primary:!0,icon:"checkmark",labelPosition:"right",content:"Submit",disabled:!c,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),xr=n(343),Cr=n.n(xr),wr=(n(821),n(822),n(1392)),kr=function(e){var t=e.name,n=e.onClick,r=e.title;return Object(a.jsx)(Cr.a,{className:"icon-button",name:t,onClick:n,title:r})},yr=function(e){var t=e.name,n=e.onClick;return Object(a.jsx)(Cr.a,{className:"close-button",name:t,onClick:n})},Sr=function(e){var t=e.message,n=e.icon,r=e.css,i=e.onClick,s=e.title,o=e.caption,l=e.captionIcon,c=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"lg-message",children:t}),Object(a.jsx)("p",{className:"lg-button",children:Object(a.jsx)(kr,{name:n+" fa-4x",title:s,onClick:i})})]}),u=null!==o?Object(a.jsxs)("div",{children:[Object(a.jsx)(wr.a,{horizontal:!0,children:Object(a.jsx)("p",{className:"lg-button",children:Object(a.jsx)(br.a,{size:"big",name:l,style:{margin:0}})})}),Object(a.jsx)("p",{className:"lg-message",children:o})]}):null;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:r,children:c}),u]})},Nr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.css,n=e.text,r=e.title,i=e.onClick,s=null;return s=null!=t?t:"icon-button",Object(a.jsx)("a",{className:s,title:r,onClick:i,children:n})}}]),n}(i.a.Component),Er=n(1400),Ar=n(1408),Ir=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(){var t=e.props;(0,t.onSubmit)(t.value)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.prompt,n=e.open,r=e.onCancel,i=e.title;return Object(a.jsxs)(fr.a,{open:n,basic:!0,size:"small",children:[Object(a.jsx)(Ar.a,{icon:"trash",content:i}),Object(a.jsx)(fr.a.Content,{children:t}),Object(a.jsxs)(fr.a.Actions,{children:[Object(a.jsxs)(sr.a,{basic:!0,color:"red",inverted:!0,onClick:r,children:[Object(a.jsx)(br.a,{name:"remove"})," No"]}),Object(a.jsxs)(sr.a,{color:"green",inverted:!0,onClick:this.handleSubmit,children:[Object(a.jsx)(br.a,{name:"checkmark"})," Yes"]})]})]})}}]),n}(i.a.Component);Ir.defaultProps={open:!1};var Dr=Ir,Pr=n(527),Rr=n(13),Tr=n(1405),_r=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).addTitleFieldToProjects=function(e){if(null!==e&&e.length>0){for(var t=Object(Rr.a)(e),n=0;n<t.length;n++)t[n].title=t[n].name;return t}return[]},a.handleSearchChange=function(e,t){var n=t.value;a.setState({isLoading:!0,value:n}),setTimeout((function(){if(a.state.value.length<1)return a.setState(a.initialState),a.props.filterProjectListing(a.projects,n);var e=new RegExp(at.a.escapeRegExp(a.state.value),"i");a.setState({isLoading:!1,results:at.a.filter(a.projects,(function(t){return e.test(t.title)}))},(function(){return a.props.filterProjectListing(a.state.results)}))}),300)},a.initialState={isLoading:!1,results:[],value:""},a.state=a.initialState,a.projects=a.addTitleFieldToProjects(a.props.projects),a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.value,r=e.results;return Object(a.jsx)("div",{align:this.props.aligned,children:Object(a.jsx)(Tr.a,{aligned:this.props.aligned,loading:t,onSearchChange:this.handleSearchChange,results:r,value:n,open:!1})})}}]),n}(i.a.Component);_r.defaultProps={aligned:"right"};var Lr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).clearActionError=function(){(0,a.props.dispatch)({type:pa})},a.confirmDeleteProject=function(e){(0,a.props.dispatch)(ga(e)),a.hideModal()},a.handleShowProjectPage=function(e){a.props.history.push(Wt(e.id,e.defaultBranch))},a.hideModal=function(){a.setState({deleteProject:null})},a.filterProjectListing=function(e){a.setState({filteredProjects:e})},a.showDeleteProjectModal=function(e){a.setState({deleteProject:e})},a.state={deleteProject:null,filteredProjects:a.props.projects},(0,a.props.dispatch)(xa()),a}return Object(b.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.projects;this.setState({filteredProjects:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.fetchError,i=t.fetchMessage,s=t.isFetching,o=t.projects,l=null;if(s)l=Object(a.jsx)(lr,{text:i});else if(r)l=Object(a.jsx)(hr,{title:"Error while loading project list",message:r});else if(null!=o){for(var c=Object(a.jsxs)(Er.a.Row,{children:[Object(a.jsx)(Er.a.HeaderCell,{className:"resource",children:"Project"}),Object(a.jsx)(Er.a.HeaderCell,{className:"resource",children:"Created"}),Object(a.jsx)(Er.a.HeaderCell,{className:"resource",children:"Last modified"}),Object(a.jsx)(Er.a.HeaderCell,{className:"resource"})]}),u=this.state.filteredProjects,d=[],h=function(t){var n=u[t];d.push(Object(a.jsxs)(Er.a.Row,{children:[Object(a.jsx)(Er.a.Cell,{className:"resource",children:Object(a.jsx)("a",{className:"resource-link",onClick:function(){return e.handleShowProjectPage(n)},children:n.name})}),Object(a.jsx)(Er.a.Cell,{className:"resource-text",children:n.createdAt}),Object(a.jsx)(Er.a.Cell,{className:"resource-text",children:n.lastModifiedAt}),Object(a.jsx)(Er.a.Cell,{className:"resource-buttons",children:Object(a.jsx)("span",{className:"button-wrapper",children:Object(a.jsx)(br.a,{name:"trash",link:!0,onClick:function(){return e.showDeleteProjectModal(n)}})})})]},n.id))},p=0;p<u.length;p++)h(p);var j=Object(a.jsx)(Er.a.Row,{children:Object(a.jsx)(Er.a.Cell,{className:"resource-text",children:"No Results Found!"})});u.length<1&&d.push(j);var m=this.state.deleteProject,b=null;m&&(b=Object(a.jsx)(Dr,{open:!0,prompt:"Do you really want to delete "+m.name+"?",title:"Delete Project",value:m,onCancel:this.hideModal,onSubmit:this.confirmDeleteProject}));var f=null;n&&(f=Object(a.jsx)(hr,{title:n.title,message:n.message,onDismiss:this.clearActionError}));var v=Object(a.jsx)(_r,{projects:o,filterProjectListing:this.filterProjectListing});l=Object(a.jsxs)("div",{children:[f,v,Object(a.jsxs)(Er.a,{singleLine:!0,children:[Object(a.jsx)(Er.a.Header,{children:c}),Object(a.jsx)(Er.a.Body,{children:d})]}),b]})}return l}}]),n}(r.Component),Mr=Object(Pr.a)(Object(c.b)((function(e){return{actionError:e.projectListing.actionError,fetchError:e.projectListing.fetchError,fetchMessage:e.projectListing.fetchMessage,isFetching:e.projectListing.isFetching,projects:e.projectListing.projects,links:e.projectListing.links}}))(Lr)),Fr=n(564),Ur=function(e){return function(t){t(K(e.links.self,(function(n){return t((a=new on(e.name,n),{type:Fe,resource:a}));var a}),(function(e){return Ke("Error loading dataset chart view",e)}),Ye))}},Vr=n(561),Br=n(563),Hr=n(1401),zr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCreateBranch=function(){e.props.onCreateBranch()},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branches,n=e.isMostRecent,r=e.onCreateBranch,i=e.onDelete,s=e.onEdit,o=e.onGetMostRecent,l=e.onSelect,c=e.onShowHistory,u=e.resource,d=e.selectedBranch,h=[];if(t.length>1){h.push(Object(a.jsx)(Hr.a.Divider,{},"divider")),h.push(Object(a.jsx)(Hr.a.Header,{content:"Switch Branch"},"header"));for(var p=function(e){var n=t[e],r=void 0;r=n.id===d.id?"checkmark box":"square outline",h.push(Object(a.jsx)(Hr.a.Item,{icon:r,active:n.id===d.id,text:n.name,value:n.id,onClick:function(){return l(n)}},n.id))},j=0;j<t.length;j++)p(j)}return null!=r&&(h.push(Object(a.jsx)(Hr.a.Divider,{},"divider-new")),h.push(Object(a.jsx)(Hr.a.Item,{icon:"plus",text:"New Branch ...",onClick:this.handleCreateBranch},"createBranch"))),h.push(Object(a.jsx)(Hr.a.Divider,{},"divider-tm")),h.push(Object(a.jsx)(Hr.a.Header,{content:"Time Machine"},"header-tm")),h.push(Object(a.jsx)(Hr.a.Item,{icon:"history",disabled:u.isBranch(),text:"History",onClick:c},"history")),h.push(Object(a.jsx)(Hr.a.Item,{icon:"play",disabled:!u.isBranch()&&n,text:"Latest Version",onClick:o},"mostRecent")),Object(a.jsx)(Hr.a,{item:!0,text:"Branches",children:Object(a.jsxs)(Hr.a.Menu,{children:[Object(a.jsx)(Hr.a.Header,{icon:"fork",content:d.name},"onBranch"),Object(a.jsx)(Hr.a.Item,{icon:"edit",text:"Rename",onClick:s},"edit"),Object(a.jsx)(Hr.a.Item,{icon:"trash",disabled:d.isDefault,text:"Delete",onClick:i},"delete"),h]})})}}]),n}(i.a.Component),qr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.charts,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.charts,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isChart(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(Vr.a.Item,{icon:"bar chart",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isChart()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Hr.a.Item,{icon:"bar chart",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Hr.a,{item:!0,text:"Chart",disabled:!o,children:Object(a.jsx)(Hr.a.Menu,{children:l})})}}]),n}(i.a.Component),Jr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.datasets,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isDataset(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(Vr.a.Item,{icon:"table",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isDataset()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Hr.a.Item,{icon:"table",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Hr.a,{item:!0,text:"Dataset",disabled:!o,children:Object(a.jsx)(Hr.a.Menu,{children:l})})}}]),n}(i.a.Component),Kr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){for(var a=n.value,r=e.props,i=r.datasets,s=r.onSelect,o=0;o<i.length;o++){var l=i[o];if(l.name===a){s(l);break}}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.resource;if(0===t.length)return null;if(1===t.length){var r=t[0],i=n.isDatasetCaveat(),s=null;return i||(s=this.handleSelect),Object(a.jsx)(Vr.a.Item,{icon:"warning sign",name:r.name,value:r.name,disabled:i,onClick:s},r.name)}for(var o=!1,l=[],c=0;c<t.length;c++){var u=t[c],d=!1;n.isDatasetCaveat()&&(d=n.content.name===u.name),d||(o=!0),l.push(Object(a.jsx)(Hr.a.Item,{icon:"warning sign",text:u.name,value:u.name,disabled:d,onClick:this.handleSelect},u.name))}return Object(a.jsx)(Hr.a,{item:!0,text:"Caveats",disabled:!o,children:Object(a.jsx)(Hr.a.Menu,{children:l})})}}]),n}(i.a.Component),Gr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleExportProject=function(e){return function(){window.open(e.links.getSelf()+"/export")}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onCreate,n=e.onImport,r=e.onDelete,i=e.onEdit,s=e.project,o=[];return null!=s&&(o.push(Object(a.jsx)(Hr.a.Header,{icon:"database",content:s.name},"header1")),o.push(Object(a.jsx)(Hr.a.Item,{icon:"edit",text:"Rename",title:"Edit project name",onClick:i},"edit")),o.push(Object(a.jsx)(Hr.a.Item,{icon:"trash",text:"Delete",title:"Delete the current project",onClick:r},"delete"))),o.length>0&&o.push(Object(a.jsx)(Hr.a.Divider,{},"div2")),o.push(Object(a.jsx)(Hr.a.Item,{icon:"plus",text:"New Project ...",title:"Create a new project",onClick:t},"create")),o.push(Object(a.jsx)(Hr.a.Item,{icon:"plus",text:"Import Project ...",title:"Import a project from a export file",onClick:n},"import")),null!=s&&o.push(Object(a.jsx)(Hr.a.Item,{disabled:null==s,icon:"database",text:"Export Project",title:"Export current project",onClick:this.handleExportProject(s)},"export")),Object(a.jsx)(Hr.a,{item:!0,text:"Projects",children:Object(a.jsx)(Hr.a.Menu,{children:o})})}}]),n}(i.a.Component),Wr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({file:null}),e()},a.onChange=function(e){a.setState({file:e.target.files[0]})},a.handleSubmit=function(e){var t=a.props.onSubmit,n=a.state.file;null!=n&&t(n)},a.state={file:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.prompt,n=e.open,r=e.title,i=this.state.file,s=null;null!=t&&(s=Object(a.jsx)("p",{children:t}));var o=null!=i;return Object(a.jsxs)(fr.a,{open:n,size:"small",children:[Object(a.jsx)(fr.a.Header,{children:r}),Object(a.jsx)(fr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[s,Object(a.jsx)("input",{type:"file",onChange:this.onChange})]})}),Object(a.jsxs)(fr.a.Actions,{children:[Object(a.jsx)(sr.a,{negative:!0,onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(sr.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Done",disabled:!o,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),Yr=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onHideCells,n=e.onReverse,r=e.onSetFilter,i=e.userSettings;return Object(a.jsx)(Hr.a,{item:!0,text:"Settings",children:Object(a.jsxs)(Hr.a.Menu,{children:[Object(a.jsx)(Hr.a.Header,{content:"Notebook cells in ..."},"head1"),Object(a.jsx)(Hr.a.Item,{disabled:!i.showNotebookReversed(),icon:"sort numeric ascending",text:"Default order",title:"List notebook cells in default order (first cell shown first)",onClick:n},"defaultOrder"),Object(a.jsx)(Hr.a.Item,{disabled:i.showNotebookReversed(),icon:"sort numeric descending",text:"Reverse order",title:"List notebook cells in reverse order (last cell shown first)",onClick:n},"reverseOrder"),Object(a.jsx)(Hr.a.Divider,{},"div1"),Object(a.jsx)(Hr.a.Header,{content:"Filter Modules"},"head2"),Object(a.jsx)(Hr.a.Item,{icon:"remove circle",text:"Remove Filter",title:"Clear module filter to show all notebook cells",onClick:function(){return r()}},"showAll"),Object(a.jsx)(Hr.a.Item,{icon:"th",text:"Filter VizUAL",title:"Filter VizUAL commands by default",onClick:function(){return r(f)}},"defaultFilter"),Object(a.jsx)(Hr.a.Item,{disabled:!0,icon:"filter",text:"Customized Filter",title:"Show form to specify filter for all modules"},"filter"),Object(a.jsx)(Hr.a.Divider,{},"div2"),Object(a.jsx)(Hr.a.Header,{content:"Show Filtered Modules as ..."},"head3"),Object(a.jsx)(Hr.a.Item,{disabled:!i.hideFilteredCommands(),icon:"compress",text:"Collapsed",title:"Collapse cells that contain filtered modules",onClick:t},"collapse"),Object(a.jsx)(Hr.a.Item,{disabled:i.hideFilteredCommands(),icon:"hide",text:"Hidden",title:"Hide cells that contain filtered modules",onClick:t},"hide")]})})}}]),n}(i.a.Component),Qr=(n(147),n.p+"static/media/vizier_tiny.f23e05e5.svg"),Zr="MODAL_CREATE_PROJECT",Xr="MODAL_IMPORT_PROJECT",$r="MODAL_DELETE_BRANCH",ei="MODAL_DELETE_PROJECT",ti="MODAL_EDIT_BRANCH_NAME",ni="MODAL_EDIT_PROJECT_NAME",ai=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleDeleteCurrentBranch=function(e){(0,a.props.onDeleteBranch)(e),a.hideModal()},a.handleDeleteProject=function(){var e=a.props,t=e.onDeleteProject,n=e.project;a.hideModal(),t(n)},a.hideModal=function(){return a.setState({modal:null})},a.showCreateProjecthModal=function(){return a.setState({modal:Zr})},a.showImportProjecthModal=function(){return a.setState({modal:Xr})},a.showDeleteBranchModal=function(){return a.setState({modal:$r})},a.showDeleteProjectModal=function(){return a.setState({modal:ei})},a.showEditBranchNameModal=function(){return a.setState({modal:ti})},a.showEditProjectNameModal=function(){return a.setState({modal:ni})},a.submitUpdateBranchName=function(e){var t=a.props,n=t.onEditBranch,r=t.branch;a.hideModal(),e.trim()!==r.name&&n(e)},a.submitUpdateProjectName=function(e){var t=a.props,n=t.onEditProject,r=t.project;a.hideModal(),e.trim()!==r.name&&n(e)},a.switchToBranchHead=function(){(0,a.props.onShowNotebook)()},a.state={modal:null},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branch,n=e.notebook,r=e.onCreateBranch,i=e.onCreateProject,s=e.onImportProject,o=e.onGoHome,l=e.onHideCells,c=e.onReverse,u=e.onSetFilter,d=e.onShowChart,h=e.onShowDataset,p=e.onShowDatasetCaveat,j=e.onShowHistory,m=e.onShowNotebook,b=e.onShowProject,f=e.onSwitchBranch,v=e.project,O=e.projectList,g=e.resource,x=e.userSettings,C=[];if(g.isMainPage()?C.push(Object(a.jsx)(Vr.a.Item,{header:!0,children:Object(a.jsx)(Br.a,{src:Qr})},"logo")):C.push(Object(a.jsx)(Vr.a.Item,{header:!0,onClick:o,children:Object(a.jsx)(Br.a,{src:Qr})},"logo")),null!=v&&C.push(Object(a.jsx)(Vr.a.Item,{header:!0,children:v.name},"name")),C.push(Object(a.jsx)(Gr,{onCreate:this.showCreateProjecthModal,onImport:this.showImportProjecthModal,onDelete:this.showDeleteProjectModal,onEdit:this.showEditProjectNameModal,onSelect:b,project:v,projectList:O},"project")),null!=g){if(null!=t){var w=!1;null!=n&&(w=n.readOnly),C.push(Object(a.jsx)(zr,{branches:v.branches,isMostRecent:!w,onCreateBranch:r,onDelete:this.showDeleteBranchModal,onEdit:this.showEditBranchNameModal,onGetMostRecent:this.switchToBranchHead,onSelect:f,onShowHistory:j,resource:g,selectedBranch:t},"branches"))}if(!g.isMainPage()&&(C.push(Object(a.jsx)(Vr.a.Item,{icon:"file alternate outline",name:"Notebook",disabled:g.isNotebook(),onClick:m},"notebook")),n)){if(n.workflow.modules.length>0&&Object.keys(n.workflow.datasets).length>0){var k=Array.from(new Map(n.workflow.modules.flatMap((function(e,t){return e.datasets?e.datasets:[]})).map((function(e){return[e.name,e]}))).values());C.push(Object(a.jsx)(Jr,{datasets:k,onSelect:h,resource:g},"datasets")),C.push(Object(a.jsx)(Kr,{datasets:k,onSelect:p,resource:g},"errors"))}n.workflow.charts&&C.push(Object(a.jsx)(qr,{charts:n.workflow.charts,onSelect:d,resource:g},"charts"))}}C.push(Object(a.jsx)(Yr,{onHideCells:l,onReverse:c,onSetFilter:u,userSettings:x},"settings"));var y=Object(a.jsx)(Vr.a,{fixed:"top",children:C}),S=null,N=this.state.modal;return null!==N&&(N===Zr?S=Object(a.jsx)(gr,{isValid:Jt,open:!0,prompt:"Enter a name for the new project",title:"Create project",onCancel:this.hideModal,onSubmit:i}):N===Xr?S=Object(a.jsx)(Wr,{open:!0,prompt:"Select a project export file to import",title:"Import project",onCancel:this.hideModal,onSubmit:s}):N===$r&&null!=t?S=Object(a.jsx)(Dr,{open:!0,onCancel:this.hideModal,onSubmit:this.handleDeleteCurrentBranch,prompt:"Do you really want to delete the branch "+t.name+"?",title:"Delete branch",value:t}):N===ei&&null!=v?S=Object(a.jsx)(Dr,{open:!0,onCancel:this.hideModal,onSubmit:this.handleDeleteProject,prompt:"Do you really want to delete the project "+v.name+"?",title:"Delete project",value:t}):N===ni&&null!=v?S=Object(a.jsx)(gr,{isValid:Jt,open:!0,onCancel:this.hideModal,onSubmit:this.submitUpdateProjectName,title:"Edit project name",value:v.name}):N===ti&&null!=t&&(S=Object(a.jsx)(gr,{isValid:Jt,open:!0,onCancel:this.hideModal,onSubmit:this.submitUpdateBranchName,title:"Edit branch name",value:t.name}))),Object(a.jsxs)("div",{className:"project-menu",children:[y,S]})}}]),n}(i.a.Component),ri=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).dismissResourceError=function(){(0,e.props.dispatch)(Je())},e.handleCreateProject=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.serviceApi.links.get($);a(Oa(i,t,r))},e.handleImportProject=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.serviceApi.links.get(ee);a(Ca(i,t,r))},e.handleDeleteProject=function(t){var n=e.props,a=n.dispatch,r=n.history;a(ga(t)),r.push(kt)},e.handleGoHome=function(){e.props.history.push(kt)},e.handleSetFilter=function(t){e.props.dispatch(y(t))},e.handleShowBranch=function(){var t=e.props,n=t.branch,a=t.history,r=t.project;a.push(Gt(r.id,n.id))},e.handleShowProject=function(t){e.props.history.push(Wt(t.id,t.defaultBranch))},e.handleToggleHideCells=function(){(0,e.props.dispatch)(S())},e.handleToggleNotebookReverse=function(){(0,e.props.dispatch)(N())},e.loadChartView=function(t){(0,e.props.dispatch)(Ur(t))},e.loadDataset=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.notebook,s=n.branch,o=n.project;i.datasets[t.id].name=t.name,a(ta(i.datasets[t.id])),r.push(Yt(o.id,s.id,t.id))},e.loadDatasetCaveat=function(t){var n=e.props,a=n.dispatch,r=n.history,i=n.notebook,s=n.branch,o=n.project,l=i.datasets[t.id].links.getSelf()+"/annotations";i.datasets[t.id].name=t.name,a(na(i.datasets[t.id],l)),r.push(Qt(o.id,s.id,t.id))},e.loadDatasetToError=function(t){return function(n){var a=e.props,r=a.dispatch,i=a.serviceApi.serviceUrl+"/datasets/"+t.id+"?rowid="+n.args[n.rowidarg];r(ta(t,i))}},e.loadDatasetRepair=function(t){return function(n,a,r){var i=e.props,s=i.dispatch,o=i.serviceApi.serviceUrl+"/datasets/"+t.id+"/feedback";s(aa(t,o,n,a,r))}},e.submitEditBranch=function(t){var n=e.props,a=n.dispatch,r=n.project,i=n.branch;a(bn(r,i,t))},e.submitEditProject=function(t){var n=e.props,a=n.dispatch,r=n.project;a(qe(r,t))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.content,i=e.contentCss,s=e.notebook,o=e.onCreateBranch,l=e.onDeleteBranch,c=e.onShowNotebook,u=e.onSwitchBranch,d=e.project,h=e.projectList,p=e.resource,j=e.userSettings;document.title=null!=d?"Vizier DB - "+Zt(d.name,"undefined"):"Vizier DB - Projects";var m=null;null!=t&&(m=Object(a.jsx)(hr,{title:t.title,message:t.message,onDismiss:this.dismissResourceError}));var b=Object(a.jsxs)("div",{children:[Object(a.jsx)(fr.a,{dimmer:!0,open:!1,children:Object(a.jsx)(or.a,{size:"large",active:!0,children:"Update in progress ..."})}),m,r]}),f=null,v="";return Tn()?v="":(v=i,f=Object(a.jsx)(Fr.a,{children:Object(a.jsx)(Fr.a.Row,{children:Object(a.jsx)(Fr.a.Column,{className:"project-menu-bar",children:Object(a.jsx)(ai,{branch:n,notebook:s,onCreateBranch:o,onCreateProject:this.handleCreateProject,onImportProject:this.handleImportProject,onDeleteBranch:l,onDeleteProject:this.handleDeleteProject,onEditBranch:this.submitEditBranch,onEditProject:this.submitEditProject,onGoHome:this.handleGoHome,onHideCells:this.handleToggleHideCells,onReverse:this.handleToggleNotebookReverse,onSetFilter:this.handleSetFilter,onShowChart:this.loadChartView,onShowDataset:this.loadDataset,onShowDatasetCaveat:this.loadDatasetCaveat,onShowHistory:this.handleShowBranch,onShowNotebook:c,onShowProject:this.handleShowProject,onSwitchBranch:u,project:d,projectList:h,resource:p,userSettings:j})})})})),Object(a.jsxs)("div",{children:[f,Object(a.jsx)("div",{className:"page-content "+v,children:b})]})}}]),n}(r.Component),ii=Object(Pr.a)(ri),si=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleCreateProject=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.serviceApi.links.get($);a.hideModal(),n(Oa(i,e,r))},a.handleShowProjectPage=function(e){a.props.history.push(Wt(e.id,e.defaultBranch))},a.hideModal=function(){return a.setState({showModal:!1})},a.showCreateProjectModal=function(){return a.setState({showModal:!0})},a.state={showModal:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.homePageContent,r=e.projects,i=e.serviceApi,s=e.userSettings,o=null,l=null;null!=n?(o=n.headline,l=n.description):o=Object(a.jsxs)("span",{children:["Vizier",Object(a.jsx)("span",{className:"headline-small",children:"Streamlined Data Curation"})]});var c=null;c=null!=r&&0===r.length?Object(a.jsx)("div",{className:"empty-list-message",children:Object(a.jsx)(Sr,{message:"Your project list is empty. Start by creating a new project.",icon:"plus",onClick:this.showCreateProjectModal})}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"project-listing",children:Object(a.jsx)(Mr,{})}),Object(a.jsxs)(sr.a,{icon:!0,labelPosition:"left",size:"tiny",positive:!0,onClick:this.showCreateProjectModal,children:[Object(a.jsx)(br.a,{name:"plus"})," New Project ..."]})]});var u=Object(a.jsxs)("div",{className:"home-content",children:[Object(a.jsx)("h1",{className:"home-headline",children:o}),l,c,Object(a.jsx)(gr,{isValid:Jt,open:this.state.showModal,prompt:"Enter a name for the new project",title:"Create project",onCancel:this.hideModal,onSubmit:this.handleCreateProject})]});return Object(a.jsx)(ii,{content:u,contentCss:"wide",dispatch:t,isActive:!1,projectList:r,resource:new rn,serviceApi:i,userSettings:s})}}]),n}(r.Component),oi=Object(ar.a)(Object(c.b)((function(e){return{homePageContent:e.mainPage.homePageContent,projects:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings}}))(si)),li=(n(452),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleDeleteBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;n(pn(i,e,Gt,r))},a.handleShowWorkflow=function(e,t){var n=a.props,r=n.branch,i=n.history,s=n.project,o=null;t||null==e||(o=e.id),i.push(Wt(s.id,r.id,o))},a.handleSwitchBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;r.push(Gt(i.id,e.id)),n(ze(i,e.id,jn))};var r=a.props,i=r.branch,s=r.dispatch,o=r.project,l=r.projectList,c=r.workflows,u=a.props.match.params.project_id,d=a.props.match.params.branch_id;return s(Ve(u,d,jn)),(null==i||i.id!==d||null==c)&&s(jn(o,o.findBranch(d))),null==l&&s(xa()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=this.props.match.params.project_id,l=this.props.match.params.branch_id;null==i||i.id!==o?r(Ve(o,l,jn)):null!=s&&s.id===l||r(jn(i,i.findBranch(l)))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.branch,i=t.dispatch,s=t.fetchError,o=t.isActive,l=t.isFetching,c=t.project,u=t.projectList,d=t.serviceApi,h=t.userSettings,p=t.workflows,j=null;if(s)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(jr,{error:s})});else if(null==c||null==r||null==p||l)j=Object(a.jsx)(lr,{text:"Loading History ..."});else if(null!=p){for(var m=[],b=function(t){var n=p[t],r=null,i=null,s=null,o="black";n.actionIsCreate()?(r="fork",o="grey",i="Create branch"):(n.actionIsDelete()?(r="trash",o="red",i="Delete cell"):n.actionIsAppend()?(r="add square",o="green",i="Append cell"):n.actionIsInsert()?(r="add circle",o="olive",i="Insert cell"):n.actionIsReplace()&&(r="pencil",o="blue",i="Replace cell"),s=d.engine.packages.getCommandSpec(n.packageId,n.commandId).name);var l=t===p.length-1;m.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"workflow-nr",children:n.id}),Object(a.jsx)("td",{className:"workflow-icon",children:Object(a.jsx)(br.a,{title:"Show notebook",link:!0,name:"eye",onClick:function(){return e.handleShowWorkflow(n,l)}})}),Object(a.jsx)("td",{className:"workflow-icon",children:Object(a.jsx)(br.a,{title:i,name:r,color:o})}),Object(a.jsx)("td",{className:"workflow-command",children:s}),Object(a.jsx)("td",{className:"version-timestamp",children:n.createdAt})]},n.id))},f=0;f<p.length;f++)b(f);var v=Object(a.jsxs)("div",{className:"branch-history",children:[Object(a.jsxs)("h1",{className:"branch-history",children:["Notebooks in Branch ",Object(a.jsx)("span",{className:"branch-highlight",children:r.name})]}),Object(a.jsxs)("p",{className:"info-text",children:["This is a list of all notebook versions in the history of the branch ",r.name,". Click on the\xa0 ",Object(a.jsx)(br.a,{name:"eye"})," to display a notebook."]}),Object(a.jsx)("table",{children:Object(a.jsx)("tbody",{children:m})})]});j=Object(a.jsx)(ii,{actionError:n,branch:r,content:v,contentCss:"slim",dispatch:i,isActive:o,onDeleteBranch:this.handleDeleteBranch,onShowNotebook:this.handleShowWorkflow,onSwitchBranch:this.handleSwitchBranch,project:c,projectList:u,resource:new an,serviceApi:d,userSettings:h})}return j}}]),n}(r.Component)),ci=Object(ar.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,branch:e.projectPage.branch,fetchError:e.branchPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.branchPage.isFetching,project:e.projectPage.project,projectList:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings,workflows:e.branchPage.workflows}}))(li)),ui=n(1402),di=(n(838),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleDelete=function(){var e=a.props,t=e.annotation;(0,e.onDelete)(t,a.state.selectedAnnotation),a.setState({selectedAnnotation:-1})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleClose=function(){var e=a.props.onDiscard;a.setState({key:"user:comment",value:"",selectedAnnotation:-1}),e()},a.handleKeyDown=function(e){13===e.keyCode&&a.handleSubmit()},a.handleSelectAnnotation=function(e,t){var n=t.id;a.state.selectedAnnotation===n?a.setState({selectedAnnotation:-1}):a.setState({selectedAnnotation:n})},a.handleSelectKey=function(e,t){var n=t.value;a.setState({key:n})},a.handleSubmit=function(){var e=a.props,t=e.annotation,n=e.onSubmit,r=a.state,i=r.key,s=r.value;""!==s.trim()&&n(t,i,s),a.setState({value:"",selectedAnnotation:-1})},a.keys=[{key:"user:comment",text:"Comment",value:"user:comment"},{key:"user:issue",text:"Issue",value:"user:issue"}],a.state={key:"user:comment",value:"",selectedAnnotation:-1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.annotation,n=e.onDelete,r=e.onSubmit,i=this.state.selectedAnnotation;if(null!=t.content){var s=null;if(t.content.isFetching())s=Object(a.jsx)(or.a,{active:!0,inline:"centered"});else if(t.content.isError())s=Object(a.jsx)(dr.a,{negative:!0,header:t.content.title,content:t.content.message});else if(t.content.items.length>0){for(var o=[],l=0;l<t.content.items.length;l++){var c=t.content.items[l],u=null,d=null,h=null;"mimir:uncertain"===c.key?(d="warning sign",h="Mimir",u="yellow",c.value=c.message):"user:issue"===c.key?(d="info circle",h="Issue"):(d="comment alternate outline",h="Comment",c.value=c.message);var p="";"mimir:uncertain"!==c.key&&null!=r||(p=" disabled");var j=null;null!=n&&"mimir:uncertain"!==c.key&&c.id===i?(j=Object(a.jsx)(br.a,{name:"trash",size:"large",onClick:this.handleDelete}),p=" delete"):j=Object(a.jsx)(br.a,{name:d,size:"large",color:u}),o.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"list-icon"+p,children:j}),Object(a.jsx)("td",{className:"list-text"+p,children:Object(a.jsx)(ui.a,{relaxed:!0,children:Object(a.jsx)(ui.a.Item,{id:c.id,onClick:this.handleSelectAnnotation,children:Object(a.jsxs)(ui.a.Content,{children:[Object(a.jsx)(ui.a.Header,{children:h}),Object(a.jsx)(ui.a.Description,{children:c.value})]})})})})]},l))}s=Object(a.jsx)("table",{className:"annotations",children:Object(a.jsx)("tbody",{children:o})})}else s=Object(a.jsx)("p",{className:"info-text",children:"There are currently no annotations for this cell"});var m=null;return null!=r&&(m=Object(a.jsx)(fr.a.Actions,{children:Object(a.jsx)(vr.a,{fluid:!0,label:Object(a.jsx)(Hr.a,{defaultValue:"user:comment",options:this.keys,onChange:this.handleSelectKey}),action:Object(a.jsx)(sr.a,{color:"green",icon:"plus",onClick:this.handleSubmit}),placeholder:"Add a new comment...",value:this.state.value,onChange:this.handleChange,onKeyDown:this.handleKeyDown})})),Object(a.jsxs)(fr.a,{open:!0,dimmer:"inverted",size:"small",children:[Object(a.jsx)(fr.a.Header,{children:Object(a.jsx)(Fr.a,{columns:2,children:Object(a.jsxs)(Fr.a.Row,{children:[Object(a.jsx)(Fr.a.Column,{children:"Cell Annotations"}),Object(a.jsx)(Fr.a.Column,{children:Object(a.jsx)("div",{className:"header-button",children:Object(a.jsx)(kr,{name:"close",onClick:this.handleClose})})})]})})}),Object(a.jsx)(fr.a.Content,{children:s}),m]})}return null}}]),n}(i.a.Component)),hi=n(189),pi=(n(839),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={copySuccess:!1},e.copyToClipboard=function(){e.textInput.select(),document.execCommand("copy"),e.setState({copySuccess:!0})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.open,i=t.url,s=t.copySupport;return Object(a.jsxs)(fr.a,{open:r,dimmer:"inverted",size:"small",children:[Object(a.jsx)(fr.a.Header,{children:"Share Link"}),Object(a.jsx)(fr.a.Content,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"share-header",children:"Copy link below to share this notebook version"}),s?Object(a.jsx)(vr.a,{fluid:!0,readOnly:!0,action:{icon:"copy",onClick:function(){return e.copyToClipboard()},content:this.state.copySuccess?"Copied!":"Copy"},value:i,ref:function(t){return e.textInput=t}}):Object(a.jsx)(hi.a,{readOnly:!0,children:Object(a.jsx)("a",{href:i,target:"_blank",children:i})})]})}),Object(a.jsx)(fr.a.Actions,{children:Object(a.jsx)(sr.a,{primary:!0,onClick:n,children:"Done"})})]})}}]),n}(i.a.Component)),ji=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).closeModal=function(){return a.setState({showModal:!1})},a.openModal=function(){return a.setState({showModal:!0})},a.state={showModal:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.branch,n=e.notebook,r=e.onShowHistory,i=e.onSwitchBranch,s=e.project,o=e.copySupport,l=this.state.showModal,c=null;c=n.readOnly?Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"right-padding-sm",children:"at "}),Object(a.jsx)("span",{className:"info-date",children:n.createdAt}),Object(a.jsx)("span",{className:"padding-sm",children:Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(br.a,{name:"play",title:"Latest Version",onClick:function(){return i(t)}})})})]}):Object(a.jsx)("span",{className:"padding-sm",children:Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(br.a,{name:"history",title:"Show history",onClick:r})})});var u=window.env.API_ADV_AUTH,d=window.location.protocol+"//"+window.location.host;return d+=Wt(s.id,t.id,n.id),u&&(d=window.location.protocol+"//"+window.location.host+"/auth/public?workflow-url="+d),Object(a.jsxs)("div",{className:"notebook-header status-header",children:[Object(a.jsx)("span",{children:Object(a.jsx)(br.a,{name:"fork"})}),Object(a.jsx)("span",{children:"On branch "}),Object(a.jsx)("span",{className:"right-padding-sm",children:Object(a.jsx)("span",{className:"info-bold",children:t.name})}),c,Object(a.jsx)("span",{className:"clickable-icon",children:Object(a.jsx)(br.a,{name:"linkify",title:"Get shareable link to this notebook",onClick:this.openModal})}),Object(a.jsx)(pi,{url:d,onClose:this.closeModal,open:l,copySupport:o})]})}}]),n}(r.Component),mi=n(4),bi=n(533),fi=n(1397),vi=n(353),Oi=(n(842),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).groupBy=function(e,t){return e.reduce((function(e,n){return e[n[t]]||(e[n[t]]=[]),e[n[t]].push(n),e}),{})},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.apiEngine,r=t.onDismiss,i=t.onPaste,s=t.onSelect,o=[],l={MIMIR:0,DATA:1,R:2,SAMPLING:1,SCALA:2,SQL:2,MARKDOWN:2,PLOT:2,PYTHON:2,VIZUAL:3},c=n.packages.toList(),u=[[],[],[],[]],d=Object(mi.a)(c);try{for(d.s();!(e=d.n()).done;){var h=e.value;u[h.name.toUpperCase()in l?l[h.name.toUpperCase()]:1].push(h)}}catch(C){d.e(C)}finally{d.f()}for(var p=[],j=0,m=[0,1,2,3];j<m.length;j++){var b=m[j];p=[];var f,v=u[b],O=Object(mi.a)(v);try{var g=function(){var e=f.value,t=e.toList();p.push(Object(a.jsx)(ui.a.Item,{children:Object(a.jsx)(ui.a.Header,{children:e.name.toUpperCase()})},e.id));for(var n=function(n){var r=t[n],i=r.suggest?Object(a.jsx)(ui.a.Item,{onClick:function(){return s(e.id,r.id)},children:Object(a.jsx)(ui.a.Content,{children:Object(a.jsx)(ui.a.Header,{as:"a",className:"suggested-action",icon:!0,children:Object(a.jsxs)(Ar.a.Content,{children:[Object(a.jsx)(br.a,{name:"star",color:"yellow"}),r.name]})})})},p.length):Object(a.jsx)(ui.a.Item,{onClick:function(){return s(e.id,r.id)},children:Object(a.jsx)(ui.a.Content,{children:Object(a.jsx)(ui.a.Header,{as:"a",children:"  "+r.name})})},p.length);p.push(i)},r=0;r<t.length;r++)n(r)};for(O.s();!(f=O.n()).done;)g()}catch(C){O.e(C)}finally{O.f()}o.push(Object(a.jsx)(Fr.a.Column,{className:b,width:4,children:Object(a.jsx)(ui.a,{link:!0,children:p})},o.length))}var x=null;return x=null!=i?Object(a.jsxs)("div",{children:["Select a module from the list below or paste ",Object(a.jsx)(br.a,{name:"paste",link:!0,onClick:i,title:"Paste from clipboard"}),"from clipboard."]}):"Select a module from the list below.",Object(a.jsx)("div",{className:"commands-listing",children:Object(a.jsxs)(vi.a,{children:[Object(a.jsxs)("div",{className:"commands-listing-header",children:[x,Object(a.jsx)("span",{className:"pull-right clickable-icon",children:Object(a.jsx)(br.a,{name:"close",link:!0,onClick:r})})]}),Object(a.jsx)(Fr.a,{columns:c.length,divided:!0,children:Object(a.jsx)(Fr.a.Row,{children:o})})]})})}}]),n}(i.a.Component)),gi=n(83),xi=(n(178),n(453),n(454),n(455),n(843),n(75),n(844),n(536)),Ci=n.n(xi),wi=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n,a){var r=e.props,i=r.id,s=r.onChange,o=t.getCursor();if(a.to&&a.from&&a.origin)if("+input"===a.origin||"paste"===a.origin){var l=a.text,c=l.length-1,u=l[c].length,d=a.from.line+c,h=u;1===l.length&&(h=a.from.ch+u),o={line:d,ch:h}}else"+delete"===a.origin&&(o={line:a.from.line,ch:a.from.ch});s(i,n,o)},e.handleCursorActivity=function(t,n){var a=t.getCursor();e.props.onCursor(a)},e.tabReplace=function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)},e.onClickInactiveCodeCell=function(t){var n=e.props,a=n.onFocus,r=n.onCursor,i=document.getElementById("empxCalc");i.style.height="1em";var s=1.4285*i.offsetHeight,o=i.offsetHeight/1.6585,l=t.nativeEvent.layerY,c=t.nativeEvent.layerX,u=l/s,d=.03448*u,h={line:Math.round(u+d),ch:Math.round(c/o)-1,sticky:"before",xRel:0};a(),r(h)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.cursorPosition,r=t.isActiveCell,i=t.language,s=t.onFocus,o=t.readOnly,l=t.value,c=t.locked,u=null;"python"===i?u="python":"scala"===i?u="text/x-scala":"r"===i?u="text/x-rsrc":"sql"===i?u="text/x-sql":"markdown"===i&&(u="markdown");var d=null;return r?d=c?Object(a.jsx)("div",{className:"editor-container",children:"Code Cell"}):Object(a.jsx)("div",{className:"editor-container",children:Object(a.jsx)(gi.Controlled,{value:l,cursor:n,options:{autofocus:r,lineNumbers:!0,mode:u,indentUnit:4,readOnly:!r||o,dragDrop:!1,extraKeys:{Tab:this.tabReplace}},onBeforeChange:function(t,n,a){e.handleChange(t,a,n)},onCursor:function(t,n){e.handleCursorActivity(t,n)},onFocus:s})}):c?d=Object(a.jsx)("div",{className:"editor-container",children:"Code Cell"}):"markdown"!==i&&(d=Object(a.jsx)("div",{className:"editor-container",onClick:this.onClickInactiveCodeCell,children:Object(a.jsx)(Ci.a,{className:i,children:l})})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{id:"empxCalc",className:"empxCalc"}),d]})}}]),n}(i.a.Component),ki=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.value,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.value,r=null;return r=null==n?"":n.toString(),Object(a.jsx)(fi.a.Input,{placeholder:t,fluid:!0,value:r,onChange:this.handleChange})}}]),n}(i.a.Component),yi=n(1394),Si=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.checked,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.value;return Object(a.jsx)("span",{className:"boolctrl",children:Object(a.jsx)(yi.a,{checked:void 0!==e&&e,onChange:this.handleChange})})}}]),n}(i.a.Component),Ni=function(e){for(var t,n="";e>0;)t=(e-1)%26,n=String.fromCharCode(t+65)+n,e=(e-t-1)/26;return n},Ei=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=n.value,r=e.props,i=r.id;(0,r.onChange)(i,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.isRequired,r=e.value,i=[];if(null!=t){n||i.push({key:"",text:"<none>",value:""});for(var s=0;s<t.columns.length;s++){var o=t.columns[s],l="";l=""!==o.name?o.name:Ni(s+1),i.push({key:o.id,text:l,value:o.id})}}return Object(a.jsx)(Hr.a,{value:r,selection:!0,fluid:!0,scrolling:!0,options:i,onChange:this.handleChange})}}]),n}(i.a.Component),Ai=(n(62),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleAdd=function(e,t){for(var n=a.props,r=n.id,i=n.controlSpec,s=n.datasets,o=n.onChange,l=a.props.value,c=[],u=0;u<l.length;u++)c.push(l[u]);var d=Ya(i.parameters,s,null),h=Ya(i.parameters,s,null);a.setState({addTuple:h}),d[e]=t,c.push(d),o(r,c)},a.handleChange=function(e,t,n){for(var r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=0;c<o.length;c++)if(c===e||null===n){var u=Object(j.a)({},o[c]);u[t]=n,l.push(u)}else l.push(o[c]);s(i,l)},a.handleDelete=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=0;c<o.length;c++)c!==n?l.push(o[c]):a.setState({addTuple:""});s(i,l)},a.handleMoveDown=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=null,u=0;u<o.length;u++)u===n?c=o[u]:(l.push(o[u]),u===n+1&&l.push(c));s(i,l)},a.handleMoveUp=function(e,t){for(var n=t.value,r=a.props,i=r.id,s=r.onChange,o=a.props.value,l=[],c=null,u=0;u<o.length;u++)u===n-1?c=o[u]:(l.push(o[u]),u===n&&l.push(c));s(i,l)};var r=a.props,i=(r.id,r.controlSpec),s=r.datasets,o=Ya(i.parameters,s,null);return a.state={addTuple:o},a}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.controlSpec,r=t.datasets,i=t.id,s=t.selectedDataset,o=t.serviceProperties,l=t.value,c=[],u=[],d=0;d<n.parameters.length;d++){var h=n.parameters[d];u.push(Object(a.jsx)("td",{className:"inner-form-header",children:h.name},"th_ctrl"+d))}u.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn1")),u.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn2")),u.push(Object(a.jsx)("td",{className:"inner-form-header"},"th_btn3")),c.push(Object(a.jsx)("tr",{children:u},"header"));for(var p=function(t){for(var u=l[t],d="r_"+t+"_"+i,h=[],p=0;p<n.parameters.length;p++){var j=n.parameters[p];h.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(Mi,{controlSpec:j,datasets:r,onChange:function(n,a){return e.handleChange(t,n,a)},selectedDataset:s,serviceProperties:o,value:u[j.id]},j.id)},d+"_ctrl_"+j.id))}h.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(sr.a,{icon:"trash",value:t,negative:!0,onClick:e.handleDelete,title:"Delete row from the list"})},d+"_btn_del")),h.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(sr.a,{icon:"chevron up",disabled:0===t,onClick:e.handleMoveUp,title:"Move row one position up",value:t})},d+"_btn_up")),h.push(Object(a.jsx)("td",{className:"inner-form-button",children:Object(a.jsx)(sr.a,{icon:"chevron down",disabled:t===l.length-1,onClick:e.handleMoveDown,title:"Move row one position down",value:t})},d+"_btn_dowm")),c.push(Object(a.jsx)("tr",{children:h},d))},j=0;j<l.length;j++)p(j);for(var m=[],b=this.state.addTuple,f="r_"+(l.length+1)+"_"+i,v=function(t){var i=n.parameters[t];m.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(Mi,{controlSpec:i,datasets:r,onChange:function(t,n){return e.handleAdd(i.id,n)},selectedDataset:s,serviceProperties:o,value:b[i.id]},i.id)},f+"_ctrl_"+i.id))},O=0;O<n.parameters.length;O++)v(O);var g=Object(a.jsx)("tr",{children:m},f);return Object(a.jsx)("div",{children:Object(a.jsx)("table",{className:"inner-form",children:Object(a.jsxs)("tbody",{children:[c,g]})})})}}]),n}(i.a.Component)),Ii=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,n){var a=e.props,r=a.id,i=a.onChange,s=Object(j.a)({},e.props.value);s[t]=n,i(r,s)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlSpec,n=e.datasets,r=e.selectedDataset,i=e.serviceProperties,s=e.value,o=[],l=[];console.log("ROW"),console.log(s);for(var c=0;c<t.parameters.length;c++){var u=t.parameters[c];console.log("CHILD"),console.log(u),o.push(Object(a.jsx)("td",{className:"inner-form-header",children:u.name},o.length)),l.push(Object(a.jsx)("td",{className:"inner-form-control",children:Object(a.jsx)(Mi,{controlSpec:u,datasets:n,onChange:this.handleChange,selectedDataset:r,serviceProperties:i,value:s[u.id]},u.id)},l.length))}return Object(a.jsx)("table",{className:"inner-form",children:Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{children:o},"row-header"),Object(a.jsx)("tr",{children:l},"row-values")]})})}}]),n}(i.a.Component),Di=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){var n=t.value,r=a.props,i=r.id,s=r.onChange;a.state.ctrlValue!==n&&(a.setState({ctrlValue:n}),s(i,n,null))};var r=a.props.value;return a.state={ctrlValue:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.datasets,n=e.isRequired,r=e.value,i=[];n||i.push({key:"",text:"<none>",value:""});for(var s=0;s<t.length;s++){var o=t[s];i.push({key:o.name,text:o.name,value:o.name})}return Object(a.jsx)(Hr.a,{value:r,selection:!0,fluid:!0,scrolling:!0,options:i,onChange:this.handleChange})}}]),n}(i.a.Component),Pi=n(562),Ri=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).clearSourceFile=function(){var t=e.props,n=t.id;(0,t.onChange)(n,{fileid:null,filename:null,url:null})},e.handleFileDrop=function(t){var n=e.props,a=n.id;(0,n.onChange)(a,{fileid:null,filename:t[0].name,file:t[0],url:null})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.serviceProperties,t=this.props.value,n=t.fileid,r=t.filename,i=null,s=null;if(null!=r){var o=null;o=null!=n?"Uploaded":"Upload";var l=null,c=null;null!=r?(c=o+" file from local disk",l=r):l="unknown",s="file-content",i=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text",children:c}),Object(a.jsx)("p",{className:"file-name",children:l}),Object(a.jsx)(sr.a,{icon:"trash",title:"Clear source file",size:"large",negative:!0,onClick:this.clearSourceFile})]})}else{var u=null;e.maxFileSize&&(u=Object(a.jsxs)("p",{className:"upload-info",children:[Object(a.jsx)(br.a,{name:"info circle"}),Object(a.jsx)("span",{children:"The size for file uploads is limited to"}),Object(a.jsx)("span",{className:"upload-size",children:" "+qt(e.maxFileSize,2)})]})),s="file-selector",i=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text md-top",children:"Upload file from local disk"}),Object(a.jsx)("div",{className:"dropzone-container",children:Object(a.jsx)("div",{className:"dropzone",children:Object(a.jsx)(Pi.a,{onDrop:this.handleFileDrop,multiple:!1,children:Object(a.jsx)("p",{className:"p-dropzone",children:"Drop file here or click to select file to upload."})})})}),u]})}return Object(a.jsx)("div",{className:s,children:i})}}]),n}(i.a.Component),Ti=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e,t){var n=t.value,r=a.props,i=r.id;(0,r.onChange)(i,n)};var r=e.options,i=[];e.isRequired||i.push({key:"",text:"<none>",value:""});for(var s=0;s<r.length;s++){var o=r[s];if("object"===typeof o){var l=null;l=o.key?o.key:o.value,i.push({key:l,text:o.text,value:l})}else i.push({key:o,text:o,value:o})}return a.state={listItems:i},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.value,r=this.state.listItems;return Object(a.jsx)(Hr.a,{name:t,selection:!0,scrolling:!0,fluid:!0,options:r,value:n,onChange:this.handleChange})}}]),n}(i.a.Component),_i=n(31);function Li(e){var t=Object(r.useState)(""),n=Object(_i.a)(t,2),i=n[0],s=n[1],o=function(){var t=e.id,n=e.onChange;""!==i.trim()&&(n(t,{fileid:null,filename:null,url:i}),s(""))},l=e.value,c=l.fileid,u=l.url,d=null,h=null;if(null!=u){var p=u,j=(null!=c?"Downloaded":"Download")+" file from URL";h="file-content",d=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text",children:j}),Object(a.jsx)("p",{className:"file-name",children:p}),Object(a.jsx)(sr.a,{icon:"trash",title:"Clear source file",size:"large",negative:!0,onClick:function(){var t=e.id;(0,e.onChange)(t,{fileid:null,filename:null,url:null})}})]})}else h="file-selector",d=Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{className:"info-text md-top",children:"Download file from URL"}),Object(a.jsx)(fi.a.Input,{type:"text",value:i,placeholder:"Upload File from Url",icon:"world",iconPosition:"left",fluid:!0,action:Object(a.jsx)(sr.a,{icon:"upload",onClick:o}),onChange:function(e){s(e.target.value)},onKeyDown:function(e){e.keyCode===_t&&o()},onBlur:o})]});return Object(a.jsx)("div",{className:h,children:d})}var Mi=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlSpec,n=e.datasets,r=e.selectedDataset,i=e.serviceProperties,s=e.value,o=e.onChange;return t.datatype===Ta?Object(a.jsx)(Ei,{id:t.id,isRequired:!!t.required,name:t.id,dataset:r,value:s,onChange:o},t.id):t.datatype===_a?Object(a.jsx)(Di,{id:t.id,isRequired:!!t.required,name:t.id,datasets:n,value:s,onChange:o},t.id):t.datatype===Ha&&t.values?Object(a.jsx)(Ti,{id:t.id,isRequired:!!t.required,name:t.id,options:t.values,value:s,onChange:o},t.id):t.datatype===La||t.datatype===Fa||t.datatype===Ba||"rowidx"===t.datatype||"scalar"===t.datatype||t.datatype===Ha?Object(a.jsx)(ki,{id:t.id,name:t.id,placeholder:t.name,value:s,onChange:o},t.id):t.datatype===Pa?Object(a.jsx)(Si,{id:t.id,name:t.id,value:s,onChange:o},t.id):t.datatype===Ma?Object(a.jsx)(Ri,{id:t.id,isRequired:!!t.required,name:t.id,serviceProperties:i,value:s,onChange:o},t.id):"url"===t.datatype?Object(a.jsx)(Li,{id:t.id,isRequired:!!t.required,name:t.id,serviceProperties:i,value:s,onChange:o},t.id):t.datatype===Ua?Object(a.jsx)(Ai,{controlSpec:t,datasets:n,id:t.id,name:t.id,selectedDataset:r,serviceProperties:i,value:void 0===s?[]:s,onChange:o},t.id):t.datatype===Va?Object(a.jsx)(Ii,{controlSpec:t,datasets:n,id:t.id,name:t.id,selectedDataset:r,serviceProperties:i,value:void 0===s?{}:s,onChange:o},t.id):null}}]),n}(i.a.Component),Fi=n(14),Ui=n(1411),Vi=i.a.createContext({moduleProgress:0}),Bi=(Vi.Consumer,Vi),Hi=n(539),zi=n.n(Hi);function qi(e){var t=e.selectedCommand,n=e.datasets,i=e.selectedDataset,s=e.serviceProperties,o=e.values,l=e.onChange,c={name:null,file:{fileid:null,filename:null,url:null},loadFormat:"csv",schema:[],loadInferTypes:!1,loadDetectHeaders:!1,loadDataSourceErrors:!1,loadOptions:[]},u=Object(r.useState)(c),d=Object(_i.a)(u,2),h=d[0],p=d[1],m=Object(r.useState)(c),b=Object(_i.a)(m,2),f=b[0],v=b[1],O=Object(r.useState)(null),g=Object(_i.a)(O,2),x=g[0],C=g[1],w=[h,f],k=[p,v];Object(r.useEffect)((function(){null===o.file.url?(k[0](o),C(0)):(k[1](o),C(1))}),[]);var y=function(e,t){k[x](Object(j.a)(Object(j.a)({},w[x]),{},Object(Fi.a)({},e,t))),l(e,t)};Object(r.useEffect)((function(){l("bulk",w[x])}),[x]);var S=[{menuItem:Object(a.jsx)(hi.a,{size:"large",content:"From Local Machine",icon:"computer"}),render:function(){return Object(a.jsx)(Ui.a.Pane,{children:Object(a.jsx)(Ji,{datasets:n,selectedDataset:i,serviceProperties:s,selectedCommand:t,tabState:h,isUrlPane:!1,onChange:y})})}},{menuItem:Object(a.jsx)(hi.a,{size:"large",content:"From the Internet",icon:"world"}),render:function(){return Object(a.jsx)(Ui.a.Pane,{children:Object(a.jsx)(Ji,{datasets:n,selectedDataset:i,serviceProperties:s,selectedCommand:t,tabState:f,isUrlPane:!0,onChange:y})})}}],N=Object(r.useContext)(Bi);return N.moduleProgress&&0<N.moduleProgress<100?Object(a.jsx)(zi.a,{percent:N.moduleProgress,autoSuccess:!0,indicating:!0,progress:!0,children:"Uploading"}):Object(a.jsx)(Ui.a,{activeIndex:x,onTabChange:function(e,t){var n=t.activeIndex;return C(n)},panes:S})}var Ji=function(e){for(var t=e.datasets,n=e.selectedDataset,s=e.serviceProperties,o=e.selectedCommand,l=e.tabState,c=e.isUrlPane,u=e.onChange,d=[],h=Object(r.useState)(!1),p=Object(_i.a)(h,2),j=p[0],m=p[1],b=function(){return m((function(e){return!e}))},f=0;f<o.parameters.length;f++){var v=o.parameters[f];!0===c&&v.datatype===Ma&&(v={datatype:"url",hidden:!1,id:"file",index:1,name:"URL",required:!0});var O="form-options";["name","file","loadFormat"].includes(v.id)||(O+=j?"-advanced":"-advanced-hidden"),null==v.parent&&!0!==v.hidden&&v.datatype!==Ra&&d.push(Object(a.jsxs)("tr",{className:O,children:[Object(a.jsx)("td",{className:"form-label",children:v.name}),Object(a.jsx)("td",{className:"form-control",children:Object(a.jsx)(Mi,{controlSpec:v,datasets:t,selectedDataset:n,serviceProperties:s,value:l[v.id],onChange:u},v.id)})]},v.id))}return Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("table",{className:"form-table wide",children:Object(a.jsx)("tbody",{children:d})}),Object(a.jsx)("div",{className:"form-add-button",children:Object(a.jsx)(sr.a,{onClick:b,basic:!0,content:"".concat(j?"Hide":"Show"," Advanced Options")})})]})};function Ki(e){var t=e.components,n=e.selectedCommand,r=e.cssTable,i=e.datasets,s=e.selectedDataset,o=e.serviceProperties,l=e.values,c=e.onChange,u=Object(a.jsx)("table",{className:r,children:Object(a.jsx)("tbody",{children:t})});switch(n.id){case"load":return Object(a.jsx)(qi,{selectedCommand:n,datasets:i,selectedDataset:s,serviceProperties:o,values:l,onChange:c});default:return u}}var Gi=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props,t=e.datasets,n=e.selectedCommand,r=e.serviceProperties,i=e.onChange,s=e.values,o=function(e,t,n){if(null==t)return null;for(var a=0;a<e.parameters.length;a++){var r=e.parameters[a];if(r.datatype===_a){var i=t[r.id];if(null!=i)for(var s=0;s<n.length;s++){var o=n[s];if(o.name===i)return o}}}}(n,s,t),l="form-table",c=[],u=0;u<n.parameters.length;u++){var d=n.parameters[u];null==d.parent&&!0!==d.hidden&&d.datatype!==Ra&&(c.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"form-label",children:d.name}),Object(a.jsx)("td",{className:"form-control",children:Object(a.jsx)(Mi,{controlSpec:d,datasets:t,selectedDataset:o,serviceProperties:r,value:s[d.id],onChange:i},d.id)})]},d.id)),d.datatype===Ma&&(l+=" wide"))}return Object(a.jsx)(Ki,{components:c,selectedCommand:n,cssTable:l,datasets:t,selectedDataset:o,serviceProperties:r,values:s,onChange:i})}}]),n}(i.a.Component),Wi="ADD_ANNOTATION",Yi="CREATE_DATASET",Qi="DELETE_ANNOTATION",Zi="DELETE_COLUMN",Xi="DELETE_DATASET",$i="DELETE_ROW",es="GET_DATASET",ts="GET_DATASET_FRAME",ns="INSERT_COLUMN",as="INSERT_ROW",rs="NEW_DATASET_OBJECT",is="OUTPUT_ANNOTATIONS",ss="OUTPUT_COLUMN_NAMES",os="OUTPUT_CELL_VALUES",ls="OUTPUT_D3_PLOT",cs="OUTPUT_BOKEH_PLOT",us="OUTPUT_MAP",ds="EXPORT_MODULE",hs="RENAME_DATASET",ps="UPDATE_CELL_VALUE",js="UPDATE_ANNOTATION",ms="UPDATE_DATASET",bs=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Wi?(i.push("# Add new annotation for dataset cells. Note that rows"),i.push("# and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    if not annos.contains('some:key'):"),i.push("        annos.add('some:key', 'some-value')")):a===Yi?(i.push("# Create a new dataset in the data store. Expects a"),i.push("# dataset object and a unique dataset name."),i.push("vizierdb.create_dataset('unique-ds-name', ds)")):a===Qi?(i.push("# Delete annotations for dataset cell. Delete is similar to"),i.push("# update. Delete an annotation by setting its value to None."),i.push("# Rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for a in annos.find_all('some:key'):"),i.push("        annos.update(identifier=a.identifier, value=None)")):a===Zi?(i.push("# Delete dataset column by name (only if column names"),i.push("# are unique), spreadsheet label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("ds.delete_column('name-label-or-index')")):a===Xi?(i.push("# Delete dataset with the given name from data store."),i.push("vizierdb.drop_dataset('unique-ds-name')")):a===$i?(i.push("# Delete dataset rows by removing them from the list of"),i.push("# rows using the row index."),i.push("del ds.rows[index]")):a===es?(i.push("# Get object for dataset with given name."),i.push("ds = vizierdb.get_dataset('unique-ds-name')")):a===ts?(i.push("# Get read-only pandas dataframe object for dataset with given name."),i.push("df = vizierdb.get_dataset_frame('unique-ds-name')")):a===ns?(i.push("# Create a new column with a given name. The column"),i.push("# position is optional."),i.push("ds.insert_column('column-name', position=0)")):a===as?(i.push("# When inserting a row the list of values and the row"),i.push("# position are optional. By default row cells are None."),i.push("ds.insert_row(values=['list-of-values-for-each-column'], position=0)")):a===rs?(i.push("# Get object containing an empty dataset."),i.push("ds = vizierdb.new_dataset()")):a===is?(i.push("# Print all annotations for dataset column. Note that"),i.push("# rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for key in annos.keys():"),i.push("        for a in annos.find_all(key):"),i.push("            print(a.key + ' = ' + str(a.value))")):a===ss?(i.push("# Iterate over list of dataset columns and print column name"),i.push("for col in ds.columns:"),i.push("    print(col.name)")):a===os?(i.push("# Iterate over list of dataset rows and print cell value."),i.push("# Reference column by name, label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("for row in ds.rows:"),i.push("    print(row.get_value('name-label-or-index'))")):a===ls?(i.push("# Generate a plot using Vizier's internal D3-based engine."),i.push("# (Expects a dataset named `ds`)"),i.push("ds.show_d3_plot('bar_cluster', "),i.push("  labels_inner= [ 'LINE 1',  'LINE 2',  'LINE 3'],"),i.push("  keys        = [ 'VALUE-1', 'VALUE-2', 'VALUE-3'],"),i.push("  key_col     = 'KEY-COLUMN-NAME',"),i.push("  value_cols  = [ 'VALUE-COL-1', 'VALUE-COL-2', 'VALUE-COL-3'],"),i.push("  title       = 'My Plot',"),i.push("  legend_title='Legend'"),i.push(")")):a===cs?(i.push("# Generate a plot using Bokeh"),i.push("# (Expects a dataset named `ds`)"),i.push("# See https://bokeh.pydata.org/en/latest/docs/reference.html"),i.push("from bokeh.io import show"),i.push("from bokeh.plotting import figure"),i.push("plot = figure(title = 'MyFigure')"),i.push("plot.line("),i.push("  x = 'X-COLUMN-NAME', "),i.push("  y = 'Y-COLUMN-NAME', "),i.push("  source = ds.to_bokeh()"),i.push(")"),i.push("show(plot)")):a===us?(i.push("# Render an interactive OpenStreetMap with points marked"),i.push("# (Expects a dataset named `ds`)"),i.push("ds.show_map("),i.push("  lat_col = 'LATITUDE-COLUMN-NAME',"),i.push("  lon_col = 'LONGITUDE-COLUMN-NAME',"),i.push("  label_col = 'LABEL-COLUMN-NAME' # Optional"),i.push(")")):a===ds?(i.push("# Export a variable, a function or a class for use in subsequent cells"),i.push("def add_numbers(number_1, number_2):"),i.push("    print('adding ' + str(number_1) + ' + ' +str(number_2))"),i.push("    return number_1 + number_2"),i.push("vizierdb.export_module("),i.push("    add_numbers"),i.push(")"),i.push("#  Use it in a subsequent like normal: add_numbers(1,2)")):a===hs?(i.push("# Rename given dataset to a new (unique) name."),i.push("vizierdb.rename_dataset('unique-ds-name', 'new-unique-ds-name')")):a===ps?(i.push("# Iterate over list of dataset rows and update cell value."),i.push("# Reference column by name, label ('A', 'B', ...), or"),i.push("# column index (0, 1, ...)."),i.push("for row in ds.rows:"),i.push("    row.set_value('name-label-or-index', value)")):a===js?(i.push("# Update all annotations for dataset cell. Note that"),i.push("# rows and columns are referenced by their unique identifiers."),i.push("col = ds.columns[ds.column_index('name-label-or-index')]"),i.push("for row in ds.rows:"),i.push("    annos = ds.annotations.for_cell(col.identifier, row.identifier)"),i.push("    for a in annos.find_all('some:key'):"),i.push("        annos.update(identifier=a.identifier, value='some-value')")):a===ms&&(i.push("# Update existing dataset with given name."),i.push("vizierdb.update_dataset('unique-ds-name', ds)")),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(Fr.a,{columns:4,divided:!0,children:Object(a.jsxs)(Fr.a.Row,{children:[Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ui.a.Item,{value:es,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ui.a.Item,{value:ts,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Get Dataset Dataframe"})}),Object(a.jsx)(ui.a.Item,{value:ss,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ui.a.Item,{value:os,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ui.a.Item,{value:is,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Annotations"})}),Object(a.jsx)(ui.a.Item,{value:ls,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Output Plot (D3)"})}),Object(a.jsx)(ui.a.Item,{value:cs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Output Plot (Bokeh)"})}),Object(a.jsx)(ui.a.Item,{value:us,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Output Map"})}),Object(a.jsx)(ui.a.Item,{value:ds,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Export Module"})})]})},"output"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"plus"})," New"]})}),Object(a.jsx)(ui.a.Item,{value:rs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"New Dataset Object"})}),Object(a.jsx)(ui.a.Item,{value:ns,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Insert Column"})}),Object(a.jsx)(ui.a.Item,{value:as,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Insert Row"})}),Object(a.jsx)(ui.a.Item,{value:Wi,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Annotate Cell Value"})})]})},"new"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"edit"})," Update"]})}),Object(a.jsx)(ui.a.Item,{value:ps,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Edit Cell Values"})}),Object(a.jsx)(ui.a.Item,{value:js,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Update Cell Annotations"})}),Object(a.jsx)(ui.a.Item,{value:ms,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Save Dataset"})}),Object(a.jsx)(ui.a.Item,{value:Yi,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Save Dataset As ..."})}),Object(a.jsx)(ui.a.Item,{value:hs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Rename Dataset"})})]})},"update"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"trash"})," Delete"]})}),Object(a.jsx)(ui.a.Item,{value:Xi,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Delete Dataset"})}),Object(a.jsx)(ui.a.Item,{value:Zi,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Delete Dataset Column"})}),Object(a.jsx)(ui.a.Item,{value:$i,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Delete Dataset Row"})}),Object(a.jsx)(ui.a.Item,{value:Qi,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Delete Cell Annotations"})})]})},"delete")]})})})}}]),n}(i.a.Component),fs=(i.a.Component,"WITH_DATASET"),vs="OUTPUT_ANNOTATIONS",Os="OUTPUT_COLUMN_NAMES",gs="OUTPUT_CELL_VALUES",xs=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===fs?(i.push("// do something with a dataset with given name."),i.push('VizierDB.withDataset("unique-ds-name", ds => { //do things with ds here })')):a===vs?i.push('VizierDB.outputAnnotations("unique-ds-name")'):a===Os?(i.push("//Iterate over list of dataset columns and print column name"),i.push('ds.schema.map(se => se._1).mkString("<br>")')):a===gs&&(i.push("//Iterate over list of dataset rows and print cell value."),i.push('ds.toList.map(row => row.tuple.mkString(",")).mkString("<br>")')),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(Fr.a,{columns:4,divided:!0,children:Object(a.jsxs)(Fr.a.Row,{children:[Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ui.a.Item,{value:fs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ui.a.Item,{value:Os,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ui.a.Item,{value:gs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ui.a.Item,{value:vs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Annotations"})})]})},"output"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"plus"})," New"]})})})},"new"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"edit"})," Update"]})})})},"update"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"trash"})," Delete"]})})})},"delete")]})})})}}]),n}(i.a.Component),Cs=(i.a.Component,"WITH_DATASET"),ws="OUTPUT_ANNOTATIONS",ks="OUTPUT_COLUMN_NAMES",ys="OUTPUT_CELL_VALUES",Ss=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Cs?(i.push("// do something with a dataset with given name."),i.push('vizierdb.withDataset("unique-ds-name", ds => { //do things with ds here })')):a===ws?i.push('vizierdb.outputAnnotations("unique-ds-name")'):a===ks?(i.push("//Iterate over list of dataset columns and print column name"),i.push('ds.schema.map(se => se._1).mkString("<br>")')):a===ys&&(i.push("//Iterate over list of dataset rows and print cell value."),i.push('ds.toList.map(row => row.tuple.mkString(",")).mkString("<br>")')),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(Fr.a,{columns:4,divided:!0,children:Object(a.jsxs)(Fr.a.Row,{children:[Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ui.a.Item,{value:Cs,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Get Dataset"})}),Object(a.jsx)(ui.a.Item,{value:ks,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Column Names"})}),Object(a.jsx)(ui.a.Item,{value:ys,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Values"})}),Object(a.jsx)(ui.a.Item,{value:ws,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Print Cell Annotations"})})]})},"output"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"plus"})," New"]})})})},"new"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"edit"})," Update"]})})})},"update"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsx)(ui.a,{link:!0,children:Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"trash"})," Delete"]})})})},"delete")]})})})}}]),n}(i.a.Component),Ns="SELECT_TABLE",Es="JOIN_TABLES",As="UNION_TABLES",Is="DATASET",Ds=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleSelect=function(e,t){var n=t.value,r=a.props.onSelect,i=a.state,s=i.secondaryDatasetValue,o=i.primaryDatasetValue,l=[];n===Ns?l.push("SELECT * FROM "+o):n===Es?l.push("SELECT * FROM "+o+" JOIN "+s):n===As?l.push("(SELECT * FROM "+o+") UNION ALL (SELECT * FROM "+s+")"):n===Is&&l.push(" "+o+" "),r(l)},a.handleSecondaryDatasetChange=function(e){a.setState({secondaryDatasetValue:e})},a.handlePrimaryDatasetChange=function(e){a.setState({primaryDatasetValue:e})},a.state={secondaryDatasetValue:""},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.datasets,i=this.state,s=i.secondaryDatasetValue,o=i.primaryDatasetValue;return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(Fr.a,{columns:4,divided:!0,children:Object(a.jsxs)(Fr.a.Row,{children:[Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ui.a.Item,{className:"sql-example-list-item",value:Ns,onClick:this.handleSelect,children:Object(a.jsxs)(ui.a.Content,{as:"a",children:[Object(a.jsx)("span",{className:"sql-example-a-span",children:"Select from"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)(br.a,{name:"plus"})]})}),Object(a.jsx)(ui.a.Item,{className:"sql-example-list-item",value:Es,onClick:this.handleSelect,children:Object(a.jsxs)(ui.a.Content,{as:"a",children:[Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)("span",{className:"sql-example-a-span",children:"Join"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:s,onChange:function(t,n){e.handleSecondaryDatasetChange(n)}},n)}),Object(a.jsx)(br.a,{name:"plus"})]})}),Object(a.jsx)(ui.a.Item,{className:"sql-example-list-item",value:As,onClick:this.handleSelect,children:Object(a.jsxs)(ui.a.Content,{as:"a",children:[Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)("span",{className:"sql-example-a-span",children:"Union"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:s,onChange:function(t,n){e.handleSecondaryDatasetChange(n)}},n)}),Object(a.jsx)(br.a,{name:"plus"})]})})]})},"output"),Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"plus"})," Dataset"]})}),Object(a.jsx)(ui.a.Item,{className:"sql-example-list-item",value:Is,onClick:this.handleSelect,children:Object(a.jsxs)(ui.a.Content,{as:"a",children:[Object(a.jsx)("span",{className:"sql-example-a-span",children:"Dataset"}),Object(a.jsx)("div",{className:"sql-example-ds-selector",children:Object(a.jsx)(Di,{id:n,isRequired:!1,name:n,datasets:r,value:o,onChange:function(t,n){e.handlePrimaryDatasetChange(n)}},n)}),Object(a.jsx)(br.a,{name:"plus"})]})})]})},"new")]})})})}}]),n}(i.a.Component),Ps=(i.a.Component,n(1089),"TABLE"),Rs=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSelect=function(t,n){var a=n.value,r=e.props.onSelect,i=[];a===Ps&&(i.push("| header1 | header2 |"),i.push("| ------- | ------- |"),i.push("| | |")),r(i)},e}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"snippet-selector",children:Object(a.jsx)(Fr.a,{columns:4,divided:!0,children:Object(a.jsx)(Fr.a.Row,{children:Object(a.jsx)(Fr.a.Column,{width:4,children:Object(a.jsxs)(ui.a,{link:!0,children:[Object(a.jsx)(ui.a.Item,{children:Object(a.jsxs)(ui.a.Header,{children:[Object(a.jsx)(br.a,{name:"desktop"})," Access & Output"]})}),Object(a.jsx)(ui.a.Item,{value:Ps,onClick:this.handleSelect,children:Object(a.jsx)(ui.a.Content,{as:"a",children:"Table"})})]})},"output")})})})}}]),n}(i.a.Component),Ts=(i.a.Component,function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleActivateCell=function(){var e=a.props,t=e.cell,n=e.isActiveCell,r=e.onSelectCell;n||r(t)},a.handleAppendCode=function(e){var t=a.state,n=t.codeEditorProps,r=t.formValues,i=t.selectedCommand.codeParameter,s=null==r[i.id]?"":r[i.id],o=n.cursorPosition,l="",c=s.split("\n");if(c.length>0&&""!==s){for(var u=c[o.line],d=0;d<u.length;){var h=u.charAt(d);if(" "!==h&&"\t"!==h)break;d++}l=u.substring(0,d)}for(var p=0;p<e.length;p++)c.splice(o.line+p,0,l+e[p]);""!==s&&c.splice(o.line,0,"");var j=c.join("\n");a.handleFormValueChange(i.id,j),a.handleToggleSnippetSelector()},a.handleFormValueChange=function(e,t,n){if("bulk"!==e){var r=a.state,i=r.codeEditorProps,s=r.formValues,o=r.selectedCommand,l=Object(j.a)({},s);l[e]=t,o.parameters.find((function(t){return t.id===e})).datatype===_a&&Wa(l,o.parameters);var c=null;c=null!=n?{cursorPosition:n}:i,a.setState({upstreamFormValues:!0,formValues:l,codeEditorProps:c})}else a.handleBulkFormValueChange(t)},a.handleBulkFormValueChange=function(e){var t=Object(j.a)({},e);a.setState({formValues:t,upstreamFormValues:!0})},a.handleCursorChange=function(e){a.setState({codeEditorProps:{cursorPosition:e}})},a.handleDismiss=function(){var e=a.props,t=e.cell,n=e.datasets,r=e.onDismiss;t.isNewCell()||a.setState({upstreamFormValues:!1,formValues:Ya(t.commandSpec.parameters,n,t.module.command.arguments),selectedCommand:t.commandSpec,snippetSelectorVisible:!1}),r(t)},a.handleDismissCommandsListing=function(){var e=a.state.selectedCommand,t=a.props.onResetRecommendations;null!=e?a.setState({showCommandsListing:!1}):a.handleDismiss(),t()},a.handleDismissErrors=function(){a.setState({errors:null})},a.handlePasteCommand=function(){var e=a.props,t=e.datasets,n=e.userSettings,r=e.onResetRecommendations;a.setState({formValues:Ya(n.clipboard.commandSpec.parameters,t,n.clipboard.arguments),selectedCommand:n.clipboard.commandSpec,showCommandsListing:!1}),r()},a.handleSelectCommand=function(e,t){var n=a.props,r=n.apiEngine,i=n.datasets,s=n.onResetRecommendations,o=r.packages.getCommandSpec(e,t);a.setState({formValues:Ya(o.parameters,i),selectedCommand:o,showCommandsListing:!1}),s()},a.handleShowCommandsListing=function(){a.setState({showCommandsListing:!0})},a.handleSubmitForm=function(){var e=a.props,t=e.cell,n=e.onSubmit,r=e.apiEngine,i=e.onUpdateProgress;if(null!=n){var s=a.state,o=s.formValues,l=s.selectedCommand,c=Ka(o,l.parameters,r.serviceProperties);c.errors.length>0?a.setState({errors:c.errors,hasErrors:!0}):(a.setState({errors:null,hasErrors:!1,submitted:!0}),n(t,l,c.data,i)),a.setState({upstreamFormValues:!1})}else alert("Cannot submit cell in an active notebook")},a.handleToggleSnippetSelector=function(){var e=a.state.snippetSelectorVisible;a.setState({snippetSelectorVisible:!e})},a.handleF5Press=function(e){e.preventDefault(),a.handleSubmitForm()};var r=e.cell,i=e.datasets,s=null;return r.isNewCell()||(s=Ya(r.commandSpec.parameters,i,r.module.command.arguments)),a.state={codeEditorProps:{cursorPosition:{line:0,ch:0},newLines:""},errors:null,formValues:s,hasErrors:!1,selectedCommand:r.commandSpec,showCommandsListing:null==r.commandSpec,snippetSelectorVisible:!1,upstreamFormValues:!1,submitted:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.apiEngine,r=t.cell,i=t.datasets,s=t.isActiveCell,o=t.onClick,l=t.onSubmit,c=t.userSettings,u=this.state,d=u.errors,h=u.formValues,p=u.hasErrors,j=u.selectedCommand,m=u.showCommandsListing,b=u.snippetSelectorVisible,f=u.submitted,v=null;null!=d&&(v=Object(a.jsx)(pr,{title:"There are errors in the form",errors:d,onDismiss:this.handleDismissErrors}));var O=null,g=null,x=null;if(s&&(null==j||m)){var C=null;null!=c.clipboard&&(C=this.handlePasteCommand),O=Object(a.jsx)(Oi,{apiEngine:n,onDismiss:this.handleDismissCommandsListing,onPaste:C,onSelect:this.handleSelectCommand})}else{var w=null;if(s?w=j.codeParameter:r.isNewCell()||(w=r.commandSpec.codeParameter),null!=w)if(f)O=Object(a.jsx)("div",{className:"module-form",children:Object(a.jsx)(lr,{text:"Submitting Cell",size:"small"})});else{var k=null;s&&b&&("python"===w.language?k=Object(a.jsx)(bs,{onSelect:this.handleAppendCode}):"scala"===w.language?k=Object(a.jsx)(xs,{onSelect:this.handleAppendCode}):"r"===w.language?k=Object(a.jsx)(Ss,{onSelect:this.handleAppendCode}):"sql"===w.language?k=Object(a.jsx)(Ds,{datasets:i,onSelect:this.handleAppendCode}):"markdown"===w.language&&(k=Object(a.jsx)(Rs,{onSelect:this.handleAppendCode})));var y=this.state.codeEditorProps,S=!(!r||!r.module)&&r.module.locked;if(s&&"sql"===w.language){var N=h.output_dataset;g=Object(a.jsxs)("div",{className:"ui labeled input",children:[Object(a.jsx)("div",{className:"ui label",children:"Output Dataset"}),Object(a.jsx)(ki,{id:w.id,name:"Output Dataset",placeholder:"Output Dataset (optional)",isRequired:!1,value:N,onChange:function(t,n){e.handleFormValueChange("output_dataset",n,y.cursorPosition)}},w.id)]})}O=Object(a.jsxs)("div",{children:[Object(a.jsx)(fi.a,{children:Object(a.jsx)(wi,{cursorPosition:y.cursorPosition,editing:!1,id:w.id,isActiveCell:s,language:w.language,onChange:this.handleFormValueChange,onCursor:this.handleCursorChange,onFocus:this.handleActivateCell,readOnly:null==l,value:h[w.id],locked:S},w.id)}),g,k]});var E=b?"Hide":"Show";x=Object(a.jsx)(sr.a,{content:E+"  Code Examples",icon:"info",labelPosition:"left",primary:!0,onClick:this.handleToggleSnippetSelector})}else if(s){var A=p?" error":"";O=f?Object(a.jsx)("div",{className:"module-form"+A,children:Object(a.jsx)(lr,{text:"Submitting Cell",size:"small"})}):Object(a.jsxs)("div",{className:"module-form"+A,children:[Object(a.jsx)("p",{className:"module-form-header"+A,children:j.name}),Object(a.jsx)(Gi,{datasets:i,onChange:this.handleFormValueChange,selectedCommand:j,serviceProperties:n.serviceProperties,values:h})]})}else r.isNewCell()&&null!=j?O=Object(a.jsx)("pre",{className:"cell-cmd-text",onClick:o,children:j.name}):null!=r.module&&(O=Object(a.jsx)("pre",{className:"cell-cmd-text",onClick:o,children:r.module.text}))}var I=null;if(null!=l){var D={runCell:this.handleSubmitForm,dismiss:this.handleDismiss,catchF5:this.handleF5Press};I=Object(a.jsx)(bi.HotKeys,{keyMap:{runCell:"ctrl+enter",dismiss:"esc",catchF5:"f5"},handlers:D,children:O})}else I=O;var P=null;return!s||m||f||(P=Object(a.jsxs)("div",{className:"module-form-buttons",children:[x,Object(a.jsx)("span",{className:"padding-lg",children:Object(a.jsx)(sr.a,{content:"Change Command",icon:"wrench",labelPosition:"left",onClick:this.handleShowCommandsListing})}),Object(a.jsx)(sr.a,{content:"Dismiss",icon:"close",labelPosition:"left",negative:!0,onClick:this.handleDismiss}),Object(a.jsx)(sr.a,{content:"Submit",disabled:null==l,icon:"paper plane outline",labelPosition:"left",positive:!0,onClick:this.handleSubmitForm})]})),Object(a.jsxs)("div",{className:"cell-command-area",children:[v,I,P]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n="undefined"!==typeof e.cell.module?e.cell.module.command.arguments:null;if("undefined"!==typeof n&&null!==n&&!1===t.upstreamFormValues){var a=Ya(e.cell.commandSpec.parameters,e.datasets,n);return Object(j.a)(Object(j.a)({},t),{},{formValues:a})}return null}}]),n}(i.a.Component)),_s=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleInsertBefore=function(){e.props.onInsertCell(On)},e.handleInsertAfter=function(){e.props.onInsertCell(vn)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.cellNumber,r=e.isActiveCell,i=e.isNewNext,s=e.isNewPrevious,o=e.notebook,l=e.onAddFilteredCommand,c=e.onCopyCell,u=e.onCreateBranch,d=e.onDeleteCell,h=e.onSelectCell,p=e.onFreezeCell,j=e.onThawCell;if(t.isActive()){var m=null;return t.isPending()?m=Object(a.jsx)(br.a,{name:"hourglass half",title:"Pending"}):t.isRunning()&&(m=Object(a.jsx)(br.a,{name:"circle notch",title:"Running"})),Object(a.jsx)("div",{className:"cell-menu",children:m})}var b=[];o.readOnly||(b.push(Object(a.jsx)(Hr.a.Header,{content:"Cell"},"header-cell")),b.push(Object(a.jsx)(Hr.a.Item,{disabled:r,icon:"pencil",text:"Edit",title:"Edit notebook cell #"+n,onClick:h},"edit")),b.push(Object(a.jsx)(Hr.a.Item,{disabled:r,icon:"copy",text:"Copy",title:"Copy command from notebook cell #"+n,onClick:c},"copy")),b.push(Object(a.jsx)(Hr.a.Item,{disabled:o.hasActiveCells(),icon:"trash",text:"Delete",title:"Delete notebook cell #"+n,onClick:d},"delete")),b.push(Object(a.jsx)(Hr.a.Divider,{},"div-notebook")),b.push(Object(a.jsx)(Hr.a.Header,{content:"Notebook"},"header-notebook")),b.push(Object(a.jsx)(Hr.a.Item,{disabled:s,icon:"arrow circle up",text:"Insert cell above",title:"Insert new notebook cell before cell #"+n,onClick:this.handleInsertBefore},"insert-above")),b.push(Object(a.jsx)(Hr.a.Item,{disabled:i,icon:"arrow circle down",text:"Insert cell below",title:"Insert new notebook cell after cell #"+n,onClick:this.handleInsertAfter},"insert-below")),t.module.links.has(re)&&b.push(Object(a.jsx)(Hr.a.Item,{disabled:!1,icon:"snowflake",text:"Freeze cells from here",title:"Freeze cell #"+n+" and subsequent cells and keep them from executing",onClick:p},"freeze-below")),t.module.links.has(ie)&&b.push(Object(a.jsx)(Hr.a.Item,{disabled:!1,icon:"sun",text:"Thaw cells up to here",title:"Thaw cell #"+n+" and preceding cells and update their outputs",onClick:j},"thaw-above")),b.push(Object(a.jsx)(Hr.a.Divider,{},"div-branch"))),b.push(Object(a.jsx)(Hr.a.Header,{content:"Branch"},"header-branch"));var f="1";n>1&&(f+="-"+n),b.push(Object(a.jsx)(Hr.a.Item,{disabled:o.hasActiveCells(),icon:"fork",text:"Create branch",title:"Create new branch containing notebook cells ["+f+"]",onClick:u},"branch")),b.push(Object(a.jsx)(Hr.a.Divider,{},"div-filter")),b.push(Object(a.jsx)(Hr.a.Header,{content:"Filter"},"header-filter")),b.push(Object(a.jsx)(Hr.a.Item,{icon:"filter",text:"Hide "+t.commandSpec.name,title:"Hide all cells with command of type "+t.commandSpec.name+" in the notebook",onClick:l},"hide-cmd"));var v=null;return t.isErrorOrCanceled()&&(t.isCanceled()?v=Object(a.jsx)(br.a,{name:"cancel",color:"red",title:"Canceled"}):t.isError()&&(v=Object(a.jsx)(br.a,{name:"warning circle",color:"red",title:"Error"})),v=Object(a.jsx)("div",{className:"cell-status-icon",children:v})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"cell-menu",children:Object(a.jsx)(Hr.a,{icon:"bars",title:"Cell actions",children:Object(a.jsx)(Hr.a.Menu,{children:b})})}),v]})}}]),n}(i.a.Component),Ls=n(540),Ms=n.n(Ls),Fs=n(541),Us=n.n(Fs),Vs=n(43),Bs=n(60),Hs=n(20),zs=n(347),qs=(n(180),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var r;Object(m.a)(this,n),(r=t.call(this,e)).handleResize=function(e){try{var t=o.a.findDOMNode(Object(Vs.a)(r));r.setState({width:t.offsetWidth})}catch(n){}},r.handleSelectChart=function(e,t){var n=t.value;r.setState({chartType:n})},r.handleToggleGrouped=function(e,t){var n=t.checked;r.setState({grouped:n})},r.selectedReCharts=function(e,t,n,i){var s=t.values,o=t.labels,l=r.selectedReChart(e,o,s);if(void 0===l)return null;if(n)return l(s,i,n,"");for(var c=[],u=1;u<t.labels.length;u++){var d=t.labels[u],h=s;c.push(Object(a.jsx)(zs.GridTile,{children:l(h,400,n,d)},u))}return Object(a.jsx)(zs.GridList,{cellHeight:r.props.gridList_cellHeight,cols:Math.floor(i/400),style:{width:{width:i},height:r.props.gridList_height,overflowY:r.props.gridLis_overflowY},children:c})},r.caveatDot=function(e){var t=e.cx,n=e.cy;return!1===e.payload[e.dataKey+"_caveat"]?Object(a.jsx)("svg",{x:t-10,y:n-10,width:18,height:18,fill:"red",viewBox:"0 0 18 18",children:Object(a.jsx)("text",{x:0,y:0,dy:18,fontSize:16,children:"*"})}):Object(a.jsx)("svg",{x:t,y:n,width:0,height:0,fill:"green",viewBox:"0 0 0 0"})},r.caveatLabels=function(e,t){return function(n){return n[e[t]+"_caveat"]}},r.selectedReChart=function(e,t,n){var i=[],s=0;if("Area Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.a,{name:t[s],type:"monotone",dataKey:t[s],stackId:"1",connectNulls:!1,stroke:r.listColors[s-1],fillOpacity:1,fill:r.listColors[s-1]},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.b,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Hs.x,{dataKey:"x"}),Object(a.jsx)(Hs.y,{}),Object(a.jsx)(Hs.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Hs.a,{type:"monotone",dataKey:s,stroke:r.listColors[0],fillOpacity:1,fill:r.listColors[0]}),Object(a.jsx)(Hs.e,{})]})}}if("Bar Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.c,{name:t[s],dataKey:t[s],fill:r.listColors[s-1],label:Object(a.jsx)(Js,{caveats:n.map(r.caveatLabels(t,s))})},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.d,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Hs.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Hs.x,{dataKey:"x"}),Object(a.jsx)(Hs.y,{}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Hs.c,{id:"id_",dataKey:s,fill:r.listColors[0],label:Object(a.jsx)(Js,{caveats:e.map((function(e){return e[s+"_caveat"]}))})}),Object(a.jsx)(Hs.e,{})]})}}if("Line Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.i,{type:"monotone",name:t[s],dataKey:t[s],stroke:r.listColors[s-1],dot:r.caveatDot},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.j,{width:t,height:400,data:e,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Hs.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Hs.x,{dataKey:"x"}),Object(a.jsx)(Hs.y,{}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36}),n?i:Object(a.jsx)(Hs.i,{type:"monotone",name:s,dataKey:s,stroke:r.listColors[0],dot:r.caveatDot}),Object(a.jsx)(Hs.e,{})]})}}if("Scatter Plot"===e){for(var o=[],l=1;l<t.length;l++){var c=[];for(s=0;s<n.length;s++){var u={x:n[s].x,y:n[s][t[l]]};c.push(u)}o.push(c)}for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.t,{name:t[s],data:o[s-1],fill:r.listColors[s-1]},"id_"+s));return function(e,n,s,l){return Object(a.jsxs)(Hs.u,{width:n,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Hs.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Hs.x,{type:"number",dataKey:"x"}),Object(a.jsx)(Hs.y,{type:"number",dataKey:"y"}),Object(a.jsx)(Hs.v,{cursor:{strokeDasharray:"3 3"}}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36}),s?i:Object(a.jsx)(Hs.t,{name:l,data:o[t.indexOf(l)-1],fill:r.listColors[0]})]})}}if("Pie Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.k,{nameKey:"x",data:n,dataKey:t[s],cx:"50%",cy:"50%",innerRadius:0,fill:"#8884d8",label:!0,children:n.map((function(e,t){return Object(a.jsx)(Hs.g,{fill:r.listColors[t%r.listColors.length]},t)}))},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.l,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[n?i:Object(a.jsx)(Hs.k,{nameKey:"x",data:e,dataKey:s,cx:"50%",cy:"50%",innerRadius:0,fill:"#8884d8",label:!0,children:e.map((function(e,t){return Object(a.jsx)(Hs.g,{fill:r.listColors[t%r.listColors.length]},t)}))}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36})]})}}if("Donut Chart"===e){for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.k,{nameKey:"x",data:n,dataKey:t[s],cx:"50%",cy:"50%",innerRadius:"20%",outerRadius:80,fill:"#8884d8",label:!0,children:n.map((function(e,t){return Object(a.jsx)(Hs.g,{fill:r.listColors[t%r.listColors.length]},t)}))},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.l,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},children:[n?i:Object(a.jsx)(Hs.k,{nameKey:"x",data:e,dataKey:s,cx:"50%",cy:"50%",innerRadius:"20%",outerRadius:80,fill:"#8884d8",label:!0,children:e.map((function(e,t){return Object(a.jsx)(Hs.g,{fill:r.listColors[t%r.listColors.length]},t)}))}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{verticalAlign:"top",height:36})]})}}if("Radar Chart"===e){var d=[];for(s=0;s<n.length;s++){var h={};h.id="id"+s+"_"+n[s].x;for(var p=0;p<t.length;p++)h[t[p]]=n[s][t[p]];d.push(h)}for(s=1;s<t.length;s++)i.push(Object(a.jsx)(Hs.p,{name:t[s],dataKey:t[s],stroke:r.listColors[s-1],fill:r.listColors[s-1],fillOpacity:.6},"id_"+s));return function(e,t,n,s){return Object(a.jsxs)(Hs.q,{outerRadius:90,width:400,height:400,data:d,margin:{top:10,bottom:50,left:50,right:10},children:[Object(a.jsx)(Hs.n,{}),Object(a.jsx)(Hs.m,{dataKey:"id"}),Object(a.jsx)(Hs.o,{}),n?i:Object(a.jsx)(Hs.p,{name:s,dataKey:s,stroke:r.listColors[0],fill:r.listColors[0],fillOpacity:.6}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{onMouseEnter:r.handleMouseEnter,onMouseLeave:r.handleMouseLeave})]})}}return"Radial Bar Chart"===e?function(e,t,n,r){return Object(a.jsxs)(Hs.s,{width:t,height:400,data:e,cx:150,cy:150,innerRadius:20,outerRadius:140,barSize:10,children:[Object(a.jsx)(Hs.r,{minAngle:15,label:{position:"insideStart",fill:"#fff"},background:!0,clockWise:!0,dataKey:r}),Object(a.jsx)(Hs.h,{iconSize:10,width:120,height:140,layout:"vertical",verticalAlign:"middle",wrapperStyle:{top:0,left:350,lineHeight:"24px"}}),Object(a.jsx)(Hs.v,{cursor:{strokeDasharray:"3 3"}})]})}:"Treemap"===e?function(e,t,n,r){return Object(a.jsx)(Hs.w,{width:t,height:400,margin:{top:10,bottom:50,left:50,right:10},data:e,dataKey:r,ratio:4/3,stroke:"#fff",fill:"#8884d8",children:Object(a.jsx)(Hs.v,{cursor:{strokeDasharray:"3 3"}})})}:void 0};var i=e.dataset;r.state={chartType:i.chart.type,grouped:i.chart.grouped||1===i.series.length,width:400},r.labels=[];for(var s=0;s<i.series.length;s++)r.labels.push(i.series[s].label);return r.listColors=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#c5b0d5","#c49c94","#f7b6d2","#c7c7c7","#dbdb8d","#9edae5","#aec7e8","#ffbb78","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],r.colorScale=Object(Bs.scaleOrdinal)().domain(r.labels).range(r.listColors),r}return Object(b.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"fetchData",value:function(e){var t=null;if(void 0!==e.xAxis)t=e.xAxis.data;else{t=[];for(var n=0;n<e.series[0].data.length;n++)t.push(n+1)}var a=[],r={},i=[];i.push("x");for(var s=0;s<e.series.length;s++)i.push(e.series[s].label.toString());for(var o=0;o<t.length;o++){var l={};l.x=t[o];for(var c=0;c<e.series.length;c++){var u=e.series[c],d=u.label.toString();l[d]=u.data[o],l[d+"_caveat"]=!u.caveats||u.caveats[o]}a.push(l)}var h=a.sort((function(e,t){return e.x-t.x}));return r.labels=i,r.values=h,r}},{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.identifier,r=e.onSelectCell;if(0===t.series.length)return null;for(var i=this.state,s=i.chartType,o=i.grouped,l=i.width,c=this.fetchData(t),u=this.selectedReCharts(s,c,o,l),d=[],h=0;h<this.props.charts.length;h++)d.push({key:h,text:this.props.charts[h],value:this.props.charts[h]});var p=null;return t.series.length>1&&(p=Object(a.jsx)("td",{className:"plot-form-check",children:Object(a.jsx)(yi.a,{checked:o,label:"Grouped",onChange:this.handleToggleGrouped})})),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"plot-menu",children:Object(a.jsx)("table",{className:"plot-form-table",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"plot-form-label",onClick:r,children:"Charts"}),Object(a.jsx)("td",{className:"plot-form-dropdown",children:Object(a.jsx)(Hr.a,{text:s,selection:!0,fluid:!0,scrolling:!0,options:d,onChange:this.handleSelectChart})}),p]})})})}),Object(a.jsx)("div",{id:n,className:"plot-view",onClick:r,children:Object(a.jsx)("div",{children:u})})]})}}]),n}(i.a.Component)),Js=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y;return!1===e.caveats[e.index]?Object(a.jsx)("svg",{x:t-6,y:n-6,width:14,height:14,fill:"red",viewBox:"0 0 14 14",children:Object(a.jsx)("text",{x:0,y:0,dy:14,fontSize:16,children:"*"})}):Object(a.jsx)("text",{})}}]),n}(r.PureComponent);qs.defaultProps={x:0,y:0,gridList_cellHeight:400,gridList_width:1e3,gridList_height:450,gridLis_overflowY:"auto",colorText:"black",charts:["Area Chart","Bar Chart","Line Chart","Scatter Plot","Pie Chart","Donut Chart","Radar Chart","Radial Bar Chart","Treemap"]};var Ks=qs,Gs=n(547),Ws=n.n(Gs),Ys=n(548),Qs=n.n(Ys),Zs=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).generatePDF=function(){var t="plot_"+e.props.identifier,n=document.getElementById(t);Ws()(n).then((function(e){var n=e.toDataURL("image/png"),a=new Qs.a({orientation:"landscape",unit:"in"});a.addImage(n,"JPEG",0,0),a.save(t+".pdf")}))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.identifier,r=e.onSelectCell,i="plot_"+n;return void 0!==t?Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"output-header",onClick:r,children:Object(a.jsx)("span",{className:"header-name",children:n})}),Object(a.jsx)("div",{className:"plot",children:Object(a.jsx)(Ks,{identifier:i,dataset:t,onSelectCell:r},n)}),Object(a.jsx)("div",{className:"chart-download-btn",children:Object(a.jsxs)(sr.a,{size:"small",color:"green",onClick:this.generatePDF,children:[Object(a.jsx)(br.a,{name:"download"}),"Download Chart"]})})]}):null}}]),n}(i.a.Component),Xs=(n(92),"spreadsheet_input_ctrl"),$s=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).onKeyDown=function(e){var t=a.props,n=t.cellValue,r=t.onMove,i=t.onUpdate,s=e.ctrlKey,o=e.keyCode,l=e.shiftKey;if(o===_t)e.preventDefault(),r(Vt);else if(o===Ut)e.preventDefault(),r(l?Bt:Ht);else if(o===Ft)e.preventDefault(),r(zt);else if(o===Tt)e.preventDefault(),r(Vt);else if(o===Lt){e.preventDefault();var c=Zt(n,"");a.setState({value:c},(function(){return a.setFocus(c)})),i(c)}else s&&o===Mt&&(e.preventDefault(),a.setState({value:"",isNull:!0}),i(null))},a.onChange=function(e){var t=a.props.onUpdate,n=e.target.value;a.setState({value:n}),t(n)};var r=e.cellValue;return a.state={value:Zt(r,"")},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this.state.value;this.setFocus(e)}},{key:"setFocus",value:function(e){var t=document.getElementById(Xs);t.focus(),t.setSelectionRange(0,e.toString().length)}},{key:"render",value:function(){var e=this.state.value;return Object(a.jsx)("input",{className:"spreadsheet-input",id:Xs,value:e,onKeyDown:this.onKeyDown,onChange:this.onChange})}}]),n}(i.a.Component),eo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=e.props.onUpdate;null!=n&&n(t)},e.handleClick=function(){var t=e.props,n=t.column,a=t.columnIndex,r=t.rowId,i=t.rowIndex,s=t.onClick;null!=s&&s(n.id,r,a,i)},e.handleMove=function(t){var n=e.props.onMove;null!=n&&n(t)},e.handleFetchAnnotations=function(){var t=e.props,n=t.columnIndex,a=t.rowId,r=t.onFetchAnnotations;null!=r&&r(n,a)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hasAnnotations,n=e.isActive,r=e.isUpdating,i=e.value,s=e.onUpdate,o="grid-cell",l=null;n?o+=" active":r&&(o+=" updating"),t&&(o+=" highlight",l=Object(a.jsx)(br.a,{className:"icon-button annotations-icon",title:"Caveats",name:"question circle outline",onClick:this.handleFetchAnnotations}));var c=null,u=null;return u=null==i?"":i.toString(),n&&null!=s?c=Object(a.jsx)($s,{cellValue:u,onMove:this.handleMove,onUpdate:this.handleChange}):(null==i&&(o+="  is-null"),c=Object(a.jsx)("div",{className:"cell-value",onClick:this.handleClick,children:u})),Object(a.jsxs)("td",{className:o,children:[l,c]})}}]),n}(i.a.Component);eo.defaultProps={isActive:!1,isUpdating:!1};var to=eo,no=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).deleteRow=function(){var t=e.props,n=t.rowId;(0,t.onAction)(he,n)},e.insertRowAbove=function(){var t=e.props,n=t.rowIndex;(0,t.onAction)(me,n)},e.insertRowBelow=function(){var t=e.props,n=t.rowIndex;(0,t.onAction)(me,n+1)},e.moveRow=function(){var t=e.props,n=t.rowId;(0,t.onAction)(ve,n)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.disabled;return Object(a.jsx)(Hr.a,{disabled:e,floating:!0,children:Object(a.jsxs)(Hr.a.Menu,{children:[Object(a.jsx)(Hr.a.Item,{icon:"arrow up",content:"Insert row above",onClick:this.insertRowAbove}),Object(a.jsx)(Hr.a.Item,{icon:"arrow down",content:"Insert row below",onClick:this.insertRowBelow}),Object(a.jsx)(Hr.a.Item,{icon:"trash",content:"Delete row",onClick:this.deleteRow}),Object(a.jsx)(Hr.a.Item,{icon:"move",content:"Move row",onClick:this.moveRow})]})})}}]),n}(i.a.Component),ao=n(97),ro=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleMoveDropBefore=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(ve,parseInt(t["row-index-cell"],10),parseInt(r,10))},e.handleMoveDropAfter=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(ve,parseInt(t["row-index-cell"],10),parseInt(r,10))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.rowIndex,r=e.rowId,i=e.value,s=e.onAction,o=e.onClick,l=e.isSpreadsheet,c=null,u="none",d=null,h=null;return null!=s&&(c=Object(a.jsx)(no,{disabled:t,rowId:r,rowIndex:n,onAction:s},r)),-1!==n&&l&&(u="row-index-cell",d=Object(a.jsx)(ao.Droppable,{types:[u],data:n,onDrop:this.handleMoveDropBefore,children:Object(a.jsx)("div",{className:"row-drop-before",children:Object(a.jsx)(br.a,{className:"icon-button row-index-drop-target",title:"<- Move Row Drop",name:"bullseye"})})}),h=Object(a.jsx)(ao.Droppable,{types:[u],data:n,onDrop:this.handleMoveDropAfter,children:Object(a.jsx)("div",{className:"row-drop-after",children:Object(a.jsx)(br.a,{className:"icon-button row-index-drop-target",title:"Move Row Drop ->",name:"bullseye"})})})),Object(a.jsx)("td",{className:"grid-row-index",onClick:o,children:Object(a.jsxs)("div",{children:[d,Object(a.jsx)("div",{className:"row-index-content",children:i}),c,h]})})}}]),n}(i.a.Component);ro.defaultProps={disabled:!1,rowIndex:-1};var io=ro,so=n(1399),oo=n(159),lo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCopy=function(){var t=e.props.dataset.links.get(X),n=document.createElement("textarea");n.innerText=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),n.remove()},e.handleDownload=function(){var t=e.props,n=t.dataset,a=t.downloadLimit;if(n.rowCount<=a){var r=n.links.get(X);window.open(r)}},e.handleEditSpreadsheet=function(){var t=e.props,n=t.dataset;(0,t.onEditSpreadsheet)(n,t.moduleId)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.dataset,n=e.downloadLimit,r=e.onRecommendAction,s=Object(a.jsx)(so.a,{trigger:Object(a.jsx)(Hr.a.Item,{icon:"download",text:"Download File",title:"Download dataset as CSV file",onClick:this.handleDownload},"download"),on:"click",disabled:t.rowCount<=n,hoverable:!0,basic:!0,children:Object(a.jsx)(Fr.a,{centered:!0,children:Object(a.jsxs)(oo.a,{textAlign:"center",children:[Object(a.jsx)(Ar.a,{as:"h4",icon:!0,textAlign:"center",children:Object(a.jsx)(br.a,{name:"times circle"})}),Object(a.jsx)("p",{children:"The dataset exceeds the allowed limit of "+n+" rows. It is recommended to export large datasets using the Unload Cell."}),Object(a.jsx)(sr.a,{color:"blue",content:"Unload",onClick:function(){return r("data","unload")}})]})})});return Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(Hr.a,{icon:"download",title:"Download dataset",children:Object(a.jsxs)(Hr.a.Menu,{children:[s,Object(a.jsx)(Hr.a.Item,{icon:"linkify",text:"Copy URL to Clipboard",title:"Copy shareable dataset URL to clipboard",onClick:this.handleCopy},"copy-link"),Object(a.jsx)(Hr.a.Item,{icon:"edit",text:"Edit as Spreadsheet",title:"Open spreadsheet view to edit the dataset",onClick:this.handleEditSpreadsheet},"edit")]})})})}}]),n}(i.a.Component),co=(n(1275),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.icon,r=e.title,i="scroll-icon",s=this.props.onClick;return t||(i+="-disabled",s=null),Object(a.jsx)("div",{className:i,children:Object(a.jsx)(br.a,{disabled:!t,name:n,onClick:s,size:"small",title:r})})}}]),n}(i.a.Component)),uo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleNavigateFirstPage=function(){var e=a.props,t=e.dataset;(0,e.onNavigate)(t,0,a.state.limit)},a.handleNavigateLastPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state;n(t,r.maxValue,r.limit)},a.handleNavigateNextPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state,i=r.maxValue,s=r.limit,o=t.offset;n(t,Math.min(i,o+s),s)},a.handleNavigateNextRow=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=a.state,i=r.maxValue,s=r.limit,o=t.offset;n(t,Math.min(i,o+1),s)},a.handleNavigatePreviousPage=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=t.offset,i=a.state.limit;n(t,Math.max(0,r-i),i)},a.handleNavigatePreviousRow=function(){var e=a.props,t=e.dataset,n=e.onNavigate,r=t.offset;n(t,Math.max(0,r-1),a.state.limit)};var r=e.dataset,i=e.cellLimit;return a.state={limit:i,maxValue:Math.max(0,r.rowCount-i)},a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.dataset,i=a.cellLimit,s=this.state,o=s.limit,l=s.maxValue,c=Math.max(0,r.rowCount-i);o===i&&l===c||this.setState({limit:i,maxValue:Math.max(0,r.rowCount-i)})}},{key:"render",value:function(){var e=this.props.dataset.offset,t=0!==e,n=e<this.state.maxValue,r=null;return(t||n)&&(r=Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"vertical-scroll-top",children:[Object(a.jsx)(co,{enabled:t,icon:"arrow up",onClick:this.handleNavigateFirstPage,title:"First page"}),Object(a.jsx)(co,{enabled:t,icon:"angle double up",onClick:this.handleNavigatePreviousPage,title:"Previous page"}),Object(a.jsx)(co,{enabled:t,icon:"caret up",title:"Previous row",onClick:this.handleNavigatePreviousRow})]}),Object(a.jsxs)("div",{className:"vertical-scroll-down",children:[Object(a.jsx)(co,{enabled:n,icon:"caret down",title:"Next row",onClick:this.handleNavigateNextRow}),Object(a.jsx)(co,{enabled:n,icon:"angle double down",title:"Next page",onClick:this.handleNavigateNextPage}),Object(a.jsx)(co,{enabled:n,icon:"arrow down",onClick:this.handleNavigateLastPage,title:"Last page"})]})]})),Object(a.jsx)("div",{className:"vertical-scroll",children:r})}}]),n}(i.a.Component),ho=n(1403),po=n(249),jo=n(250);function mo(){var e=Object(po.a)(["\n  text-align: center;\n"]);return mo=function(){return e},e}var bo=jo.a.div(mo()),fo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.column,r=t.profiledData,i=t.isLoadingPlot,s=void 0,o=Object(mi.a)(r.columns);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(l.column.id===n.id){s=l;break}}}catch(c){o.e(c)}finally{o.f()}return Object(a.jsx)("div",{children:s?Object(a.jsx)(bo,{children:Object(a.jsxs)(Hs.d,{width:250,height:180,data:s.values,children:[Object(a.jsx)(Hs.f,{strokeDasharray:"3 3"}),Object(a.jsx)(Hs.x,{dataKey:"name"}),Object(a.jsx)(Hs.y,{}),Object(a.jsx)(Hs.v,{}),Object(a.jsx)(Hs.h,{}),Object(a.jsx)(Hs.c,{dataKey:"count",fill:"steelblue"})]})}):i?Object(a.jsx)(or.a,{active:!0,inline:"centered",content:"Loading"}):Object(a.jsx)("p",{})})}}]),n}(i.a.Component),vo=n(1396);function Oo(){var e=Object(po.a)(["\n  text-align: center;\n"]);return Oo=function(){return e},e}jo.a.div(Oo());function go(e){var t={field:"count",type:"quantitative",title:null};return"histogram_numerical"===e?{y:t,x:{title:null,bin:{binned:!0},field:"bin_start",type:"quantitative"},x2:{field:"bin_end"},tooltip:[{field:"bin_start",title:"start",type:"quantitative"},{field:"bin_end",title:"end",type:"quantitative"}]}:"histogram_temporal"===e?{y:t,x:{title:null,bin:{binned:!0},field:"date_start",type:"temporal",utc:!0},x2:{field:"date_end"},tooltip:[{field:"date_start",title:"start",type:"temporal"},{field:"date_end",title:"end",type:"temporal"}]}:"histogram_categorical"===e?{y:t,x:{title:null,field:"bin",type:"ordinal",sort:{order:"descending",field:"count"}},tooltip:{field:"bin",type:"ordinal"}}:"histogram_text"===e?{y:{field:"bin",type:"ordinal",title:null},x:{title:null,field:"count",type:"quantitative",sort:{order:"descending",field:"count"}},tooltip:[{field:"bin",type:"ordinal"},{field:"count",type:"quantitative"}]}:void console.log("Unknown plot type ",e)}var xo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.column,r=t.profiledData,i=t.isLoadingPlot,s=void 0,o=!1,l=Object(mi.a)(r.columns);try{for(l.s();!(e=l.n()).done;){var c=e.value;if(c.name===n.name){s=c.plot,o=!0;break}}}catch(h){l.e(h)}finally{l.f()}var u,d=Object(a.jsx)("p",{className:"small text-muted",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell"},children:"Nothing to show."});return Object(a.jsx)("div",{children:s?Object(a.jsx)(vo.a,{spec:(u=s.type,{width:"120",height:"120",data:{name:"values"},config:{background:null,axis:{domainColor:"darkslategray"},axisX:{labels:!1,ticks:!1}},description:"A simple bar chart with embedded data.",encoding:go(u),mark:"bar"}),data:{values:s.data}}):i&&!o?Object(a.jsx)(or.a,{active:!0,inline:"centered",content:"Loading"}):Object(a.jsx)("div",{style:{width:100,height:145,display:"table"},children:d})})}}]),n}(i.a.Component),Co=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.column,n=e.profiledData,r=e.isLoadingPlot,i=n.is_profiled[0];return"mimir"===i?Object(a.jsx)(fo,{column:t,profiledData:n,isLoadingPlot:r}):"datamart_profiler"===i?Object(a.jsx)(xo,{column:t,profiledData:n,isLoadingPlot:r}):void 0}}]),n}(i.a.Component);function wo(e){for(var t=e.dataset,n=t.properties,r=t.columns,i=n.is_profiled[0],s=[Object(a.jsx)(io,{value:" "},-1)],o=0;o<r.length;o++){var l,c=r[o],u=[{}],d=Object(mi.a)(n.columns);try{for(d.s();!(l=d.n()).done;){var h=l.value;if("mimir"===i&&h.column.id===c.id){u=h;break}if("datamart_profiler"===i&&h.name===c.name){u=h;break}}}catch(p){d.e(p)}finally{d.f()}s.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{width:"20%"},children:Object(a.jsxs)("h4",{children:[" ",c.name," "]})},"rows_"+c.name),Object(a.jsx)("td",{style:{width:"15%"},children:Object(a.jsx)("button",{className:"btn btn-secondary float-right",disabled:!0,style:{backgroundColor:"#e3e3e3",borderColor:"#cfcfcf",borderRadius:"4px"},children:c.type})},"rows_cf"+c.name),Object(a.jsx)("td",{style:{width:"30%"},children:Object(a.jsx)("div",{className:"card mb-4",style:{overflow:"auto"},children:t&&t.isProfiled()&&Object(a.jsx)(Co,{column:c,profiledData:n,isLoadingPlot:!0})})},c.name),Object(a.jsx)("td",{style:{width:"35%"},children:"string"===c.type||"varchar"===c.type||"categorical"===c.type||"boolean"===c.type?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("ul",{style:{listStyle:"none",columnCount:2,columnGap:10},children:[null!=u.distinctValueCount&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.count&&Object(a.jsx)("li",{children:"Total Values"}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:u.distinctValueCount}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:u.num_distinct_values}),null!=u.count&&Object(a.jsx)("li",{children:u.count})]})}):u?Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("ul",{style:{listStyle:"none",columnCount:2,columnGap:10},children:[null!=u.max&&Object(a.jsx)("li",{children:"Maximum"}),null!=u.min&&Object(a.jsx)("li",{children:"Minimum"}),null!=u.mean&&Object(a.jsx)("li",{children:"Mean"}),null!=u.stdDev&&Object(a.jsx)("li",{children:"Std Deviation"}),null!=u.sum&&Object(a.jsx)("li",{children:"Sum"}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:"Unique Values"}),null!=u.count&&Object(a.jsx)("li",{children:"Total Values"}),null!=u.max&&Object(a.jsx)("li",{children:u.max}),null!=u.min&&Object(a.jsx)("li",{children:u.min}),null!=u.mean&&Object(a.jsx)("li",{children:u.mean.toFixed(2)}),null!=u.stdDev&&Object(a.jsx)("li",{children:u.stdDev.toFixed(2)}),null!=u.sum&&Object(a.jsx)("li",{children:u.sum.toFixed(2)}),null!=u.distinctValueCount&&Object(a.jsx)("li",{children:u.distinctValueCount}),null!=u.num_distinct_values&&Object(a.jsx)("li",{children:u.num_distinct_values}),null!=u.count&&Object(a.jsx)("li",{children:u.count})]})}):Object(a.jsx)("div",{})},"rows_"+c.name)]},"rowse_"+c.id))}return s=Object(a.jsx)("tbody",{children:s}),Object(a.jsx)("div",{style:{maxHeight:400,minHeight:400,overflow:"auto"},children:Object(a.jsx)(ho.a,{children:s})})}var ko=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).deleteColumn=function(){var t=e.props,n=t.columnId;(0,t.onAction)(de,n)},e.insertColumnLeft=function(){var t=e.props,n=t.columnIndex;(0,t.onAction)(je,n)},e.insertColumnRight=function(){var t=e.props,n=t.columnIndex;(0,t.onAction)(je,n+1)},e.moveColumn=function(){var t=e.props,n=t.columnId;(0,t.onAction)(fe,n)},e.sortAZ=function(){var t=e.props,n=t.columnId;(0,t.onAction)(xe,n,ke)},e.sortZA=function(){var t=e.props,n=t.columnId;(0,t.onAction)(xe,n,ye)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.disabled;return Object(a.jsx)(Hr.a,{disabled:e,floating:!0,children:Object(a.jsxs)(Hr.a.Menu,{children:[Object(a.jsx)(Hr.a.Item,{icon:"arrow left",content:"Insert column to left",onClick:this.insertColumnLeft}),Object(a.jsx)(Hr.a.Item,{icon:"arrow right",content:"Insert column to right",onClick:this.insertColumnRight}),Object(a.jsx)(Hr.a.Item,{icon:"trash",content:"Delete column",onClick:this.deleteColumn}),Object(a.jsx)(Hr.a.Item,{icon:"move",content:"Move column",onClick:this.moveColumn}),Object(a.jsx)(Hr.a.Divider,{}),Object(a.jsx)(Hr.a.Item,{icon:"sort alphabet down",content:"Sort A-Z",onClick:this.sortAZ}),Object(a.jsx)(Hr.a.Item,{icon:"sort alphabet up",content:"Sort Z-A",onClick:this.sortZA})]})})}}]),n}(i.a.Component),yo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){var n=e.props.onUpdate;null!=n&&n(t)},e.handleClick=function(){var t=e.props,n=t.column,a=t.columnIndex,r=t.onClick;null!=r&&r(n.id,-1,a,-1)},e.handleMove=function(t){var n=e.props.onMove;null!=n&&(t===Bt||t===zt?n(Bt):t!==Ht&&t!==Vt||n(Ht))},e.handleMoveDropBefore=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(fe,parseInt(t["header-cell"],10),parseInt(r,10))},e.handleMoveDropAfter=function(t,n){var a=e.props.onMoveAction,r=n.currentTarget.attributes.data.value;a(fe,parseInt(t["header-cell"],10),parseInt(r,10))},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isActive,r=e.isUpdating,i=e.column,s=e.columnIndex,o=e.value,l=e.onAction,c=e.isEditing,u=e.isSpreadsheet,d=null;d=null!=o?o:i.name;var h="grid-header",p=null,j="none",m=null,b=null,f=null;return n?(h+=" active",p=Object(a.jsx)($s,{cellValue:i.name,onMove:this.handleMove,onUpdate:this.handleChange})):(l&&(f=Object(a.jsx)(ko,{columnId:i.id,columnIndex:s,disabled:t,onAction:l})),r&&(h+=" updating"),c&&u&&(j="header-cell",m=Object(a.jsx)(ao.Droppable,{types:[j],data:s,onDrop:this.handleMoveDropBefore,children:Object(a.jsx)("div",{className:"drop-before",children:Object(a.jsx)(br.a,{className:"icon-button header-drop-target",title:"<- Move Colum Drop",name:"bullseye"})})}),b=Object(a.jsx)(ao.Droppable,{types:[j],data:s,onDrop:this.handleMoveDropAfter,children:Object(a.jsx)("div",{className:"drop-after",children:Object(a.jsx)(br.a,{className:"icon-button header-drop-target",title:"Move Column Drop ->",name:"bullseye"})})})),p=Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"header-value",children:d}),Object(a.jsx)(hi.a,{size:"mini",children:"(".concat(i.type,")")}),Object(a.jsx)("div",{children:this.props.isLoadingPlot&&this.props.dataset&&this.props.dataset.isProfiled()&&Object(a.jsx)(Co,{column:i,profiledData:this.props.profiledData,isLoadingPlot:this.props.isLoadingPlot})})]})),Object(a.jsxs)(ao.Draggable,{type:"header-cell",data:s,wrapperComponent:Object(a.jsx)("th",{}),className:h,onClick:this.handleClick,children:[m,b,p,f]})}}]),n}(i.a.Component);yo.defaultProps={disabled:!1,isActive:!1,isUpdating:!1};var So=yo,No=(n(506),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props.dataset,t=e.properties,n=e.columns,r=[Object(a.jsx)(io,{rowIndex:-1,value:" "},-1)],i=0;i<n.length;i++){var s=n[i];r.push(Object(a.jsx)(So,{dataset:e,column:s,columnIndex:i,profiledData:t,isLoadingPlot:this.props.isLoadingPlot},s.id))}return r=Object(a.jsx)("tr",{children:r}),Object(a.jsx)("thead",{children:r})}}]),n}(i.a.Component)),Eo=n(86),Ao=n.n(Eo),Io=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleSelectCell=function(e,t){a.setState({column:e,row:t})},a.updateTypeView=function(e){1!==e&&(a.props.dataset.isProfiled()||a.handleRequestProfiler(!0)),a.setState({typeView:e})},a.handleRequestProfiler=function(e){if(e){var t=a.props,n=t.dataset,r=t.onNavigate,i=t.userSettings;r(n,n.offset,i.cellRowLimit(),e)}},a.state={column:-1,row:-1,typeView:1},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({column:-1,row:-1,typeView:1})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props.dataset;e.dataset.id!==a.id?this.setState({column:-1,row:-1,typeView:1}):a.isProfiled()&&!e.dataset.isProfiled()?(Ao.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},setTimeout((function(){return Ao.a.success("Detailed and Column views are now available for the ".concat(a.name," dataset."))}),300)):!a.isProfiled()&&e.dataset.isProfiled()&&this.setState({typeView:1})}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.dataset,r=t.onFetchAnnotations,i=t.onNavigate,s=t.onSelectCell,o=t.userSettings,l=t.onEditSpreadsheet,c=t.moduleId,u=t.downloadLimit,d=t.onRecommendAction,h=this.state,p=Object(a.jsxs)("div",{className:"output-header",onClick:s,children:[Object(a.jsx)("span",{className:"header-name",children:n.name}),Object(a.jsx)("span",{children:" ("}),Object(a.jsx)("span",{className:"number-highlight",children:n.rowCount}),Object(a.jsx)("span",{className:"right-padding-md",children:" rows)"}),Object(a.jsx)(lo,{dataset:n,onEditSpreadsheet:l,moduleId:c,downloadLimit:u,onRecommendAction:d})]}),j=n.columns,m=[Object(a.jsx)(io,{rowId:"-1",rowIndex:-1,value:" "},-1)],b=0;b<j.length;b++){var f=j[b];m.push(Object(a.jsx)(So,{column:f,columnIndex:b,summaryPlot:2===this.state.typeView},f.id))}m=Object(a.jsx)("tr",{children:m});for(var v=n.offset,O=[],g=function(t){for(var i=n.rows[t],s=[Object(a.jsx)(io,{rowId:i.id,rowIndex:t+v,value:t+v},i.id)],o=function(o){var l=j[o],c=h.column===l.id&&h.row===i.id;s.push(Object(a.jsx)(to,{column:l,columnIndex:o,hasAnnotations:n.hasAnnotations(l.id,i.id),isActive:c,rowId:i.id,rowIndex:t,value:i.values[o],onClick:function(){return e.handleSelectCell(l.id,i.id)},onFetchAnnotations:r},"C"+l.id+"R"+i.id))},l=0;l<j.length;l++)o(l);O.push(Object(a.jsx)("tr",{children:s},i.id))},x=0;x<n.rows.length;x++)g(x);var C=3!==this.state.typeView?Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsx)("div",{className:"spreadsheet-table-container",children:Object(a.jsxs)("table",{className:"spreadsheet",children:[1===this.state.typeView?Object(a.jsx)(No,{dataset:n,isLoadingPlot:!1}):Object(a.jsx)(No,{dataset:n,isLoadingPlot:!0}),Object(a.jsx)("tbody",{children:O})]})}),Object(a.jsx)(uo,{dataset:n,onNavigate:i,cellLimit:o.cellRowLimit()})]}):n.isProfiled()?Object(a.jsx)(wo,{dataset:n}):Object(a.jsx)(or.a,{active:!0,inline:"centered",content:"Loading"});return Object(a.jsxs)("div",{children:[p,Object(a.jsxs)(sr.a.Group,{floated:"right",size:"mini",style:{marginTop:"-20px"},children:[Object(a.jsx)(hi.a,{basic:!0,pointing:"right",size:"mini",children:"Views"}),Object(a.jsx)(so.a,{content:"Compact view",trigger:Object(a.jsx)(sr.a,{icon:!0,onClick:function(){return e.updateTypeView(1)},children:Object(a.jsx)(br.a,{name:"compress"})})}),Object(a.jsx)(so.a,{content:"Detail view",trigger:Object(a.jsx)(sr.a,{icon:!0,onClick:function(){return e.updateTypeView(2)},children:Object(a.jsx)(br.a,{name:"chart bar outline"})})}),Object(a.jsx)(so.a,{content:"Column view",trigger:Object(a.jsx)(sr.a,{icon:!0,onClick:function(){return e.updateTypeView(3)},children:Object(a.jsx)(br.a,{name:"columns"})})})]}),Object(a.jsx)("br",{}),C]})}}]),n}(i.a.Component);Io.getDerivedStateFromProps=function(e,t){return e.dataset.isProfiled(),null};var Do=Io,Po=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.time;return null!=n?Object(a.jsxs)("pre",{className:"plain-text",children:[Object(a.jsx)("span",{className:"info-bold",children:t+" "}),n]}):null}}]),n}(i.a.Component),Ro=n(559),To=n.n(Ro),_o=n(558),Lo=n.n(_o),Mo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={activeTab:null,resourceName:null,isFetching:!1,hide:!1},e.handleDiscardAnnotation=function(){e.handleSelectCell(-1,-1)},e.handleOutputDismiss=function(){var t=e.props,n=t.cell;(0,t.onOutputSelect)(n.module,e.state.activeTab,e.state.resourceName)},e.handleFetchAnnotations=function(t,n){var a=e.props,r=a.cell,i=a.onFetchAnnotations,s=r.output;i(r.module,s.dataset,t,n)},e.handleConsoleDownload=function(){var t=e.props.cell,n=e.state.resourceName,a=document.createElement("a"),r=e.getConsoleOutputs(t.module.outputs.stdout).outputs,i=new Blob([JSON.stringify(r[n],null,2)],{type:"text/plain"});a.href=URL.createObjectURL(i),a.download=t.id,document.body.appendChild(a),a.click()},e.fetchData=function(){var t=e.props,n=t.cell,a=t.onOutputSelect,r=e.state,i=r.activeTab,s=r.resourceName;a(n.module,i,s)},e.handleItemClick=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.setState({isFetching:r,resourceName:a,activeTab:n,hide:n===ct},(function(){return e.fetchData()}))},e.handleCopyEmbedClick=function(t){var n=e.props.cell,a='<iframe width="400" height="400" frameBorder="0" scrolling="no" src="'+window.location+"/?cell-output="+n.id+'"></iframe>',r=document.createElement("textarea");r.innerHTML=a,document.body.appendChild(r),r.select();var i=document.execCommand("copy");document.body.removeChild(r),Ao.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},i?(console.log("copied embed code of output for cell "+n.id+" to clipboard"),setTimeout((function(){return Ao.a.success("Embed code copied!")}),300)):(console.log("error copying embed code of output for cell "+n.id+" to clipboard"),setTimeout((function(){return Ao.a.error("Embed code copy failed!")}),300))},e.handleCopyURLClick=function(t){var n=e.props.cell,a=window.location+"/?cell-output="+n.id,r=document.createElement("textarea");r.innerHTML=a,document.body.appendChild(r),r.select();var i=document.execCommand("copy");document.body.removeChild(r),Ao.a.options={positionClass:"toast-top-full-width",hideDuration:300,timeOut:5e3},i?(console.log("copied url of output for cell "+n.id+" to clipboard"),setTimeout((function(){return Ao.a.success("Output URL copied!")}),300)):(console.log("error copying url of output for cell "+n.id+" to clipboard"),setTimeout((function(){return Ao.a.success("Output URL copy failed!")}),300))},e.getConsoleOutputs=function(t){var n={},r={},i=e.props,s=i.cell,o=i.onSelectCell;if(t.hasOwnProperty("isMultiple")&&!t.isMultiple())switch(t.type){case ut:n["text/plain"]=t.lines.join("\n");break;case ot:n["text/html"]=t.lines.join("\n");break;case lt:n["text/markdown"]=t.lines.join("\n");break;default:n["text/plain"]=t.lines.join("\n")}else n=s.output.outputs;var l=function(t){if("text/html"===t){var i=Ms()({displayName:"Response",render:function(){return Object(a.jsx)("div",{className:"output-content-html",dangerouslySetInnerHTML:{__html:n[t]}})}});r[t]=Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(i,{})})}else r[t]="text/markdown"===t?Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(Us.a,{plugins:[Lo.a],source:n[t]})}):"text/plain"===t?Object(a.jsx)("pre",{className:"plain-text",onClick:o,children:n[t]}):"dataset/view"===t?e.getDatasetView(s.id,n[t]):"chart/view"===t?e.getChartView(n[t].data.name,n[t].result):Object(a.jsx)("pre",{className:"plain-text",onClick:o,children:JSON.stringify(n[t],null,2)})};for(var c in n)l(c);return{outputs:n,renders:r}},e.getDatasetView=function(t,n){var r=e.props,i=r.onSelectCell,s=r.datasets,o=r.onNavigateDataset,l=r.userSettings,c=r.onEditSpreadsheet,u=r.onRecommendAction,d=r.apiEngine;try{n.name=s[n.id].name}catch(h){}return Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(Do,{dataset:n,onNavigate:o,onFetchAnnotations:e.handleFetchAnnotations,onSelectCell:i,userSettings:l,onEditSpreadsheet:c,moduleId:t,downloadLimit:d.serviceProperties.maxDownloadRowLimit,onRecommendAction:u})})},e.getChartView=function(t,n){var r=e.props.onSelectCell;return Object(a.jsx)("div",{className:"output-content",children:Object(a.jsx)(Zs,{identifier:t,dataset:n,onSelectCell:r})})},e.getOutputContent=function(){var t=e.props,n=t.cell,r=t.onSelectCell,i=e.state.resourceName,s=n.output;if(s.isHidden()&&!n.isCanceled())return Object(a.jsx)("pre",{className:"plain-text",onClick:r});if(s.isTimestamps()){var o="";return o=n.isErrorOrCanceled()?"Canceled at":"Finished at",Object(a.jsxs)("div",{className:"module-timings",onClick:r,children:[Object(a.jsx)("p",{className:"output-info-headline",children:Object(a.jsx)("span",{className:"output-info-headline",children:"Module timings"})}),Object(a.jsx)(Po,{label:"Created at",time:s.createdAt}),Object(a.jsx)(Po,{label:"Started at",time:s.startedAt}),Object(a.jsx)(Po,{label:o,time:s.finishedAt})]})}if(s.isDataset())return e.getDatasetView(n.id,s.dataset);if(s.isChart())return e.getChartView(s.name,s.dataset);if(s.isError()){var l=s.error;return Object(a.jsx)(hr,{title:l.title,message:l.message,onDismiss:e.handleOutputDismiss})}if(n.isError()){var c=n.module.outputs.stderr;if(c.length>0){var u=new gt(c);return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"output-error",children:Object(a.jsx)("pre",{className:"error-text",onClick:r,children:u.lines.join("\n")})})})}}var d=e.getConsoleOutputs(s).renders,h=null;for(var p in d)i!==p&&"All"!==i||n.isCanceled()||(h=Object(a.jsxs)("div",{children:[h,null!==h&&Object(a.jsx)(To.a,{horizontal:!0}),d[p]]}));return Object(a.jsxs)("div",{className:"cell-command-area",children:[h,"All"!==i&&Object(a.jsx)("div",{className:"horizontal-divider",children:Object(a.jsx)(Nr,{text:"download",title:"Download console output",onClick:e.handleConsoleDownload})})]})},e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({activeTab:ut,resourceName:"All"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.cell,r=t.onCancelExec,i=t.onCheckStatus,s=t.isActive,o=n.output,l=null;if(null!=r)if(o.isError()){var c=o.error;l=Object(a.jsx)("div",{className:"output-error",children:Object(a.jsx)(hr,{title:c.title,message:c.message})})}else l=Object(a.jsx)(cr,{interval:1e3,onCancel:r,onFetch:i,resource:n,text:n.isRunning()?"Running ...":"Pending ..."});if(n.isRunning())return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"module-timings",children:[Object(a.jsx)(Po,{label:"Created at",time:n.module.timestamps.createdAt}),Object(a.jsx)(Po,{label:"Started at",time:n.module.timestamps.startedAt})]}),l]});if(n.isPending()||s)return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"module-timings",children:Object(a.jsx)(Po,{label:"Created at",time:n.module.timestamps.createdAt})}),l]});var u=[];if(n.module.datasets.length>0)for(var d=function(t){var r=n.module.datasets[t];u.push(Object(a.jsx)(Hr.a.Item,{icon:"table",text:r.name,title:r.name,disabled:e.state.resourceName===r.name&&n.output.isDataset(),onClick:function(){return e.handleItemClick({},it,r.name,!0)}},"ds-"+r.name))},h=0;h<n.module.datasets.length;h++)d(h);var p=[];if(n.module.charts.length>0)for(var j=function(t){var r=n.module.charts[t];p.push(Object(a.jsx)(Hr.a.Item,{icon:"bar chart",text:r.name,title:r.name,disabled:e.state.resourceName===r.name&&n.output.isChart(),onClick:function(){return e.handleItemClick({},rt,r.name,!0)}},"vw-"+r.name))},m=0;m<n.module.charts.length;m++)j(m);var b=n.module.outputs.stdout.map((function(e){return e.type})).filter((function(e,t,n){return n.indexOf(e)===t})),f=[];b.unshift("All");for(var v=function(t){f.push(Object(a.jsx)(Hr.a.Item,{icon:"circle",text:b[t],title:b[t],disabled:e.state.resourceName===b[t]&&e.state.activeTab===ut,onClick:function(){return e.handleItemClick({},ut,b[t],!1)}},"cl-"+b[t]))},O=0;O<b.length;O++)v(O);var g=this.state,x=g.activeTab,C=g.isFetching,w=null;return w=Tn()?null:Object(a.jsxs)(Vr.a,{children:[Object(a.jsx)(Vr.a.Item,{icon:"hide",title:"Hide output for this cell",disabled:this.state.hide,onClick:function(t){return e.handleItemClick(t,ct,null,!0)}}),Object(a.jsx)(Hr.a,{disabled:0===f.length,pointing:!0,text:"Console",className:"link item",children:Object(a.jsx)(Hr.a.Menu,{children:f})}),Object(a.jsx)(Vr.a.Item,{name:dt,active:x===dt,content:"Timing",disabled:this.state.activeTab===dt,onClick:function(t){return e.handleItemClick(t,dt,null,!0)}}),Object(a.jsx)(Hr.a,{disabled:0===u.length,pointing:!0,text:"Datasets",className:"link item",children:Object(a.jsx)(Hr.a.Menu,{children:u})}),Object(a.jsx)(Hr.a,{disabled:0===p.length,pointing:!0,text:"Charts",className:"link item",children:Object(a.jsx)(Hr.a.Menu,{children:p})}),Object(a.jsxs)("div",{className:"cell-output-links",children:[Object(a.jsx)(Vr.a.Item,{icon:"copy",title:"Copy Embed Code",disabled:!1,onClick:function(t){return e.handleCopyEmbedClick(t)}}),Object(a.jsx)(Vr.a.Item,{icon:"linkify",title:"Copy Output URL",disabled:!1,onClick:function(t){return e.handleCopyURLClick(t)}})]})]}),Object(a.jsxs)("div",{className:"output-area",children:[w,Object(a.jsx)("div",{className:"output-loading",children:Object(a.jsx)(or.a,{active:C,inline:!0,indeterminate:!0})}),!this.state.hide&&Object(a.jsx)(vi.a,{style:{overflow:"auto",maxHeight:2e3},children:!C&&this.getOutputContent()})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.cell.output,a=e.datasets;if(t.isFetching&&t.activeTab===n.type)if(t.activeTab===rt||t.activeTab===it){if(t.resourceName===n.dataset.name||t.resourceName===n.name||t.activeTab===it&&t.resourceName.toLowerCase()===a[n.dataset.id].name.toLowerCase())return{isFetching:!1}}else if(t.activeTab===ut||t.activeTab===ht||t.activeTab===ct||t.activeTab===dt)return{isFetching:!1};return{}}}]),n}(i.a.Component),Fo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleUpdateProgress=function(t){e.setState({moduleProgress:t})},e.state={moduleProgress:0,onUpdateProgress:e.onUpdateProgress},e.handleAddFilteredCommand=function(){var t=e.props,n=t.cell;(0,t.onAddFilteredCommand)(n.commandSpec)},e.handleCopyCell=function(){var t=e.props,n=t.cell;(0,t.onCopyCell)(n)},e.handleCreateBranch=function(){var t=e.props,n=t.cell;(0,t.onCreateBranch)(n.module)},e.handleDatasetNavigate=function(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e.props,s=i.cell,o=i.onDatasetNavigate;o(s.module,t,n,a,r)},e.handleDeleteCell=function(){var t=e.props,n=t.cell;(0,t.onDeleteCell)(n)},e.handleInsertCell=function(t){var n=e.props,a=n.cell,r=n.onInsertCell;n.userSettings.showNotebookReversed()?r(a,t===vn?On:vn):r(a,t)},e.handleRemoveFilteredCommand=function(){var t=e.props,n=t.cell;(0,t.onRemoveFilteredCommand)(n.commandSpec)},e.handleSelectCell=function(){var t=e.props,n=t.cell,a=t.isActiveCell,r=t.onSelect;a||n.isActive()||r(n)},e.handleFreezeCell=function(){var t=e.props,n=t.cell;(0,t.onFreezeCell)(n)},e.handleThawCell=function(){var t=e.props,n=t.cell;(0,t.onThawCell)(n)},e.handleRecommendAction=function(t,n){var a=e.props,r=a.cell;(0,a.onRecommendAction)(t,n,r)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.apiEngine,n=e.cell,r=e.cellNumber,i=e.datasets,s=e.isActiveCell,o=e.isNewNext,l=e.isNewPrevious,c=e.notebook,u=e.onCancelExec,d=e.onCheckStatus,h=e.onDismissCell,p=e.onFetchAnnotations,j=e.onOutputSelect,m=e.onSubmitCell,b=e.userSettings,f=e.onEditSpreadsheet,v=e.onResetRecommendations,O=null,g=null,x=null;if(n.isNewCell())O="*";else{var C=n.commandSpec;if(!n.isActive()&&b.isFiltered(C)){var w="",k=null;return n.isErrorOrCanceled()&&(w=" collapsed-error-cell",n.isCanceled()?k=Object(a.jsx)(br.a,{name:"cancel",color:"red",title:"Canceled"}):n.isError()&&(k=Object(a.jsx)(br.a,{name:"warning circle",color:"red",title:"Error"}))),b.hideFilteredCommands()?null:Object(a.jsxs)("div",{className:"horizontal-divider"+w,children:[k,Object(a.jsx)(Nr,{css:"code-text",text:C.name,title:"Show cells of this type",onClick:this.handleRemoveFilteredCommand})]})}O=r;var y=o,S=l;b.showNotebookReversed()&&(y=l,S=o),g=Object(a.jsx)(_s,{cell:n,cellNumber:r,isActiveCell:s,isNewNext:y,isNewPrevious:S,notebook:c,onAddFilteredCommand:this.handleAddFilteredCommand,onCopyCell:this.handleCopyCell,onCreateBranch:this.handleCreateBranch,onDeleteCell:this.handleDeleteCell,onInsertCell:this.handleInsertCell,onSelectCell:this.handleSelectCell,onFreezeCell:this.handleFreezeCell,onThawCell:this.handleThawCell}),x=Object(a.jsx)(Mo,{cell:n,datasets:c.datasets,onCancelExec:u,onCheckStatus:d,onFetchAnnotations:p,onNavigateDataset:this.handleDatasetNavigate,onOutputSelect:j,onSelectCell:this.handleSelectCell,userSettings:b,onEditSpreadsheet:f,onRecommendAction:this.handleRecommendAction,apiEngine:t})}var N=Object(a.jsx)(Ts,{apiEngine:t,datasets:i,cell:n,isActiveCell:s&&!c.readOnly,onClick:this.handleSelectCell,onDismiss:h,onSelectCell:this.handleSelectCell,onSubmit:m,userSettings:b,onResetRecommendations:v,onUpdateProgress:this.handleUpdateProgress}),E=s?"cell active-cell":"cell inactive-cell",A="";return n.isErrorOrCanceled()?A=" error-cell":n.isRunning()?A=" running-cell":n.isPending()?A=" pending-cell":n.isFrozen()&&(A=" frozen-cell"),Object(a.jsx)(Bi.Provider,{value:this.state,children:Object(a.jsx)("table",{className:E+A,children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"cell-index"+A,onClick:this.handleSelectCell,children:[Object(a.jsx)("a",{id:"cell-"+O,children:Object(a.jsxs)("p",{className:"cell-index"+A,children:["[",O,"]"]})}),g]}),Object(a.jsxs)("td",{className:"cell-area"+A,children:[N,x]})]})})})})}}]),n}(i.a.Component),Uo=(n(1361),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={active:!1},e.toggleState=function(){e.setState({active:!e.state.active})},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this.props.contents,n=this.state.active,r=[],i=Object(mi.a)(t);try{for(i.s();!(e=i.n()).done;){var s=e.value;r.push(Object(a.jsx)("a",{class:"element",href:"#cell-"+(s.linkToIdx+1),children:s.title}))}}catch(l){i.e(l)}finally{i.f()}var o="inactive";return n&&(o="active"),Object(a.jsxs)("div",{className:"toc "+o,children:[Object(a.jsx)("a",{className:"toctoggle",onClick:this.toggleState,children:"\u2261"}),Object(a.jsx)("div",{className:"tocbody",children:r})]})}}]),n}(i.a.Component)),Vo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleAppendCell=function(){var t=e.props,n=t.notebook,a=t.onInsertCell;n.isEmpty()?e.handleRecommendAction("data","load",null):a(n.lastCell().module,vn)},e.handleRecommendAction=function(t,n,a){var r=e.props,i=r.apiEngine,s=r.userSettings,o=r.onInsertCell;try{var l,c=i.packages.toList(),u=Object(mi.a)(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(t===d.id){var h,p=d.toList(),j=Object(mi.a)(p);try{for(j.s();!(h=j.n()).done;){var m=h.value;n===m.id&&(m.suggest=!0)}}catch(b){j.e(b)}finally{j.f()}}}}catch(b){u.e(b)}finally{u.f()}}catch(b){}null===a?o():s.showNotebookReversed()?o(a,On):o(a,vn)},e.handleResetRecommendations=function(){var t,n=e.props.apiEngine.packages.toList(),a=Object(mi.a)(n);try{for(a.s();!(t=a.n()).done;){var r,i=t.value.toList(),s=Object(mi.a)(i);try{for(s.s();!(r=s.n()).done;){r.value.suggest=!1}}catch(o){s.e(o)}finally{s.f()}}}catch(o){a.e(o)}finally{a.f()}},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.activeNotebookCell,n=e.apiEngine,r=e.notebook,i=e.onAddFilteredCommand,s=e.onCancelExec,o=e.onCheckStatus,l=e.onCopyCell,c=e.onCreateBranch,u=e.onDatasetNavigate,d=e.onDeleteCell,h=e.onDismissCell,p=e.onFetchAnnotations,j=e.onInsertCell,m=e.onOutputSelect,b=e.onRemoveFilteredCommand,f=e.onSelectNotebookCell,v=e.onSubmitCell,O=e.userSettings,g=e.onEditSpreadsheet,x=e.onFreezeCell,C=e.onThawCell;if(0===r.cells.length)return Object(a.jsx)(Sr,{message:"Your notebook is empty.",icon:"plus",css:"notebook-footer",caption:"Start by adding a Load Dataset Cell",captionIcon:"arrow up",onClick:this.handleAppendCell});for(var w=[],k=1,y=!1,S=!1,N=[],E=0;E<r.cells.length;E++){var A=r.cells[E],I=!1;E<r.cells.length-1&&(I=r.cells[E+1].isNewCell());var D=null;A.isActive()&&(S||(D=s),S=!0);var P=null;r.hasActiveCells()?A.isNewCell()&&E===r.cells.length-1&&(P=v):P=v,w.push(Object(a.jsx)(Fo,{apiEngine:n,cell:A,cellNumber:k,datasets:N,isActiveCell:A.id===t,isNewNext:I,isNewPrevious:y,notebook:r,onAddFilteredCommand:i,onCancelExec:D,onCheckStatus:o,onCopyCell:l,onCreateBranch:c,onDatasetNavigate:u,onDeleteCell:d,onDismissCell:h,onInsertCell:j,onOutputSelect:m,onFetchAnnotations:p,onRemoveFilteredCommand:b,onSelect:f,onSubmitCell:P,userSettings:O,onEditSpreadsheet:g,onRecommendAction:this.handleRecommendAction,onResetRecommendations:this.handleResetRecommendations,onFreezeCell:x,onThawCell:C},A.id)),A.isNewCell()||(k++,N=A.module.datasets),y=A.isNewCell()}var R=null;"tableOfContents"in r.workflow&&Array.isArray(r.workflow.tableOfContents)&&r.workflow.tableOfContents.length>0&&(R=Object(a.jsx)(Uo,{contents:r.workflow.tableOfContents}));var T=null,_=r.lastCell();_.isNewCell()||_.isErrorOrCanceled()||r.readOnly||(T=Object(a.jsx)("table",{className:"cell",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"cell-index"}),Object(a.jsx)("td",{className:"cell-button",children:Object(a.jsx)(br.a,{size:"big",link:!0,name:"plus",onClick:this.handleAppendCell,title:"Append new cell"})})]})})}));var L=null;return O.showNotebookReversed()?(w.reverse(),L=Object(a.jsxs)("div",{children:[R,T,w]})):L=Object(a.jsxs)("div",{children:[R,w,T]}),L}}]),n}(i.a.Component),Bo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleAddFilteredCommand=function(e){a.props.dispatch(function(e){return{type:v,command:e}}(e))},a.handleCancelWorkflowExec=function(){var e=a.props;(0,e.dispatch)(function(e){return function(t){return t(W(e.workflow.links.get("workflow.cancel"),{},(function(t){var n=new $e(e.workflow.engine).fromJson(t);return{type:An,notebook:e.updateWorkflow(n)}}),Dn))}}(e.notebook))},a.handleCheckWorkflowStatus=function(e){var t=a.props,n=t.dispatch,r=t.notebook;n(Rn(r,e))},a.handleCopyCell=function(e){(0,a.props.dispatch)(function(e){return{type:O,cell:e}}(e))},a.handleCreateBranch=function(e){var t=a.props,n=t.branch,r=t.dispatch,i=t.history,s=t.notebook,o=t.project,l=a.state.moduleId;r(function(e,t,n,a,r,i){return function(s){var o={properties:[{key:"name",value:r}]};null!=a&&(o.source={branchId:t.id,workflowId:n,moduleId:a}),s(q(e.links.get("branch.create"),o,(function(t){var n=(new oe).fromJson(t);return s(He(e.addBranch(n))),i.push(Wt(e.id,n.id)),{type:x}}),(function(e){return Ke("Error creating new branch",e)}),mn))}}(o,n,s.id,l,e,i)),a.hideCreateBranchModal()},a.handleDeleteBranch=function(e){var t=a.props,n=t.dispatch,r=t.history,i=t.project;n(pn(i,e,Wt,r))},a.handleDeleteCell=function(e){var t=a.props;(0,t.dispatch)(function(e,t){return function(n){return n(Ye()),V(t.module.links.get("module.delete"),{method:"DELETE"})(n).then((function(t){200===t.status?B(t).then((function(t){return n(qn(e,t))})):401===t.status?n(F()):B(t).then((function(e){return n(Ke("Error deleting module",e.message))}))})).catch((function(e){return n(Ke("Error while deleting module",e.message))}))}}(t.notebook,e))},a.handleDatasetNavigate=function(e,t,n,r,i){var s=a.props,o=s.dispatch,l=s.notebook;o(i?function(e,t,n,a,r,i){return function(s){var o=n.links.getDatasetUrl(a,r,i);return s(K(o,(function(a){return qn(e().replaceOutput(t.id,new mt(new Ze(a.id,n.name,n.activeCell).fromJson(a))))}),(function(a){return _n(e(),t,"dataset "+n.name,a)})))}}((function(){return a.props.notebook}),e,t,n,r,i):Mn(l,e,t,n,r))},a.handleDismissCell=function(e){var t=a.props;(0,t.dispatch)(function(e,t){return function(n){n({type:An,notebook:e.dismissChangesForCell(t.id)}),n({type:En})}}(t.notebook,e))},a.handleFetchDatasetCellAnnotations=function(e,t,n,r){(0,a.props.dispatch)(la(t,n,r))},a.dismissAnnotationModal=function(){(0,a.props.dispatch)(oa())},a.handleInsertCell=function(e,t){var n=a.props;(0,n.dispatch)(function(e,t,n){return function(a){var r=gn(e.cellCounter);a({type:An,notebook:e.editCell(t,n)}),a({type:En,cellId:r})}}(n.notebook,e,t))},a.handleFreezeCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get(re);n(Bn(r,i,e.id))},a.handleThawCell=function(e){var t=a.props,n=t.dispatch,r=t.notebook,i=e.module.links.get(ie);n(Bn(r,i,e.id))},a.handleRemoveFilteredCommand=function(e){a.props.dispatch(function(e){return{type:C,command:e}}(e))},a.handleSelectOutput=function(e,t,n){var r=a.props,i=r.dispatch,s=r.notebook,o=r.userSettings;t===rt?i(Ln(s,e,n)):t===it?i(Mn(s,e,s.getDatasetForModule(e,n),0,o.cellRowLimit())):t===ct?i(function(e,t){return function(n){var a=new ft;n(qn(e.replaceOutput(t.id,a)))}}(s,e)):t===ut?i(Fn(s,e)):t===dt?i(function(e,t){return function(n){var a=t.timestamps,r=a.createdAt,i=a.startedAt,s=a.finishedAt,o=new Ct(r,i,s);n(qn(e.replaceOutput(t.id,o)))}}(s,e)):t===ht&&i(Fn(s,e))},a.handleSelectActiveCell=function(e){a.props.dispatch(function(e){var t=null!=e?e.id:null;return{type:En,cellId:t}}(e))},a.handleShowBranch=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Gt(r.id,t.id))},a.handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Wt(r.id,t.id))},a.handleSubmitCell=function(e,t,n,r){var i=a.props,s=i.dispatch,o=i.notebook,l=i.project,c={packageId:t.packageId,commandId:t.id,arguments:n},u=null;if(null!=t.fileParameter&&(u=n.find((function(e){return e.id===t.fileParameter.id}))),e.isNewCell()){var d=null;if(o.lastCell().id===e.id)d=o.workflow.links.get(ae);else for(var h=0;h<o.cells.length;h++)if(o.cells[h].id===e.id)for(var p=h+1;p<o.cells.length;p++){var j=o.cells[p];if(!j.isNewCell()){d=j.module.links.get("module.insert");break}}null!=u&&null!=u.value.file?s(zn(o,d,c,Un,e.id,l.links.get(ne),u,r)):s(Un(o,d,c,e.id))}else{var m=e.module.links.get("module.replace");null!=u&&null==u.value.fileid&&null!=u.value.file?s(zn(o,m,c,Vn,e.id,l.links.get(ne),u,r)):s(Vn(o,m,c,e.id))}},a.handleSwitchBranch=function(e){var t=a.props,n=t.history,r=t.project;n.push(Wt(r.id,e.id))},a.hideCreateBranchModal=function(){a.setState({modalOpen:!1,moduleId:null})},a.handleEditSpreadsheet=function(e,t){var n=a.props,r=n.dispatch,i=n.history,s=n.branch,o=n.project.id,l=e.id;r(function(e,t,n,a){return function(r){var i=e.links.getDatasetUrl(t,n);r(K(i,(function(t){return function(n){return t.moduleId=a,n(Be(new cn(new Ze(t.id,e.name).fromJson(t))))}}),(function(e){return Ke("Error loading spreadsheet",e)})))}}(e,0,25,t)),i.push(Yt(o,s.id,l))},a.showCreateBranchModal=function(e){var t=a.props.notebook,n=null,r="Create branch";if(null==e){if(t.cells.length>0)for(var i=t.cells.length-1;i>=0;i--){var s=t.cells[i];if(!s.isNewCell()){n=s.module.id;break}}}else{for(var o=0,l=0;l<t.cells.length;l++){var c=t.cells[l];if(!c.isNewCell()&&(o++,e.id===c.id)){r=1===o?"New branch for cell [1]":"New branch for cells [1-"+o+"]";break}}n=e.id}a.setState({modalOpen:!0,modalTitle:r,moduleId:n})};var r=document.queryCommandSupported("copy");a.state={modalOpen:!1,modalTitle:"New branch",moduleId:null,copySupport:r};var i=a.props,s=i.branch,o=i.dispatch,l=i.notebook,c=i.project,u=i.projectList,d=a.props.match.params.project_id,h=a.props.match.params.branch_id,p=a.props.match.params.workflow_id;return null==c||c.id!==d?o(Ve(d,h,(function(e,t){return In(e,t,p)}))):null==s||s.id!==h?o(In(c,c.findBranch(h),p)):(null==l||l.id!==p)&&o(In(c,s,p)),null==u&&o(xa()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=a.notebook,l=this.props.match.params.project_id,c=this.props.match.params.branch_id,u=this.props.match.params.workflow_id;null==i||i.id!==l?r(Ve(l,c,(function(e,t){return In(e,t,u)}))):null==s||s.id!==c?r(ze(i,c,(function(e,t){return In(e,t,u)}))):null!=o&&o.id===u||r(In(i,s,u))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionError,r=t.activeCell,i=t.branch,s=t.dispatch,o=t.fetchError,l=t.isActive,c=t.isFetching,u=t.notebook,d=t.project,h=t.projectList,p=t.reversed,j=t.serviceApi,m=t.userSettings,b=t.annotations,f=null;if(o)f=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(jr,{error:o})});else if(null==d||null==i||null==u||c)f=Object(a.jsx)(lr,{text:"Loading Notebook ..."});else if(null!=u){var v=this.state,O=v.modalOpen,g=v.modalTitle,x=v.copySupport,C=Object(a.jsx)(Vo,{activeNotebookCell:r,apiEngine:j.engine,notebook:u,project:d,reversed:p,onAddFilteredCommand:this.handleAddFilteredCommand,onCancelExec:this.handleCancelWorkflowExec,onChangeGrouping:this.handleChangeGrouping,onCheckStatus:this.handleCheckWorkflowStatus,onCopyCell:this.handleCopyCell,onCreateBranch:this.showCreateBranchModal,onDatasetNavigate:this.handleDatasetNavigate,onDeleteCell:this.handleDeleteCell,onDismissCell:this.handleDismissCell,onFetchAnnotations:this.handleFetchDatasetCellAnnotations,onInsertCell:this.handleInsertCell,onOutputSelect:this.handleSelectOutput,onRemoveFilteredCommand:this.handleRemoveFilteredCommand,onSelectNotebookCell:this.handleSelectActiveCell,onSubmitCell:this.handleSubmitCell,userSettings:m,onEditSpreadsheet:this.handleEditSpreadsheet,onFreezeCell:this.handleFreezeCell,onThawCell:this.handleThawCell}),w=Object(a.jsx)(gr,{isValid:Jt,open:O,prompt:"Enter a name for the new branch",title:g,onCancel:this.hideCreateBranchModal,onSubmit:this.handleCreateBranch});u.readOnly&&(w=Object(a.jsxs)("div",{className:"notebook-footer",children:[Object(a.jsx)(Sr,{message:"This is a read-only notebook. Create a new branch to start editing.",icon:"code-fork",title:"Create a new branch for this notebook",onClick:function(){return e.showCreateBranchModal()}}),w]}));var k=Object(a.jsx)(di,{annotation:b,onDiscard:this.dismissAnnotationModal}),y=null,S=Tn();y=S?Object(a.jsx)(Mo,{cell:u.cells.find((function(e){return e.id===S})),isActive:l,datasets:u.datasets,onCancelExec:this.handleCancelWorkflowExec,onCheckStatus:this.handleCheckWorkflowStatus,onFetchAnnotations:this.handleFetchDatasetCellAnnotations,onNavigateDataset:this.handleDatasetNavigate,onOutputSelect:this.handleSelectOutput,onSelectCell:this.handleSelectActiveCell,userSettings:m,onEditSpreadsheet:this.handleEditSpreadsheet}):Object(a.jsxs)("div",{className:"notebook",children:[Object(a.jsx)(ji,{branch:i,notebook:u,onShowHistory:this.handleShowBranch,onSwitchBranch:this.handleSwitchBranch,project:d,copySupport:x}),C,w,k]}),f=Object(a.jsx)(ii,{actionError:n,branch:i,content:y,contentCss:"slim",dispatch:s,isActive:l,notebook:u,onCreateBranch:this.showCreateBranchModal,onDeleteBranch:this.handleDeleteBranch,onShowNotebook:this.handleShowBranchHead,onSwitchBranch:this.handleSwitchBranch,project:d,projectList:h,resource:new sn,serviceApi:j,userSettings:m})}return f}}]),n}(r.Component),Ho=Object(ar.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,activeCell:e.notebookPage.activeCell,branch:e.projectPage.branch,fetchError:e.notebookPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.notebookPage.isFetching,notebook:e.notebookPage.notebook,project:e.projectPage.project,projectList:e.projectListing.projects,reversed:e.notebookPage.reversed,serviceApi:e.serviceApi,userSettings:e.app.userSettings,annotations:e.spreadsheet.annotations}}))(Bo)),zo=n(1407),qo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).appendModule=function(e,t){var n=r.props,a=n.dispatch,i=n.dataset,s=n.serviceApi,o=n.notebook,l={type:e.type,id:e.id,arguments:t};if(r.toggleNotebookCell(),e.type!==we||e.id!==pe&&e.id!==ge)if(e.type===we&&e.id===be){var c=t.name;a(zn(o.workflow.links.get(ae),l,(function(e,t){return ra(o.workflow,{name:c,offset:0},t)}),s.links.upload))}else a(ra(o.workflow,i,l));else a(Un(o.workflow.links.get(ae),l))},r.clearActiveCell=function(){r.submitPendingUpdate(),r.setState({activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,originalCellValue:null,updatedCellValue:null})},r.deleteUserAnnotation=function(e,t){var n=r.props;(0,n.dispatch)(function(e,t,n,a){return function(r){var i={columnId:t,rowId:n,annoId:a};return ca(r,e.links.annotations,i,e,t,n)}}(n.dataset,e.column,e.row,t))},r.dismissAnnotationModal=function(){(0,r.props.dispatch)(oa())},r.dismissModal=function(){return r.setState({modal:null,modalValue:null,modalResult:""})},r.handleCellUpdate=function(e){r.setState({updatedCellValue:e})},r.handleMoveCell=function(e){var t=r.state,n=t.activeColumnId,a=t.activeRowId,i=t.activeColumnIndex,s=t.activeRowIndex;if(-1!==n&&-1!==a){var o=r.props.dataset,l=o.rows[0].index,c=o.rows[o.rows.length-1].index,u=o.columns,d=i,h=s;e===zt?(h-=1)<l&&(h=c):e===Vt?(h+=1)>c&&(h=l):e===Ht?(d+=1)>=u.length&&(d=0,(h+=1)>c&&(h=l)):e===Bt&&(d-=1)<0&&(d=u.length-1,(h-=1)<l&&(h=c)),r.handleSelectCell(u[d].id,o.rowAtIndex(Math.abs(o.offset-h)).id,d,h)}},r.handleMoveHeader=function(e){var t=r.state,n=t.activeColumnId,a=t.activeRowId,i=t.activeColumnIndex;if(-1!==n&&-1===a){var s=r.props.dataset.columns,o=i;e===Ht?(o+=1)>=s.length&&(o=0):e===Bt&&(o-=1)<0&&(o=s.length-1),r.handleSelectCell(s[o].id,-1,o,-1)}},r.handleNavigate=function(e,t,n){r.clearActiveCell();var a=r.props,i=a.dispatch,s=a.dataset,o=s.links.getDatasetUrl(t,n);i(ta(s,o))},r.handleSelectCell=function(e,t,n,a){var i=r.props,s=i.isUpdating,o=i.notebook;if(!s&&!o.workflow.readOnly){r.submitPendingUpdate();var l=null;if(-1!==n){var c=r.props.dataset;l=-1!==a?c.rowAtIndex(Math.abs(c.offset-a)).values[n]:c.columns[n].name}r.setState({activeColumnId:e,activeRowId:t,activeColumnIndex:n,activeRowIndex:a,originalCellValue:l,updatedCellValue:l})}},r.handleSubmitModal=function(e){var t=r.props.dataset,n=r.state,a=n.modal,i=n.modalValue;return r.dismissModal(),a===je?r.submitVizualCommand(function(e,t,n){return{packageId:we,commandId:je,arguments:[{id:"dataset",value:e},{id:"name",value:t},{id:"position",value:n}]}}(t.name,e,i)):a===fe?r.submitVizualCommand(Se(t.name,i,e)):a===ve?r.submitVizualCommand(Ne(t.name,i,e)):void 0},r.handleMoveAction=function(e,t,n){var a=r.props.dataset;return e===fe?r.submitVizualCommand(Se(a.name,t,n)):e===ve?r.submitVizualCommand(Ne(a.name,t,n)):void 0},r.handleVizualAction=function(e,t,n){var a=r.props.dataset;switch(e){case je:case fe:case ve:return void r.setState({modal:e,modalValue:t});case de:return r.submitVizualCommand(function(e,t){return{packageId:we,commandId:de,arguments:[{id:"dataset",value:e},{id:"column",value:t}]}}(a.name,t));case he:return r.submitVizualCommand(function(e,t){return{packageId:we,commandId:he,arguments:[{id:"dataset",value:e},{id:"row",value:t}]}}(a.name,t));case me:return r.submitVizualCommand(function(e,t){return{packageId:we,commandId:me,arguments:[{id:"dataset",value:e},{id:"position",value:t}]}}(a.name,t));case xe:return r.submitVizualCommand(function(e,t,n){return{packageId:we,commandId:xe,arguments:[{id:"dataset",value:e},{id:"columns",value:[[{id:"columns_column",value:t},{id:"columns_order",value:n}]]}]}}(a.name,t,n));default:return}},r.toggleNotebookCell=function(){var e=r.state.showNotebookCell;r.setState({showNotebookCell:!e})},r.handleFetchAnnotations=function(e,t){var n=r.props,a=n.dispatch,i=n.dataset;a(la(i,e,t))},r.handleDisplayRows=function(e,t){var n=r.props.dataset,a=r.state.cellLimit;t.value!==a&&("all"===t.value&&a!==n.rowCount?(r.setState({cellLimit:n.rowCount}),r.handleNavigate(n,0,n.rowCount)):"all"!==t.value&&(r.setState({cellLimit:t.value}),r.handleNavigate(n,n.offset,t.value)))},r.handleCheckStatus=function(){var e=r.props,t=e.dispatch,n=e.notebook;t(Rn(n,n.cells[n.cells.length-1])),r.setState({notebookRunning:n.cells[n.cells.length-1].isRunning()})},r.showAnnotationModal=function(){var e=r.props,t=e.dispatch,n=e.dataset,a=r.state,i=a.activeColumnId,s=a.activeRowId;t(la(n,i,s))},r.handleMoveColumnModalInputChange=function(e,t){r.setState({modalResult:t})},r.handleMoveRowModalInputChange=function(e,t){r.setState({modalResult:t.value})},r.showModal=function(){var e=r.state,t=e.modal,n=e.modalValue,i=e.modalResult,s=null,o="";if(null!=t){var l=null,c=null,u=null;if(t===je)l=Jt,c="Insert Column",u="Name of new column";else if(t===fe){for(var d=r.props.dataset,h=d.columns,p=null,j=0;j<h.length;j++)if(h[j].id===n){p=h[j];break}o=i,s=Object(a.jsx)(Ei,{id:d.id,isRequired:!0,name:d.name,dataset:d,value:o,onChange:r.handleMoveColumnModalInputChange}),l=Kt,c="Move Column",u="Target position for column "+p.name}else if(t===ve){var m=r.props.dataset;o=i;var b=Object(Rr.a)(Array(m.rowCount).keys()).map((function(e){return{key:e,text:e,value:e}}));s=Object(a.jsx)(Hr.a,{value:o,selection:!0,fluid:!0,scrolling:!0,options:b,onChange:r.handleMoveRowModalInputChange}),l=Kt,c="Move Row",u="Target position for row "+n}return Object(a.jsx)(gr,{open:!0,isValid:l,title:c,prompt:u,value:o,onCancel:r.dismissModal,onSubmit:r.handleSubmitModal,inputComponent:s})}return null},r.getInsertModuleIndex=function(){var e=r.props,t=e.dataset,n=e.notebook,a=null;if(t.moduleId){if(t.moduleIndex)a=t.moduleIndex+1;else{a=n.workflow.modules.findIndex((function(e){return e.id===t.moduleId}))+1}a===n.workflow.modules.length&&(a=null)}return a},r.submitPendingUpdate=function(){var e=r.state,t=e.activeColumnId,n=e.activeRowId,a=e.originalCellValue,i=e.updatedCellValue;if(-1!==t){var s=r.props,o=s.dispatch,l=s.dataset,c=s.notebook,u=r.getInsertModuleIndex();if(a!==i){r.setState({updatingColumnId:t,updatingRowId:n,updatingValue:i});var d=null;d=-1!==n?function(e,t,n,a){return{packageId:we,commandId:Ce,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"row",value:n},{id:"value",value:a}]}}(l.name,t,n,i):function(e,t,n){return{packageId:we,commandId:Oe,arguments:[{id:"dataset",value:e},{id:"column",value:t},{id:"name",value:n}]}}(l.name,t,i),o(ra(c,l,d,u))}}},r.submitUserAnnotation=function(e,t,n){var a=r.props,i=a.dispatch,s=a.dataset,o=a.notebook,l=e.column,c=e.row,u=r.getInsertModuleIndex();i(ra(o,s,function(e,t,n,a){return{packageId:"mimir",commandId:"comment",arguments:[{id:"dataset",value:e.name},{id:"comments",value:[[{id:"expression",value:e.columns[t].id},{id:"comment",value:n},{id:"rowid",value:a}]]},{id:"materializeInput",value:!1}]}}(s,l,n,c),u))},r.submitVizualCommand=function(e){var t=r.props,n=t.dispatch,a=t.dataset,i=t.notebook,s=r.getInsertModuleIndex();r.setState({activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,originalCellValue:null,updatedCellValue:null,updatingColumnId:-1,updatingRowId:-1,updatingValue:null}),n(ra(i,a,e,s))},r.state={activeColumnId:-1,activeRowId:-1,activeColumnIndex:-1,activeRowIndex:-1,modal:null,modalValue:null,originalCellValue:null,showNotebookCell:!1,updatedCellValue:null,updatingColumnId:-1,updatingRowId:-1,updatingValue:null,cellLimit:25,activeDataset:null,modalResult:"",notebookRunning:!1},r}return Object(b.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.dataset,n=e.dataset;!0===(null==t||(null==n||t.name!==n.name))&&this.clearActiveCell()}},{key:"render",value:function(){for(var e=this.props,t=e.annotations,n=e.dataset,r=e.isUpdating,i=e.notebook,s=e.serviceProperties,o=e.dispatch,l=this.state,c=l.activeColumnId,u=l.activeRowId,d=l.showNotebookCell,h=l.updatingColumnId,p=l.updatingRowId,j=l.updatingValue,m=l.notebookRunning,b=l.cellLimit,f=n.columns,v=[Object(a.jsx)(io,{rowIndex:-1,value:" ",onClick:this.clearActiveCell,isSpreadsheet:!0},-1)],O=0;O<f.length;O++){var g=f[O],x=c===g.id&&-1===u,C=r&&h===g.id&&-1===p,w=null;w=C?j:g.name,v.push(Object(a.jsx)(So,{column:g,columnIndex:O,disabled:r||i.workflow.readOnly,isActive:!r&&x,isUpdating:C,value:w,onAction:this.handleVizualAction,onClick:this.handleSelectCell,onMove:this.handleMoveHeader,onUpdate:this.handleCellUpdate,isEditing:!0,onMoveAction:this.handleMoveAction,isSpreadsheet:!0},g.id))}v=Object(a.jsx)("tr",{children:v});for(var k=[],y=n.offset,S=0;S<n.rows.length;S++){for(var N=n.rows[S],E=[Object(a.jsx)(io,{rowId:N.id,disabled:r||i.workflow.readOnly,rowIndex:S+y,value:S+y,onAction:this.handleVizualAction,onClick:this.clearActiveCell,onMoveAction:this.handleMoveAction},N.id)],A=0;A<f.length;A++){var I=f[A],D=c===I.id&&u===N.id,P=r&&h===I.id&&p===N.id,R=null;R=P?j:N.values[A],E.push(Object(a.jsx)(to,{column:I,columnIndex:A,hasAnnotations:n.hasAnnotations(I.id,N.id),isActive:!r&&D,isUpdating:P,rowId:N.id,rowIndex:S+y,value:R,onClick:this.handleSelectCell,onMove:this.handleMoveCell,onUpdate:this.handleCellUpdate,onFetchAnnotations:this.handleFetchAnnotations},"C"+I.id+"R"+N.id))}k.push(Object(a.jsx)(ao.Draggable,{wrapperComponent:Object(a.jsx)("tr",{}),type:"row-index-cell",data:N.id,onDragStart:this.handleDragStart,children:E},N.id))}var T=null;c>=0&&-1!==u&&(T=this.showAnnotationModal);var _=null;d&&(_=Object(a.jsx)("div",{className:"notebook-cell-xp-new",children:Object(a.jsx)("table",{className:"cell-area",children:Object(a.jsx)("tbody",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"cell-index",children:Object(a.jsx)(yr,{name:"minus-square-o",onClick:this.toggleNotebookCell})}),Object(a.jsx)("td",{className:"cell-cmd",children:Object(a.jsx)("div",{className:"cell-form"})})]})})})}));var L=null;null!=T&&(L="icon-button");var M=null;if(!i.workflow.readOnly){var F="plus square outline";d&&(F="minus square outline"),M=Object(a.jsx)("span",{className:"left-padding-md",children:Object(a.jsx)(br.a,{className:"icon-button",title:"Add notebook cell",name:F,onClick:this.toggleNotebookCell})})}for(var U=[],V=0,B=[25,50,100,150];V<B.length;V++){var H=B[V];H<n.rowCount&&U.push(Object(a.jsx)(Hr.a.Item,{text:"".concat(H," rows"),value:H,onClick:this.handleDisplayRows}))}U.push(Object(a.jsx)(Hr.a.Item,{text:"All rows(".concat(n.rowCount,")"),label:n.rowCount>s.maxDownloadRowLimit&&"row limit (".concat(s.maxDownloadRowLimit,") exceeded"),disabled:n.rowCount>s.maxDownloadRowLimit,value:"all",onClick:this.handleDisplayRows}));var z=null;if(i.cells[i.cells.length-1].isRunning())z=Object(a.jsx)(cr,{interval:1e3,onFetch:this.handleCheckStatus,resource:i.cells[i.cells.length-1],text:i.cells[i.cells.length-1].isRunning()?"Running ...":"Pending ..."});else if(!i.cells[i.cells.length-1].isRunning()&&m){z=Object(a.jsx)(cr,{interval:1e3,onFetch:this.handleCheckStatus,resource:i.cells[i.cells.length-1],text:i.cells[i.cells.length-1].isRunning()?"Running ...":"Pending ..."});var q=i.cells[i.cells.length-1].module.datasets.find((function(e){return e.name===n.name})).links.getDatasetUrl(n.offset,b);o(ta(n,q))}return Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsxs)("h1",{className:"dataset-name",children:[n.name,Object(a.jsx)("span",{className:"left-padding-lg",children:Object(a.jsx)(br.a,{className:L,name:"comment alternate outline",title:"Show annotations",disabled:null===T,onClick:T})}),M,Object(a.jsx)(Vr.a,{compact:!0,style:{float:"right"},children:Object(a.jsx)(Hr.a,{selection:!0,text:"Showing ".concat(this.state.cellLimit," rows"),options:U})})]}),Object(a.jsx)(di,{annotation:t,onDelete:this.deleteUserAnnotation,onDiscard:this.dismissAnnotationModal,onSubmit:this.submitUserAnnotation}),Object(a.jsxs)(zo.a.Dimmable,{dimmed:r,children:[Object(a.jsx)(or.a,{active:r}),_,Object(a.jsxs)("div",{className:"spreadsheet-container",children:[Object(a.jsx)("div",{className:"spreadsheet-table-container",children:Object(a.jsxs)("table",{className:"spreadsheet",children:[Object(a.jsx)("thead",{children:v}),Object(a.jsx)("tbody",{children:k})]})}),Object(a.jsx)(uo,{cellLimit:this.state.cellLimit,dataset:n,onNavigate:this.handleNavigate})]})]}),this.showModal(),z]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.dataset.name!==t.activeDataset&&(n={cellLimit:25,activeDataset:e.dataset.name}),t.cellLimit>e.dataset.rowCount&&(n=Object(j.a)(Object(j.a)({},n),{},{cellLimit:e.dataset.rowCount})),n}}]),n}(i.a.Component),Jo=Object(ar.a)(Object(c.b)((function(e){var t=e.spreadsheet.dataset;try{t.name=e.notebookPage.notebook.datasets[t.id].name}catch(n){}return{annotations:e.spreadsheet.annotations,dataset:t,isUpdating:e.spreadsheet.isUpdating,opError:e.spreadsheet.opError,project:e.projectPage.project,serviceApi:e.serviceApi,notebook:e.notebookPage.notebook,serviceProperties:e.serviceApi.properties}}))(qo)),Ko=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Wt(r.id,t.id))},a.state={modalOpen:!1,modalTitle:"New branch",moduleId:null};var r=a.props,i=r.branch,s=r.dispatch,o=r.notebook,l=r.project,c=r.projectList,u=a.props.match.params.project_id,d=a.props.match.params.branch_id,h=a.props.match.params.workflow_id;return null==l||l.id!==u?s(Ve(u,d,(function(e,t){return In(e,t,h)}))):null==i||i.id!==d?s(In(l,l.findBranch(d),h)):(null==o||o.id!==h)&&s(In(l,i,h)),null==c&&s(xa()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.location.pathname!==this.props.location.pathname){var t=this.props,n=t.dispatch,a=t.project,r=t.branch,i=t.notebook,s=this.props.match.params.project_id,o=this.props.match.params.branch_id,l=this.props.match.params.workflow_id;null==a||a.id!==s?n(Ve(s,o,(function(e,t){return In(e,t,l)}))):null==r||r.id!==o?n(ze(a,o,(function(e,t){return In(e,t,l)}))):null!=i&&i.id===l||n(In(a,r,l))}}},{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.dispatch,i=e.fetchError,s=e.isActive,o=e.isFetching,l=e.notebook,c=e.project,u=e.projectList,d=e.serviceApi,h=e.userSettings,p=e.dataset,j=null;if(i)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(jr,{error:i})});else if(null==c||null==n||null==l||null==p||o)j=Object(a.jsx)(lr,{text:"Loading Spreadsheet..."});else if(null!=p){var m=Object(a.jsx)("div",{className:"spreadsheet",children:Object(a.jsx)(Jo,{})});j=Object(a.jsx)(ii,{actionError:t,branch:n,content:m,contentCss:"slim",dispatch:r,isActive:s,notebook:l,project:c,projectList:u,resource:new cn(p),serviceApi:d,userSettings:h,onShowNotebook:this.handleShowBranchHead})}return j}}]),n}(r.Component),Go=Object(ar.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,activeCell:e.notebookPage.activeCell,branch:e.projectPage.branch,fetchError:e.notebookPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.notebookPage.isFetching,notebook:e.notebookPage.notebook,project:e.projectPage.project,projectList:e.projectListing.projects,reversed:e.notebookPage.reversed,serviceApi:e.serviceApi,userSettings:e.app.userSettings,dataset:e.datasetErrorsPage.dataset}}))(Ko)),Wo=(n(511),function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).handleExpand=function(){var e=r.state.expanded;r.setState({expanded:!e})},r.handleGotoError=function(e){var t=r.props;(0,t.onGotoError)(t.reason.value)},r.buildReasonElement=function(e,t){if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)n.push(r.buildReasonElement(e+"."+i,t[i]));return n}if(t instanceof Object){for(var s=[],o=0,l=Object.entries(t);o<l.length;o++){var c=Object(_i.a)(l[o],2),u=c[0],d=c[1];s.push(r.buildReasonElement(e+"."+u,d))}return s}return Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsxs)("h4",{children:[e,": "]})}),Object(a.jsx)("td",{children:t})]})},r.state={expanded:!1},r}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.reason,t=e.key,n=e.family,r=e.message,i=e.confirmed,s=[];s.unshift(Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsx)("h4",{children:"family: "})}),Object(a.jsx)("td",{children:n})]})),s.unshift(Object(a.jsxs)("div",{className:"dataset-reason-element",children:[Object(a.jsx)("td",{className:"dataset-reason-key",children:Object(a.jsx)("h4",{children:"key: "})}),Object(a.jsx)("td",{children:t})]}));var o=null;t&&Array.isArray(t)&&0!==t.length&&(o=Object(a.jsx)(br.a,{name:"external alternate",size:"small"}));var l=Object(a.jsx)(br.a,{name:"warning sign",size:"large",color:"yellow"});return i&&(l=Object(a.jsx)(br.a,{name:"check circle",size:"large",color:"green"})),Object(a.jsxs)("div",{className:"dataset-reason",children:[Object(a.jsx)("table",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{className:"dataset-reason-icon",children:Object(a.jsx)("div",{onClick:this.handleExpand,children:l})}),Object(a.jsx)("td",{className:"dataset-reason-english",children:Object(a.jsx)("div",{onClick:this.handleExpand,children:r})}),Object(a.jsx)("td",{className:"dataset-reason-goto",children:Object(a.jsx)("div",{onClick:this.handleGotoError,children:o})})]})}),null]})}}]),n}(i.a.Component)),Yo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){for(var e=this.props,t=e.dataset,n=e.annotations,r=e.onGotoError,i=e.onRepairError,s=[],o=[],l=0;l<n.items.length;l++){var c=n.items[l];c.confirmed?o.push(Object(a.jsx)(Wo,{reason:c,onGotoError:r(t),onRepairError:i(t)})):s.push(Object(a.jsx)(Wo,{reason:c,onGotoError:r(t),onRepairError:i(t)}))}return Object(a.jsxs)("div",{className:"dataset-caveats",children:[Object(a.jsxs)("h3",{className:"dataset-caveats",children:["Dataset Caveat List: ",Object(a.jsx)("span",{className:"error-highlight",children:t.name})]}),s,o]})}}]),n}(i.a.Component),Qo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleShowBranchHead=function(){var e=a.props,t=e.branch,n=e.history,r=e.project;n.push(Wt(r.id,t.id))},a.loadDatasetToError=function(e){return function(t){var n=a.props,r=n.dispatch,i=n.serviceApi.serviceUrl+"/datasets/"+e.id+"?rowid="+t.key[0];r(ta(e,i))}},a.loadDatasetRepair=function(e){return function(t,n,r){var i=a.props,s=i.dispatch,o=i.serviceApi.serviceUrl+"/datasets/"+e.id+"/feedback";s(aa(e,o,t,n,r))}};var r=a.props,i=r.branch,s=r.dispatch,o=r.project,l=r.projectList,c=r.workflows,u=a.props.match.params.project_id,d=a.props.match.params.branch_id;return null==o||o.id!==u?s(Ve(u,d,jn)):(null==i||i.id!==d||null==c)&&s(jn(o,o.findBranch(d))),null==l&&s(xa()),a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.location.pathname!==this.props.location.pathname){var a=this.props,r=a.dispatch,i=a.project,s=a.branch,o=this.props.match.params.project_id,l=this.props.match.params.branch_id;null==i||i.id!==o?r(Ve(o,l,jn)):null!=s&&s.id===l||r(jn(i,i.findBranch(l)))}}},{key:"render",value:function(){var e=this.props,t=e.actionError,n=e.branch,r=e.dispatch,i=e.fetchError,s=e.isActive,o=e.isFetching,l=e.project,c=e.projectList,u=e.serviceApi,d=e.userSettings,h=e.workflows,p=e.resource,j=null;if(i)j=Object(a.jsx)("div",{className:"page-content wide",children:Object(a.jsx)(jr,{error:i})});else if(null==l||null==n||null==h||null==p||o)j=Object(a.jsx)(lr,{text:"Loading Dataset Caveat List ..."});else if(null!=p){var m=p.content.dataset,b=p.content.annotations,f=Object(a.jsx)("div",{className:"dataset-caveat-view",children:Object(a.jsx)(Yo,{dataset:m,annotations:b,onGotoError:this.loadDatasetToError,onRepairError:this.loadDatasetRepair})});j=Object(a.jsx)(ii,{actionError:t,branch:n,content:f,contentCss:"slim",dispatch:r,isActive:s,project:l,projectList:c,resource:new ln,serviceApi:u,userSettings:d,onShowNotebook:this.handleShowBranchHead})}return j}}]),n}(r.Component),Zo=Object(ar.a)(Object(c.b)((function(e){return{actionError:e.projectPage.actionError,branch:e.projectPage.branch,fetchError:e.datasetErrorsPage.fetchError,isActive:e.projectPage.isActive,isFetching:e.datasetErrorsPage.isFetching,project:e.projectPage.project,projectList:e.projectListing.projects,serviceApi:e.serviceApi,userSettings:e.app.userSettings,workflows:e.branchPage.workflows,dataset:e.datasetErrorsPage.dataset,resource:e.datasetErrorsPage.resource}}))(Qo)),Xo=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).handleCancel=function(){var e=a.props.onCancel;a.setState({user:""}),e()},a.handleChange=function(e){var t=e.target.value;a.setState({user:t})},a.handleChangePasswd=function(e){var t=e.target.value;a.setState({passwd:t})},a.handleKeyDown=function(e){var t=a.props.onCancel;13===e.keyCode?a.handleSubmit():27===e.keyCode&&t()},a.handleSubmit=function(e){var t=a.props,n=t.isValid,r=t.onSubmit,i=a.state,s=i.user,o=i.passwd;(null==n||n(s))&&r({authdata:window.btoa(s+":"+o)})};var r=e.value;return null==r&&(r=""),a.state={user:r},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isValid,n=e.prompt,r=e.open,i=e.title,s=this.state,o=s.user,l=s.passwd,c=null;null!=n&&(c=Object(a.jsx)("p",{children:n}));var u=!0;return null!=t&&(u=t(o)),Object(a.jsxs)(fr.a,{open:r,size:"small",children:[Object(a.jsx)(fr.a.Header,{children:i}),Object(a.jsx)(fr.a.Content,{children:Object(a.jsxs)("div",{className:"resource-name",children:[c,Object(a.jsx)(vr.a,{autoFocus:!0,className:"resource-name-input",value:o,onChange:this.handleChange,onKeyDown:this.handleKeyDown}),Object(a.jsx)(vr.a,{type:"password",value:l,className:"resource-name-input",onChange:this.handleChangePasswd,onKeyDown:this.handleKeyDown})]})}),Object(a.jsxs)(fr.a.Actions,{children:[Object(a.jsx)(sr.a,{negative:!0,onClick:this.handleCancel,children:"Cancel"}),Object(a.jsx)(sr.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Done",disabled:!u,onClick:this.handleSubmit})]})]})}}]),n}(i.a.Component),$o=function(e){Object(et.a)(n,e);var t=Object(tt.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).showAuthModal=function(){return a.setState({showModal:L})},a.hideModal=function(){return a.setState({showModal:null})},a.authComplete=function(e){var t,n=a.props.dispatch;localStorage.setItem("user",JSON.stringify(e)),n((t=e.authdata,{type:_,authdata:t}))},a.state={showModal:null},(0,a.props.dispatch)(H()),a}return Object(b.a)(n,[{key:"refetchService",value:function(){(0,this.props.dispatch)(H())}},{key:"render",value:function(){window.env.APP_TITLE?document.title="Vizier DB - "+window.env.APP_TITLE:document.title="Vizier DB";var e=this.props,t=e.error,n=e.isFetching,r=e.links,i=e.name,s=e.showModal,o=e.refetch,l=null,c=null;if(n)l=Object(a.jsx)(lr,{});else if(t){var u="Error while loading service descriptor";this.props.serviceUrl&&(u=u+" @ "+this.props.serviceUrl),l=Object(a.jsx)("div",{className:"page-content slim",children:Object(a.jsx)(hr,{title:u,message:t})})}else if(o)this.refetchService();else if(null!=i&&null!=r){l=Object(a.jsx)(ir.a,{children:Object(a.jsx)(er.a,{children:Object(a.jsxs)(tr.a,{children:[Object(a.jsx)(nr.a,{exact:!0,path:kt,component:oi}),Object(a.jsx)(nr.a,{path:It,component:Go}),Object(a.jsx)(nr.a,{path:Dt,component:Zo}),Object(a.jsx)(nr.a,{path:Pt,component:Go}),Object(a.jsx)(nr.a,{path:Rt,component:Zo}),Object(a.jsx)(nr.a,{path:Nt,component:ci}),Object(a.jsx)(nr.a,{path:Et,component:Ho}),Object(a.jsx)(nr.a,{path:At,component:Ho}),Object(a.jsx)(nr.a,{path:It,component:Go}),Object(a.jsx)(nr.a,{path:Dt,component:Zo})]})})}),c=Tn()?null:Object(a.jsx)("div",{className:"connection-info",children:Object(a.jsx)(ur,{name:i,links:r})})}var d=Object(a.jsx)("div",{children:Object(a.jsx)(Xo,{isValid:Jt,open:s===L,prompt:"Please enter your login credentials",title:"Login",onCancel:this.hideModal,onSubmit:this.authComplete,value:""})});return Object(a.jsxs)("div",{className:"app",children:[l,c,d]})}}]),n}(r.Component),el=Object(ar.a)(Object(c.b)((function(e){return{error:e.serviceApi.error,isFetching:e.serviceApi.isFetching,links:e.serviceApi.links,name:e.serviceApi.name,serviceUrl:e.serviceApi.serviceUrl,showModal:e.serviceApi.showModal,refetch:e.serviceApi.refetch}}))($o)),tl=(n(1362),n(1363),p()()),nl=[d.a,Object(u.b)(tl)],al=null;if(""!==window.env.ANALYTICS_URL){al=Object(a.jsx)("script",{children:function(){function e(){window.owa_cmds.push(arguments)}"undefined"!==typeof window&&(window._owa=document.createElement("script"),window._owa.type="text/javascript",window._owa.async=!0,window._owa.src=window.env.ANALYTICS_URL+"modules/base/js/owa.tracker-combined-min.js",window._owa_s=document.getElementsByTagName("script")[0],window._owa_s.parentNode.insertBefore(window._owa,window._owa_s),window.owa_baseUrl=window.env.ANALYTICS_URL,window.owa_cmds=window.owa_cmds||[],e("setSiteId",window.env.ANALYTICS_SITE_ID),e("trackPageView"),e("trackClicks"))}()})}var rl=l.d.apply(void 0,[l.a.apply(void 0,nl)].concat([])),il=Object(l.e)($a,{serviceApi:{isFetching:!1,serviceUrl:window.env.API_URL}},rl);Object(s.render)(Object(a.jsx)(c.a,{store:il,children:Object(a.jsx)(u.a,{history:tl,children:Object(a.jsx)(el,{children:al})})}),document.getElementById("root"));var sl=document.createElement("script");sl.src="https://cdn.pydata.org/bokeh/release/bokeh-2.0.1.min.js",sl.onload=function(){var e=document.createElement("script");e.src="https://cdn.pydata.org/bokeh/release/bokeh-api-2.0.1.min.js",document.head.appendChild(e);var t=document.createElement("script");t.src="https://cdn.pydata.org/bokeh/release/bokeh-widgets-2.0.1.min.js",document.head.appendChild(t)},document.head.appendChild(sl)},147:function(e,t,n){},180:function(e,t,n){},35:function(e,t,n){},420:function(e,t,n){},452:function(e,t,n){},511:function(e,t,n){},62:function(e,t,n){},75:function(e,t,n){},822:function(e,t,n){},838:function(e,t,n){},839:function(e,t,n){},842:function(e,t,n){},844:function(e,t,n){},92:function(e,t,n){}},[[1367,1,2]]]);
//# sourceMappingURL=main.f28e23d4.chunk.js.map